(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const p of h.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function r(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(u){if(u.ep)return;u.ep=!0;const h=r(u);fetch(u.href,h)}})();function xp(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var fc={exports:{}},wo={},dc={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var md;function Qg(){if(md)return Te;md=1;var i=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),p=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),T=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),M=Symbol.iterator;function j(O){return O===null||typeof O!="object"?null:(O=M&&O[M]||O["@@iterator"],typeof O=="function"?O:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,J={};function X(O,z,ae){this.props=O,this.context=z,this.refs=J,this.updater=ae||B}X.prototype.isReactComponent={},X.prototype.setState=function(O,z){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,z,"setState")},X.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function Ee(){}Ee.prototype=X.prototype;function ye(O,z,ae){this.props=O,this.context=z,this.refs=J,this.updater=ae||B}var se=ye.prototype=new Ee;se.constructor=ye,q(se,X.prototype),se.isPureReactComponent=!0;var le=Array.isArray,me=Object.prototype.hasOwnProperty,ce={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function E(O,z,ae){var ve,we={},Ae=null,Ne=null;if(z!=null)for(ve in z.ref!==void 0&&(Ne=z.ref),z.key!==void 0&&(Ae=""+z.key),z)me.call(z,ve)&&!R.hasOwnProperty(ve)&&(we[ve]=z[ve]);var Oe=arguments.length-2;if(Oe===1)we.children=ae;else if(1<Oe){for(var je=Array(Oe),ut=0;ut<Oe;ut++)je[ut]=arguments[ut+2];we.children=je}if(O&&O.defaultProps)for(ve in Oe=O.defaultProps,Oe)we[ve]===void 0&&(we[ve]=Oe[ve]);return{$$typeof:i,type:O,key:Ae,ref:Ne,props:we,_owner:ce.current}}function S(O,z){return{$$typeof:i,type:O.type,key:z,ref:O.ref,props:O.props,_owner:O._owner}}function C(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function k(O){var z={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ae){return z[ae]})}var N=/\/+/g;function I(O,z){return typeof O=="object"&&O!==null&&O.key!=null?k(""+O.key):z.toString(36)}function Ye(O,z,ae,ve,we){var Ae=typeof O;(Ae==="undefined"||Ae==="boolean")&&(O=null);var Ne=!1;if(O===null)Ne=!0;else switch(Ae){case"string":case"number":Ne=!0;break;case"object":switch(O.$$typeof){case i:case t:Ne=!0}}if(Ne)return Ne=O,we=we(Ne),O=ve===""?"."+I(Ne,0):ve,le(we)?(ae="",O!=null&&(ae=O.replace(N,"$&/")+"/"),Ye(we,z,ae,"",function(ut){return ut})):we!=null&&(C(we)&&(we=S(we,ae+(!we.key||Ne&&Ne.key===we.key?"":(""+we.key).replace(N,"$&/")+"/")+O)),z.push(we)),1;if(Ne=0,ve=ve===""?".":ve+":",le(O))for(var Oe=0;Oe<O.length;Oe++){Ae=O[Oe];var je=ve+I(Ae,Oe);Ne+=Ye(Ae,z,ae,je,we)}else if(je=j(O),typeof je=="function")for(O=je.call(O),Oe=0;!(Ae=O.next()).done;)Ae=Ae.value,je=ve+I(Ae,Oe++),Ne+=Ye(Ae,z,ae,je,we);else if(Ae==="object")throw z=String(O),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return Ne}function It(O,z,ae){if(O==null)return O;var ve=[],we=0;return Ye(O,ve,"","",function(Ae){return z.call(ae,Ae,we++)}),ve}function At(O){if(O._status===-1){var z=O._result;z=z(),z.then(function(ae){(O._status===0||O._status===-1)&&(O._status=1,O._result=ae)},function(ae){(O._status===0||O._status===-1)&&(O._status=2,O._result=ae)}),O._status===-1&&(O._status=0,O._result=z)}if(O._status===1)return O._result.default;throw O._result}var Me={current:null},Z={transition:null},he={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:Z,ReactCurrentOwner:ce};function te(){throw Error("act(...) is not supported in production builds of React.")}return Te.Children={map:It,forEach:function(O,z,ae){It(O,function(){z.apply(this,arguments)},ae)},count:function(O){var z=0;return It(O,function(){z++}),z},toArray:function(O){return It(O,function(z){return z})||[]},only:function(O){if(!C(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Te.Component=X,Te.Fragment=r,Te.Profiler=u,Te.PureComponent=ye,Te.StrictMode=o,Te.Suspense=v,Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=he,Te.act=te,Te.cloneElement=function(O,z,ae){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var ve=q({},O.props),we=O.key,Ae=O.ref,Ne=O._owner;if(z!=null){if(z.ref!==void 0&&(Ae=z.ref,Ne=ce.current),z.key!==void 0&&(we=""+z.key),O.type&&O.type.defaultProps)var Oe=O.type.defaultProps;for(je in z)me.call(z,je)&&!R.hasOwnProperty(je)&&(ve[je]=z[je]===void 0&&Oe!==void 0?Oe[je]:z[je])}var je=arguments.length-2;if(je===1)ve.children=ae;else if(1<je){Oe=Array(je);for(var ut=0;ut<je;ut++)Oe[ut]=arguments[ut+2];ve.children=Oe}return{$$typeof:i,type:O.type,key:we,ref:Ae,props:ve,_owner:Ne}},Te.createContext=function(O){return O={$$typeof:p,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:h,_context:O},O.Consumer=O},Te.createElement=E,Te.createFactory=function(O){var z=E.bind(null,O);return z.type=O,z},Te.createRef=function(){return{current:null}},Te.forwardRef=function(O){return{$$typeof:g,render:O}},Te.isValidElement=C,Te.lazy=function(O){return{$$typeof:P,_payload:{_status:-1,_result:O},_init:At}},Te.memo=function(O,z){return{$$typeof:T,type:O,compare:z===void 0?null:z}},Te.startTransition=function(O){var z=Z.transition;Z.transition={};try{O()}finally{Z.transition=z}},Te.unstable_act=te,Te.useCallback=function(O,z){return Me.current.useCallback(O,z)},Te.useContext=function(O){return Me.current.useContext(O)},Te.useDebugValue=function(){},Te.useDeferredValue=function(O){return Me.current.useDeferredValue(O)},Te.useEffect=function(O,z){return Me.current.useEffect(O,z)},Te.useId=function(){return Me.current.useId()},Te.useImperativeHandle=function(O,z,ae){return Me.current.useImperativeHandle(O,z,ae)},Te.useInsertionEffect=function(O,z){return Me.current.useInsertionEffect(O,z)},Te.useLayoutEffect=function(O,z){return Me.current.useLayoutEffect(O,z)},Te.useMemo=function(O,z){return Me.current.useMemo(O,z)},Te.useReducer=function(O,z,ae){return Me.current.useReducer(O,z,ae)},Te.useRef=function(O){return Me.current.useRef(O)},Te.useState=function(O){return Me.current.useState(O)},Te.useSyncExternalStore=function(O,z,ae){return Me.current.useSyncExternalStore(O,z,ae)},Te.useTransition=function(){return Me.current.useTransition()},Te.version="18.3.1",Te}var gd;function Uc(){return gd||(gd=1,dc.exports=Qg()),dc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yd;function Yg(){if(yd)return wo;yd=1;var i=Uc(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h={key:!0,ref:!0,__self:!0,__source:!0};function p(g,v,T){var P,M={},j=null,B=null;T!==void 0&&(j=""+T),v.key!==void 0&&(j=""+v.key),v.ref!==void 0&&(B=v.ref);for(P in v)o.call(v,P)&&!h.hasOwnProperty(P)&&(M[P]=v[P]);if(g&&g.defaultProps)for(P in v=g.defaultProps,v)M[P]===void 0&&(M[P]=v[P]);return{$$typeof:t,type:g,key:j,ref:B,props:M,_owner:u.current}}return wo.Fragment=r,wo.jsx=p,wo.jsxs=p,wo}var vd;function Xg(){return vd||(vd=1,fc.exports=Yg()),fc.exports}var b=Xg(),De=Uc();const Jg=xp(De);var ca={},pc={exports:{}},Gt={},mc={exports:{}},gc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _d;function Zg(){return _d||(_d=1,function(i){function t(Z,he){var te=Z.length;Z.push(he);e:for(;0<te;){var O=te-1>>>1,z=Z[O];if(0<u(z,he))Z[O]=he,Z[te]=z,te=O;else break e}}function r(Z){return Z.length===0?null:Z[0]}function o(Z){if(Z.length===0)return null;var he=Z[0],te=Z.pop();if(te!==he){Z[0]=te;e:for(var O=0,z=Z.length,ae=z>>>1;O<ae;){var ve=2*(O+1)-1,we=Z[ve],Ae=ve+1,Ne=Z[Ae];if(0>u(we,te))Ae<z&&0>u(Ne,we)?(Z[O]=Ne,Z[Ae]=te,O=Ae):(Z[O]=we,Z[ve]=te,O=ve);else if(Ae<z&&0>u(Ne,te))Z[O]=Ne,Z[Ae]=te,O=Ae;else break e}}return he}function u(Z,he){var te=Z.sortIndex-he.sortIndex;return te!==0?te:Z.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;i.unstable_now=function(){return h.now()}}else{var p=Date,g=p.now();i.unstable_now=function(){return p.now()-g}}var v=[],T=[],P=1,M=null,j=3,B=!1,q=!1,J=!1,X=typeof setTimeout=="function"?setTimeout:null,Ee=typeof clearTimeout=="function"?clearTimeout:null,ye=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function se(Z){for(var he=r(T);he!==null;){if(he.callback===null)o(T);else if(he.startTime<=Z)o(T),he.sortIndex=he.expirationTime,t(v,he);else break;he=r(T)}}function le(Z){if(J=!1,se(Z),!q)if(r(v)!==null)q=!0,At(me);else{var he=r(T);he!==null&&Me(le,he.startTime-Z)}}function me(Z,he){q=!1,J&&(J=!1,Ee(E),E=-1),B=!0;var te=j;try{for(se(he),M=r(v);M!==null&&(!(M.expirationTime>he)||Z&&!k());){var O=M.callback;if(typeof O=="function"){M.callback=null,j=M.priorityLevel;var z=O(M.expirationTime<=he);he=i.unstable_now(),typeof z=="function"?M.callback=z:M===r(v)&&o(v),se(he)}else o(v);M=r(v)}if(M!==null)var ae=!0;else{var ve=r(T);ve!==null&&Me(le,ve.startTime-he),ae=!1}return ae}finally{M=null,j=te,B=!1}}var ce=!1,R=null,E=-1,S=5,C=-1;function k(){return!(i.unstable_now()-C<S)}function N(){if(R!==null){var Z=i.unstable_now();C=Z;var he=!0;try{he=R(!0,Z)}finally{he?I():(ce=!1,R=null)}}else ce=!1}var I;if(typeof ye=="function")I=function(){ye(N)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,It=Ye.port2;Ye.port1.onmessage=N,I=function(){It.postMessage(null)}}else I=function(){X(N,0)};function At(Z){R=Z,ce||(ce=!0,I())}function Me(Z,he){E=X(function(){Z(i.unstable_now())},he)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Z){Z.callback=null},i.unstable_continueExecution=function(){q||B||(q=!0,At(me))},i.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Z?Math.floor(1e3/Z):5},i.unstable_getCurrentPriorityLevel=function(){return j},i.unstable_getFirstCallbackNode=function(){return r(v)},i.unstable_next=function(Z){switch(j){case 1:case 2:case 3:var he=3;break;default:he=j}var te=j;j=he;try{return Z()}finally{j=te}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Z,he){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var te=j;j=Z;try{return he()}finally{j=te}},i.unstable_scheduleCallback=function(Z,he,te){var O=i.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?O+te:O):te=O,Z){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=te+z,Z={id:P++,callback:he,priorityLevel:Z,startTime:te,expirationTime:z,sortIndex:-1},te>O?(Z.sortIndex=te,t(T,Z),r(v)===null&&Z===r(T)&&(J?(Ee(E),E=-1):J=!0,Me(le,te-O))):(Z.sortIndex=z,t(v,Z),q||B||(q=!0,At(me))),Z},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(Z){var he=j;return function(){var te=j;j=he;try{return Z.apply(this,arguments)}finally{j=te}}}}(gc)),gc}var Ed;function ey(){return Ed||(Ed=1,mc.exports=Zg()),mc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wd;function ty(){if(wd)return Gt;wd=1;var i=Uc(),t=ey();function r(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function h(e,n){p(e,n),p(e+"Capture",n)}function p(e,n){for(u[e]=n,e=0;e<n.length;e++)o.add(n[e])}var g=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,T=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P={},M={};function j(e){return v.call(M,e)?!0:v.call(P,e)?!1:T.test(e)?M[e]=!0:(P[e]=!0,!1)}function B(e,n,s,a){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function q(e,n,s,a){if(n===null||typeof n>"u"||B(e,n,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function J(e,n,s,a,c,d,y){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=s,this.propertyName=e,this.type=n,this.sanitizeURL=d,this.removeEmptyString=y}var X={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){X[e]=new J(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];X[n]=new J(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){X[e]=new J(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){X[e]=new J(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){X[e]=new J(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){X[e]=new J(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){X[e]=new J(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){X[e]=new J(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){X[e]=new J(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ee=/[\-:]([a-z])/g;function ye(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(Ee,ye);X[n]=new J(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(Ee,ye);X[n]=new J(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(Ee,ye);X[n]=new J(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){X[e]=new J(e,1,!1,e.toLowerCase(),null,!1,!1)}),X.xlinkHref=new J("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){X[e]=new J(e,1,!1,e.toLowerCase(),null,!0,!0)});function se(e,n,s,a){var c=X.hasOwnProperty(n)?X[n]:null;(c!==null?c.type!==0:a||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(q(n,s,c,a)&&(s=null),a||c===null?j(n)&&(s===null?e.removeAttribute(n):e.setAttribute(n,""+s)):c.mustUseProperty?e[c.propertyName]=s===null?c.type===3?!1:"":s:(n=c.attributeName,a=c.attributeNamespace,s===null?e.removeAttribute(n):(c=c.type,s=c===3||c===4&&s===!0?"":""+s,a?e.setAttributeNS(a,n,s):e.setAttribute(n,s))))}var le=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,me=Symbol.for("react.element"),ce=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),k=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),Ye=Symbol.for("react.suspense_list"),It=Symbol.for("react.memo"),At=Symbol.for("react.lazy"),Me=Symbol.for("react.offscreen"),Z=Symbol.iterator;function he(e){return e===null||typeof e!="object"?null:(e=Z&&e[Z]||e["@@iterator"],typeof e=="function"?e:null)}var te=Object.assign,O;function z(e){if(O===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);O=n&&n[1]||""}return`
`+O+e}var ae=!1;function ve(e,n){if(!e||ae)return"";ae=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(F){var a=F}Reflect.construct(e,[],n)}else{try{n.call()}catch(F){a=F}e.call(n.prototype)}else{try{throw Error()}catch(F){a=F}e()}}catch(F){if(F&&a&&typeof F.stack=="string"){for(var c=F.stack.split(`
`),d=a.stack.split(`
`),y=c.length-1,w=d.length-1;1<=y&&0<=w&&c[y]!==d[w];)w--;for(;1<=y&&0<=w;y--,w--)if(c[y]!==d[w]){if(y!==1||w!==1)do if(y--,w--,0>w||c[y]!==d[w]){var A=`
`+c[y].replace(" at new "," at ");return e.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",e.displayName)),A}while(1<=y&&0<=w);break}}}finally{ae=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?z(e):""}function we(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=ve(e.type,!1),e;case 11:return e=ve(e.type.render,!1),e;case 1:return e=ve(e.type,!0),e;default:return""}}function Ae(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case R:return"Fragment";case ce:return"Portal";case S:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case Ye:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case N:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case It:return n=e.displayName||null,n!==null?n:Ae(e.type)||"Memo";case At:n=e._payload,e=e._init;try{return Ae(e(n))}catch{}}return null}function Ne(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ae(n);case 8:return n===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Oe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function je(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ut(e){var n=je(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),a=""+e[n];if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,d=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return c.call(this)},set:function(y){a=""+y,d.call(this,y)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(y){a=""+y},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function $n(e){e._valueTracker||(e._valueTracker=ut(e))}function Si(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),a="";return e&&(a=je(e)?e.checked?"true":"false":e.value),e=a,e!==s?(n.setValue(e),!0):!1}function cr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Br(e,n){var s=n.checked;return te({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Ii(e,n){var s=n.defaultValue==null?"":n.defaultValue,a=n.checked!=null?n.checked:n.defaultChecked;s=Oe(n.value!=null?n.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Cs(e,n){n=n.checked,n!=null&&se(e,"checked",n,!1)}function Rs(e,n){Cs(e,n);var s=Oe(n.value),a=n.type;if(s!=null)a==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?Ai(e,n.type,s):n.hasOwnProperty("defaultValue")&&Ai(e,n.type,Oe(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function Qo(e,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var a=n.type;if(!(a!=="submit"&&a!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,s||n===e.value||(e.value=n),e.defaultValue=n}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Ai(e,n,s){(n!=="number"||cr(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Hn=Array.isArray;function Gn(e,n,s,a){if(e=e.options,n){n={};for(var c=0;c<s.length;c++)n["$"+s[c]]=!0;for(s=0;s<e.length;s++)c=n.hasOwnProperty("$"+e[s].value),e[s].selected!==c&&(e[s].selected=c),c&&a&&(e[s].defaultSelected=!0)}else{for(s=""+Oe(s),n=null,c=0;c<e.length;c++){if(e[c].value===s){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}n!==null||e[c].disabled||(n=e[c])}n!==null&&(n.selected=!0)}}function xs(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(r(91));return te({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ci(e,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(r(92));if(Hn(s)){if(1<s.length)throw Error(r(93));s=s[0]}n=s}n==null&&(n=""),s=n}e._wrapperState={initialValue:Oe(s)}}function Ri(e,n){var s=Oe(n.value),a=Oe(n.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),n.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),a!=null&&(e.defaultValue=""+a)}function Ps(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function it(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function st(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?it(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Kn,ks=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,a,c){MSApp.execUnsafeLocalFunction(function(){return e(n,s,a,c)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Kn=Kn||document.createElement("div"),Kn.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Kn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function hr(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var zr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$r=["Webkit","ms","Moz","O"];Object.keys(zr).forEach(function(e){$r.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),zr[n]=zr[e]})});function Ns(e,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||zr.hasOwnProperty(e)&&zr[e]?(""+n).trim():n+"px"}function Os(e,n){e=e.style;for(var s in n)if(n.hasOwnProperty(s)){var a=s.indexOf("--")===0,c=Ns(s,n[s],a);s==="float"&&(s="cssFloat"),a?e.setProperty(s,c):e[s]=c}}var Ds=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vs(e,n){if(n){if(Ds[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(r(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(r(61))}if(n.style!=null&&typeof n.style!="object")throw Error(r(62))}}function Ms(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hr=null;function xi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Pi=null,tn=null,kn=null;function ki(e){if(e=so(e)){if(typeof Pi!="function")throw Error(r(280));var n=e.stateNode;n&&(n=Al(n),Pi(e.stateNode,e.type,n))}}function Nn(e){tn?kn?kn.push(e):kn=[e]:tn=e}function Ls(){if(tn){var e=tn,n=kn;if(kn=tn=null,ki(e),n)for(e=0;e<n.length;e++)ki(n[e])}}function Gr(e,n){return e(n)}function Fs(){}var qn=!1;function js(e,n,s){if(qn)return e(n,s);qn=!0;try{return Gr(e,n,s)}finally{qn=!1,(tn!==null||kn!==null)&&(Fs(),Ls())}}function Xe(e,n){var s=e.stateNode;if(s===null)return null;var a=Al(s);if(a===null)return null;s=a[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(r(231,n,typeof s));return s}var Ni=!1;if(g)try{var fn={};Object.defineProperty(fn,"passive",{get:function(){Ni=!0}}),window.addEventListener("test",fn,fn),window.removeEventListener("test",fn,fn)}catch{Ni=!1}function Kr(e,n,s,a,c,d,y,w,A){var F=Array.prototype.slice.call(arguments,3);try{n.apply(s,F)}catch(H){this.onError(H)}}var qr=!1,Oi=null,dn=!1,Us=null,ba={onError:function(e){qr=!0,Oi=e}};function Di(e,n,s,a,c,d,y,w,A){qr=!1,Oi=null,Kr.apply(ba,arguments)}function Yo(e,n,s,a,c,d,y,w,A){if(Di.apply(this,arguments),qr){if(qr){var F=Oi;qr=!1,Oi=null}else throw Error(r(198));dn||(dn=!0,Us=F)}}function pn(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function Wr(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function mn(e){if(pn(e)!==e)throw Error(r(188))}function Xo(e){var n=e.alternate;if(!n){if(n=pn(e),n===null)throw Error(r(188));return n!==e?null:e}for(var s=e,a=n;;){var c=s.return;if(c===null)break;var d=c.alternate;if(d===null){if(a=c.return,a!==null){s=a;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===s)return mn(c),e;if(d===a)return mn(c),n;d=d.sibling}throw Error(r(188))}if(s.return!==a.return)s=c,a=d;else{for(var y=!1,w=c.child;w;){if(w===s){y=!0,s=c,a=d;break}if(w===a){y=!0,a=c,s=d;break}w=w.sibling}if(!y){for(w=d.child;w;){if(w===s){y=!0,s=d,a=c;break}if(w===a){y=!0,a=d,s=c;break}w=w.sibling}if(!y)throw Error(r(189))}}if(s.alternate!==a)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?e:n}function bs(e){return e=Xo(e),e!==null?Vi(e):null}function Vi(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Vi(e);if(n!==null)return n;e=e.sibling}return null}var Mi=t.unstable_scheduleCallback,Bs=t.unstable_cancelCallback,Jo=t.unstable_shouldYield,Ba=t.unstable_requestPaint,Ue=t.unstable_now,Zo=t.unstable_getCurrentPriorityLevel,Qr=t.unstable_ImmediatePriority,fr=t.unstable_UserBlockingPriority,nn=t.unstable_NormalPriority,zs=t.unstable_LowPriority,el=t.unstable_IdlePriority,Yr=null,Wt=null;function tl(e){if(Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(Yr,e,void 0,(e.current.flags&128)===128)}catch{}}var Vt=Math.clz32?Math.clz32:rl,$s=Math.log,nl=Math.LN2;function rl(e){return e>>>=0,e===0?32:31-($s(e)/nl|0)|0}var Li=64,Fi=4194304;function dr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Xr(e,n){var s=e.pendingLanes;if(s===0)return 0;var a=0,c=e.suspendedLanes,d=e.pingedLanes,y=s&268435455;if(y!==0){var w=y&~c;w!==0?a=dr(w):(d&=y,d!==0&&(a=dr(d)))}else y=s&~c,y!==0?a=dr(y):d!==0&&(a=dr(d));if(a===0)return 0;if(n!==0&&n!==a&&(n&c)===0&&(c=a&-a,d=n&-n,c>=d||c===16&&(d&4194240)!==0))return n;if((a&4)!==0&&(a|=s&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=a;0<n;)s=31-Vt(n),c=1<<s,a|=e[s],n&=~c;return a}function za(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wn(e,n){for(var s=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes;0<d;){var y=31-Vt(d),w=1<<y,A=c[y];A===-1?((w&s)===0||(w&a)!==0)&&(c[y]=za(w,n)):A<=n&&(e.expiredLanes|=w),d&=~w}}function Qt(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Jr(){var e=Li;return Li<<=1,(Li&4194240)===0&&(Li=64),e}function pr(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function mr(e,n,s){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Vt(n),e[n]=s}function Le(e,n){var s=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var c=31-Vt(s),d=1<<c;n[c]=0,a[c]=-1,e[c]=-1,s&=~d}}function gr(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var a=31-Vt(s),c=1<<a;c&n|e[a]&n&&(e[a]|=n),s&=~c}}var Se=0;function yr(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var il,ji,sl,ol,ll,Hs=!1,On=[],yt=null,gn=null,yn=null,vr=new Map,rn=new Map,Dn=[],$a="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function al(e,n){switch(e){case"focusin":case"focusout":yt=null;break;case"dragenter":case"dragleave":gn=null;break;case"mouseover":case"mouseout":yn=null;break;case"pointerover":case"pointerout":vr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":rn.delete(n.pointerId)}}function jt(e,n,s,a,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:s,eventSystemFlags:a,nativeEvent:d,targetContainers:[c]},n!==null&&(n=so(n),n!==null&&ji(n)),e):(e.eventSystemFlags|=a,n=e.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),e)}function Ha(e,n,s,a,c){switch(n){case"focusin":return yt=jt(yt,e,n,s,a,c),!0;case"dragenter":return gn=jt(gn,e,n,s,a,c),!0;case"mouseover":return yn=jt(yn,e,n,s,a,c),!0;case"pointerover":var d=c.pointerId;return vr.set(d,jt(vr.get(d)||null,e,n,s,a,c)),!0;case"gotpointercapture":return d=c.pointerId,rn.set(d,jt(rn.get(d)||null,e,n,s,a,c)),!0}return!1}function ul(e){var n=ri(e.target);if(n!==null){var s=pn(n);if(s!==null){if(n=s.tag,n===13){if(n=Wr(s),n!==null){e.blockedOn=n,ll(e.priority,function(){sl(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qn(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=Ui(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);Hr=a,s.target.dispatchEvent(a),Hr=null}else return n=so(s),n!==null&&ji(n),e.blockedOn=s,!1;n.shift()}return!0}function Zr(e,n,s){Qn(e)&&s.delete(n)}function cl(){Hs=!1,yt!==null&&Qn(yt)&&(yt=null),gn!==null&&Qn(gn)&&(gn=null),yn!==null&&Qn(yn)&&(yn=null),vr.forEach(Zr),rn.forEach(Zr)}function vn(e,n){e.blockedOn===n&&(e.blockedOn=null,Hs||(Hs=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,cl)))}function _n(e){function n(c){return vn(c,e)}if(0<On.length){vn(On[0],e);for(var s=1;s<On.length;s++){var a=On[s];a.blockedOn===e&&(a.blockedOn=null)}}for(yt!==null&&vn(yt,e),gn!==null&&vn(gn,e),yn!==null&&vn(yn,e),vr.forEach(n),rn.forEach(n),s=0;s<Dn.length;s++)a=Dn[s],a.blockedOn===e&&(a.blockedOn=null);for(;0<Dn.length&&(s=Dn[0],s.blockedOn===null);)ul(s),s.blockedOn===null&&Dn.shift()}var Yn=le.ReactCurrentBatchConfig,_r=!0;function He(e,n,s,a){var c=Se,d=Yn.transition;Yn.transition=null;try{Se=1,Gs(e,n,s,a)}finally{Se=c,Yn.transition=d}}function Ga(e,n,s,a){var c=Se,d=Yn.transition;Yn.transition=null;try{Se=4,Gs(e,n,s,a)}finally{Se=c,Yn.transition=d}}function Gs(e,n,s,a){if(_r){var c=Ui(e,n,s,a);if(c===null)nu(e,n,a,ei,s),al(e,a);else if(Ha(c,e,n,s,a))a.stopPropagation();else if(al(e,a),n&4&&-1<$a.indexOf(e)){for(;c!==null;){var d=so(c);if(d!==null&&il(d),d=Ui(e,n,s,a),d===null&&nu(e,n,a,ei,s),d===c)break;c=d}c!==null&&a.stopPropagation()}else nu(e,n,a,null,s)}}var ei=null;function Ui(e,n,s,a){if(ei=null,e=xi(a),e=ri(e),e!==null)if(n=pn(e),n===null)e=null;else if(s=n.tag,s===13){if(e=Wr(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return ei=e,null}function Ks(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zo()){case Qr:return 1;case fr:return 4;case nn:case zs:return 16;case el:return 536870912;default:return 16}default:return 16}}var Yt=null,bi=null,Ut=null;function qs(){if(Ut)return Ut;var e,n=bi,s=n.length,a,c="value"in Yt?Yt.value:Yt.textContent,d=c.length;for(e=0;e<s&&n[e]===c[e];e++);var y=s-e;for(a=1;a<=y&&n[s-a]===c[d-a];a++);return Ut=c.slice(e,1<a?1-a:void 0)}function Bi(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Vn(){return!0}function Ws(){return!1}function vt(e){function n(s,a,c,d,y){this._reactName=s,this._targetInst=c,this.type=a,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(s=e[w],this[w]=s?s(d):d[w]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Vn:Ws,this.isPropagationStopped=Ws,this}return te(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Vn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Vn)},persist:function(){},isPersistent:Vn}),n}var En={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zi=vt(En),Mn=te({},En,{view:0,detail:0}),Ka=vt(Mn),$i,Xn,Er,ti=te({},Mn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ln,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Er&&(Er&&e.type==="mousemove"?($i=e.screenX-Er.screenX,Xn=e.screenY-Er.screenY):Xn=$i=0,Er=e),$i)},movementY:function(e){return"movementY"in e?e.movementY:Xn}}),Hi=vt(ti),Qs=te({},ti,{dataTransfer:0}),hl=vt(Qs),Gi=te({},Mn,{relatedTarget:0}),Ki=vt(Gi),fl=te({},En,{animationName:0,elapsedTime:0,pseudoElement:0}),Jn=vt(fl),dl=te({},En,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),pl=vt(dl),ml=te({},En,{data:0}),Ys=vt(ml),qi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yl(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=gl[e])?!!n[e]:!1}function Ln(){return yl}var l=te({},Mn,{key:function(e){if(e.key){var n=qi[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Bi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Mt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ln,charCode:function(e){return e.type==="keypress"?Bi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),f=vt(l),m=te({},ti,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_=vt(m),D=te({},Mn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ln}),U=vt(D),Y=te({},En,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ve=vt(Y),ot=te({},ti,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ce=vt(ot),ct=[9,13,27,32],et=g&&"CompositionEvent"in window,sn=null;g&&"documentMode"in document&&(sn=document.documentMode);var Xt=g&&"TextEvent"in window&&!sn,ni=g&&(!et||sn&&8<sn&&11>=sn),Wi=" ",ah=!1;function uh(e,n){switch(e){case"keyup":return ct.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ch(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qi=!1;function Km(e,n){switch(e){case"compositionend":return ch(n);case"keypress":return n.which!==32?null:(ah=!0,Wi);case"textInput":return e=n.data,e===Wi&&ah?null:e;default:return null}}function qm(e,n){if(Qi)return e==="compositionend"||!et&&uh(e,n)?(e=qs(),Ut=bi=Yt=null,Qi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return ni&&n.locale!=="ko"?null:n.data;default:return null}}var Wm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Wm[e.type]:n==="textarea"}function fh(e,n,s,a){Nn(a),n=Tl(n,"onChange"),0<n.length&&(s=new zi("onChange","change",null,s,a),e.push({event:s,listeners:n}))}var Xs=null,Js=null;function Qm(e){kh(e,0)}function vl(e){var n=es(e);if(Si(n))return e}function Ym(e,n){if(e==="change")return n}var dh=!1;if(g){var qa;if(g){var Wa="oninput"in document;if(!Wa){var ph=document.createElement("div");ph.setAttribute("oninput","return;"),Wa=typeof ph.oninput=="function"}qa=Wa}else qa=!1;dh=qa&&(!document.documentMode||9<document.documentMode)}function mh(){Xs&&(Xs.detachEvent("onpropertychange",gh),Js=Xs=null)}function gh(e){if(e.propertyName==="value"&&vl(Js)){var n=[];fh(n,Js,e,xi(e)),js(Qm,n)}}function Xm(e,n,s){e==="focusin"?(mh(),Xs=n,Js=s,Xs.attachEvent("onpropertychange",gh)):e==="focusout"&&mh()}function Jm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vl(Js)}function Zm(e,n){if(e==="click")return vl(n)}function eg(e,n){if(e==="input"||e==="change")return vl(n)}function tg(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var wn=typeof Object.is=="function"?Object.is:tg;function Zs(e,n){if(wn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),a=Object.keys(n);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var c=s[a];if(!v.call(n,c)||!wn(e[c],n[c]))return!1}return!0}function yh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vh(e,n){var s=yh(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=n&&a>=n)return{node:s,offset:n-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=yh(s)}}function _h(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?_h(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Eh(){for(var e=window,n=cr();n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=cr(e.document)}return n}function Qa(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function ng(e){var n=Eh(),s=e.focusedElem,a=e.selectionRange;if(n!==s&&s&&s.ownerDocument&&_h(s.ownerDocument.documentElement,s)){if(a!==null&&Qa(s)){if(n=a.start,e=a.end,e===void 0&&(e=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(e,s.value.length);else if(e=(n=s.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var c=s.textContent.length,d=Math.min(a.start,c);a=a.end===void 0?d:Math.min(a.end,c),!e.extend&&d>a&&(c=a,a=d,d=c),c=vh(s,d);var y=vh(s,a);c&&y&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(n=n.createRange(),n.setStart(c.node,c.offset),e.removeAllRanges(),d>a?(e.addRange(n),e.extend(y.node,y.offset)):(n.setEnd(y.node,y.offset),e.addRange(n)))}}for(n=[],e=s;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)e=n[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var rg=g&&"documentMode"in document&&11>=document.documentMode,Yi=null,Ya=null,eo=null,Xa=!1;function wh(e,n,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Xa||Yi==null||Yi!==cr(a)||(a=Yi,"selectionStart"in a&&Qa(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),eo&&Zs(eo,a)||(eo=a,a=Tl(Ya,"onSelect"),0<a.length&&(n=new zi("onSelect","select",null,n,s),e.push({event:n,listeners:a}),n.target=Yi)))}function _l(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var Xi={animationend:_l("Animation","AnimationEnd"),animationiteration:_l("Animation","AnimationIteration"),animationstart:_l("Animation","AnimationStart"),transitionend:_l("Transition","TransitionEnd")},Ja={},Th={};g&&(Th=document.createElement("div").style,"AnimationEvent"in window||(delete Xi.animationend.animation,delete Xi.animationiteration.animation,delete Xi.animationstart.animation),"TransitionEvent"in window||delete Xi.transitionend.transition);function El(e){if(Ja[e])return Ja[e];if(!Xi[e])return e;var n=Xi[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in Th)return Ja[e]=n[s];return e}var Sh=El("animationend"),Ih=El("animationiteration"),Ah=El("animationstart"),Ch=El("transitionend"),Rh=new Map,xh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wr(e,n){Rh.set(e,n),h(n,[e])}for(var Za=0;Za<xh.length;Za++){var eu=xh[Za],ig=eu.toLowerCase(),sg=eu[0].toUpperCase()+eu.slice(1);wr(ig,"on"+sg)}wr(Sh,"onAnimationEnd"),wr(Ih,"onAnimationIteration"),wr(Ah,"onAnimationStart"),wr("dblclick","onDoubleClick"),wr("focusin","onFocus"),wr("focusout","onBlur"),wr(Ch,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),h("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),h("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),h("onBeforeInput",["compositionend","keypress","textInput","paste"]),h("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var to="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),og=new Set("cancel close invalid load scroll toggle".split(" ").concat(to));function Ph(e,n,s){var a=e.type||"unknown-event";e.currentTarget=s,Yo(a,n,void 0,e),e.currentTarget=null}function kh(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],c=a.event;a=a.listeners;e:{var d=void 0;if(n)for(var y=a.length-1;0<=y;y--){var w=a[y],A=w.instance,F=w.currentTarget;if(w=w.listener,A!==d&&c.isPropagationStopped())break e;Ph(c,w,F),d=A}else for(y=0;y<a.length;y++){if(w=a[y],A=w.instance,F=w.currentTarget,w=w.listener,A!==d&&c.isPropagationStopped())break e;Ph(c,w,F),d=A}}}if(dn)throw e=Us,dn=!1,Us=null,e}function ze(e,n){var s=n[au];s===void 0&&(s=n[au]=new Set);var a=e+"__bubble";s.has(a)||(Nh(n,e,2,!1),s.add(a))}function tu(e,n,s){var a=0;n&&(a|=4),Nh(s,e,a,n)}var wl="_reactListening"+Math.random().toString(36).slice(2);function no(e){if(!e[wl]){e[wl]=!0,o.forEach(function(s){s!=="selectionchange"&&(og.has(s)||tu(s,!1,e),tu(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[wl]||(n[wl]=!0,tu("selectionchange",!1,n))}}function Nh(e,n,s,a){switch(Ks(n)){case 1:var c=He;break;case 4:c=Ga;break;default:c=Gs}s=c.bind(null,n,s,e),c=void 0,!Ni||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(n,s,{capture:!0,passive:c}):e.addEventListener(n,s,!0):c!==void 0?e.addEventListener(n,s,{passive:c}):e.addEventListener(n,s,!1)}function nu(e,n,s,a,c){var d=a;if((n&1)===0&&(n&2)===0&&a!==null)e:for(;;){if(a===null)return;var y=a.tag;if(y===3||y===4){var w=a.stateNode.containerInfo;if(w===c||w.nodeType===8&&w.parentNode===c)break;if(y===4)for(y=a.return;y!==null;){var A=y.tag;if((A===3||A===4)&&(A=y.stateNode.containerInfo,A===c||A.nodeType===8&&A.parentNode===c))return;y=y.return}for(;w!==null;){if(y=ri(w),y===null)return;if(A=y.tag,A===5||A===6){a=d=y;continue e}w=w.parentNode}}a=a.return}js(function(){var F=d,H=xi(s),G=[];e:{var $=Rh.get(e);if($!==void 0){var ee=zi,re=e;switch(e){case"keypress":if(Bi(s)===0)break e;case"keydown":case"keyup":ee=f;break;case"focusin":re="focus",ee=Ki;break;case"focusout":re="blur",ee=Ki;break;case"beforeblur":case"afterblur":ee=Ki;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=Hi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=hl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=U;break;case Sh:case Ih:case Ah:ee=Jn;break;case Ch:ee=Ve;break;case"scroll":ee=Ka;break;case"wheel":ee=Ce;break;case"copy":case"cut":case"paste":ee=pl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=_}var ie=(n&4)!==0,Je=!ie&&e==="scroll",V=ie?$!==null?$+"Capture":null:$;ie=[];for(var x=F,L;x!==null;){L=x;var W=L.stateNode;if(L.tag===5&&W!==null&&(L=W,V!==null&&(W=Xe(x,V),W!=null&&ie.push(ro(x,W,L)))),Je)break;x=x.return}0<ie.length&&($=new ee($,re,null,s,H),G.push({event:$,listeners:ie}))}}if((n&7)===0){e:{if($=e==="mouseover"||e==="pointerover",ee=e==="mouseout"||e==="pointerout",$&&s!==Hr&&(re=s.relatedTarget||s.fromElement)&&(ri(re)||re[Zn]))break e;if((ee||$)&&($=H.window===H?H:($=H.ownerDocument)?$.defaultView||$.parentWindow:window,ee?(re=s.relatedTarget||s.toElement,ee=F,re=re?ri(re):null,re!==null&&(Je=pn(re),re!==Je||re.tag!==5&&re.tag!==6)&&(re=null)):(ee=null,re=F),ee!==re)){if(ie=Hi,W="onMouseLeave",V="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(ie=_,W="onPointerLeave",V="onPointerEnter",x="pointer"),Je=ee==null?$:es(ee),L=re==null?$:es(re),$=new ie(W,x+"leave",ee,s,H),$.target=Je,$.relatedTarget=L,W=null,ri(H)===F&&(ie=new ie(V,x+"enter",re,s,H),ie.target=L,ie.relatedTarget=Je,W=ie),Je=W,ee&&re)t:{for(ie=ee,V=re,x=0,L=ie;L;L=Ji(L))x++;for(L=0,W=V;W;W=Ji(W))L++;for(;0<x-L;)ie=Ji(ie),x--;for(;0<L-x;)V=Ji(V),L--;for(;x--;){if(ie===V||V!==null&&ie===V.alternate)break t;ie=Ji(ie),V=Ji(V)}ie=null}else ie=null;ee!==null&&Oh(G,$,ee,ie,!1),re!==null&&Je!==null&&Oh(G,Je,re,ie,!0)}}e:{if($=F?es(F):window,ee=$.nodeName&&$.nodeName.toLowerCase(),ee==="select"||ee==="input"&&$.type==="file")var oe=Ym;else if(hh($))if(dh)oe=eg;else{oe=Jm;var fe=Xm}else(ee=$.nodeName)&&ee.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(oe=Zm);if(oe&&(oe=oe(e,F))){fh(G,oe,s,H);break e}fe&&fe(e,$,F),e==="focusout"&&(fe=$._wrapperState)&&fe.controlled&&$.type==="number"&&Ai($,"number",$.value)}switch(fe=F?es(F):window,e){case"focusin":(hh(fe)||fe.contentEditable==="true")&&(Yi=fe,Ya=F,eo=null);break;case"focusout":eo=Ya=Yi=null;break;case"mousedown":Xa=!0;break;case"contextmenu":case"mouseup":case"dragend":Xa=!1,wh(G,s,H);break;case"selectionchange":if(rg)break;case"keydown":case"keyup":wh(G,s,H)}var de;if(et)e:{switch(e){case"compositionstart":var pe="onCompositionStart";break e;case"compositionend":pe="onCompositionEnd";break e;case"compositionupdate":pe="onCompositionUpdate";break e}pe=void 0}else Qi?uh(e,s)&&(pe="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(pe="onCompositionStart");pe&&(ni&&s.locale!=="ko"&&(Qi||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&Qi&&(de=qs()):(Yt=H,bi="value"in Yt?Yt.value:Yt.textContent,Qi=!0)),fe=Tl(F,pe),0<fe.length&&(pe=new Ys(pe,e,null,s,H),G.push({event:pe,listeners:fe}),de?pe.data=de:(de=ch(s),de!==null&&(pe.data=de)))),(de=Xt?Km(e,s):qm(e,s))&&(F=Tl(F,"onBeforeInput"),0<F.length&&(H=new Ys("onBeforeInput","beforeinput",null,s,H),G.push({event:H,listeners:F}),H.data=de))}kh(G,n)})}function ro(e,n,s){return{instance:e,listener:n,currentTarget:s}}function Tl(e,n){for(var s=n+"Capture",a=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=Xe(e,s),d!=null&&a.unshift(ro(e,d,c)),d=Xe(e,n),d!=null&&a.push(ro(e,d,c))),e=e.return}return a}function Ji(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Oh(e,n,s,a,c){for(var d=n._reactName,y=[];s!==null&&s!==a;){var w=s,A=w.alternate,F=w.stateNode;if(A!==null&&A===a)break;w.tag===5&&F!==null&&(w=F,c?(A=Xe(s,d),A!=null&&y.unshift(ro(s,A,w))):c||(A=Xe(s,d),A!=null&&y.push(ro(s,A,w)))),s=s.return}y.length!==0&&e.push({event:n,listeners:y})}var lg=/\r\n?/g,ag=/\u0000|\uFFFD/g;function Dh(e){return(typeof e=="string"?e:""+e).replace(lg,`
`).replace(ag,"")}function Sl(e,n,s){if(n=Dh(n),Dh(e)!==n&&s)throw Error(r(425))}function Il(){}var ru=null,iu=null;function su(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var ou=typeof setTimeout=="function"?setTimeout:void 0,ug=typeof clearTimeout=="function"?clearTimeout:void 0,Vh=typeof Promise=="function"?Promise:void 0,cg=typeof queueMicrotask=="function"?queueMicrotask:typeof Vh<"u"?function(e){return Vh.resolve(null).then(e).catch(hg)}:ou;function hg(e){setTimeout(function(){throw e})}function lu(e,n){var s=n,a=0;do{var c=s.nextSibling;if(e.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"){if(a===0){e.removeChild(c),_n(n);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=c}while(s);_n(n)}function Tr(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Mh(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}var Zi=Math.random().toString(36).slice(2),Fn="__reactFiber$"+Zi,io="__reactProps$"+Zi,Zn="__reactContainer$"+Zi,au="__reactEvents$"+Zi,fg="__reactListeners$"+Zi,dg="__reactHandles$"+Zi;function ri(e){var n=e[Fn];if(n)return n;for(var s=e.parentNode;s;){if(n=s[Zn]||s[Fn]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=Mh(e);e!==null;){if(s=e[Fn])return s;e=Mh(e)}return n}e=s,s=e.parentNode}return null}function so(e){return e=e[Fn]||e[Zn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function es(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function Al(e){return e[io]||null}var uu=[],ts=-1;function Sr(e){return{current:e}}function $e(e){0>ts||(e.current=uu[ts],uu[ts]=null,ts--)}function be(e,n){ts++,uu[ts]=e.current,e.current=n}var Ir={},Ct=Sr(Ir),bt=Sr(!1),ii=Ir;function ns(e,n){var s=e.type.contextTypes;if(!s)return Ir;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===n)return a.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in s)c[d]=n[d];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=c),c}function Bt(e){return e=e.childContextTypes,e!=null}function Cl(){$e(bt),$e(Ct)}function Lh(e,n,s){if(Ct.current!==Ir)throw Error(r(168));be(Ct,n),be(bt,s)}function Fh(e,n,s){var a=e.stateNode;if(n=n.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var c in a)if(!(c in n))throw Error(r(108,Ne(e)||"Unknown",c));return te({},s,a)}function Rl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ir,ii=Ct.current,be(Ct,e),be(bt,bt.current),!0}function jh(e,n,s){var a=e.stateNode;if(!a)throw Error(r(169));s?(e=Fh(e,n,ii),a.__reactInternalMemoizedMergedChildContext=e,$e(bt),$e(Ct),be(Ct,e)):$e(bt),be(bt,s)}var er=null,xl=!1,cu=!1;function Uh(e){er===null?er=[e]:er.push(e)}function pg(e){xl=!0,Uh(e)}function Ar(){if(!cu&&er!==null){cu=!0;var e=0,n=Se;try{var s=er;for(Se=1;e<s.length;e++){var a=s[e];do a=a(!0);while(a!==null)}er=null,xl=!1}catch(c){throw er!==null&&(er=er.slice(e+1)),Mi(Qr,Ar),c}finally{Se=n,cu=!1}}return null}var rs=[],is=0,Pl=null,kl=0,on=[],ln=0,si=null,tr=1,nr="";function oi(e,n){rs[is++]=kl,rs[is++]=Pl,Pl=e,kl=n}function bh(e,n,s){on[ln++]=tr,on[ln++]=nr,on[ln++]=si,si=e;var a=tr;e=nr;var c=32-Vt(a)-1;a&=~(1<<c),s+=1;var d=32-Vt(n)+c;if(30<d){var y=c-c%5;d=(a&(1<<y)-1).toString(32),a>>=y,c-=y,tr=1<<32-Vt(n)+c|s<<c|a,nr=d+e}else tr=1<<d|s<<c|a,nr=e}function hu(e){e.return!==null&&(oi(e,1),bh(e,1,0))}function fu(e){for(;e===Pl;)Pl=rs[--is],rs[is]=null,kl=rs[--is],rs[is]=null;for(;e===si;)si=on[--ln],on[ln]=null,nr=on[--ln],on[ln]=null,tr=on[--ln],on[ln]=null}var Jt=null,Zt=null,Ge=!1,Tn=null;function Bh(e,n){var s=hn(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=e,n=e.deletions,n===null?(e.deletions=[s],e.flags|=16):n.push(s)}function zh(e,n){switch(e.tag){case 5:var s=e.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,Jt=e,Zt=Tr(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,Jt=e,Zt=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=si!==null?{id:tr,overflow:nr}:null,e.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=hn(18,null,null,0),s.stateNode=n,s.return=e,e.child=s,Jt=e,Zt=null,!0):!1;default:return!1}}function du(e){return(e.mode&1)!==0&&(e.flags&128)===0}function pu(e){if(Ge){var n=Zt;if(n){var s=n;if(!zh(e,n)){if(du(e))throw Error(r(418));n=Tr(s.nextSibling);var a=Jt;n&&zh(e,n)?Bh(a,s):(e.flags=e.flags&-4097|2,Ge=!1,Jt=e)}}else{if(du(e))throw Error(r(418));e.flags=e.flags&-4097|2,Ge=!1,Jt=e}}}function $h(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Jt=e}function Nl(e){if(e!==Jt)return!1;if(!Ge)return $h(e),Ge=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!su(e.type,e.memoizedProps)),n&&(n=Zt)){if(du(e))throw Hh(),Error(r(418));for(;n;)Bh(e,n),n=Tr(n.nextSibling)}if($h(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(n===0){Zt=Tr(e.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}e=e.nextSibling}Zt=null}}else Zt=Jt?Tr(e.stateNode.nextSibling):null;return!0}function Hh(){for(var e=Zt;e;)e=Tr(e.nextSibling)}function ss(){Zt=Jt=null,Ge=!1}function mu(e){Tn===null?Tn=[e]:Tn.push(e)}var mg=le.ReactCurrentBatchConfig;function oo(e,n,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(r(309));var a=s.stateNode}if(!a)throw Error(r(147,e));var c=a,d=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===d?n.ref:(n=function(y){var w=c.refs;y===null?delete w[d]:w[d]=y},n._stringRef=d,n)}if(typeof e!="string")throw Error(r(284));if(!s._owner)throw Error(r(290,e))}return e}function Ol(e,n){throw e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Gh(e){var n=e._init;return n(e._payload)}function Kh(e){function n(V,x){if(e){var L=V.deletions;L===null?(V.deletions=[x],V.flags|=16):L.push(x)}}function s(V,x){if(!e)return null;for(;x!==null;)n(V,x),x=x.sibling;return null}function a(V,x){for(V=new Map;x!==null;)x.key!==null?V.set(x.key,x):V.set(x.index,x),x=x.sibling;return V}function c(V,x){return V=Dr(V,x),V.index=0,V.sibling=null,V}function d(V,x,L){return V.index=L,e?(L=V.alternate,L!==null?(L=L.index,L<x?(V.flags|=2,x):L):(V.flags|=2,x)):(V.flags|=1048576,x)}function y(V){return e&&V.alternate===null&&(V.flags|=2),V}function w(V,x,L,W){return x===null||x.tag!==6?(x=oc(L,V.mode,W),x.return=V,x):(x=c(x,L),x.return=V,x)}function A(V,x,L,W){var oe=L.type;return oe===R?H(V,x,L.props.children,W,L.key):x!==null&&(x.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===At&&Gh(oe)===x.type)?(W=c(x,L.props),W.ref=oo(V,x,L),W.return=V,W):(W=na(L.type,L.key,L.props,null,V.mode,W),W.ref=oo(V,x,L),W.return=V,W)}function F(V,x,L,W){return x===null||x.tag!==4||x.stateNode.containerInfo!==L.containerInfo||x.stateNode.implementation!==L.implementation?(x=lc(L,V.mode,W),x.return=V,x):(x=c(x,L.children||[]),x.return=V,x)}function H(V,x,L,W,oe){return x===null||x.tag!==7?(x=pi(L,V.mode,W,oe),x.return=V,x):(x=c(x,L),x.return=V,x)}function G(V,x,L){if(typeof x=="string"&&x!==""||typeof x=="number")return x=oc(""+x,V.mode,L),x.return=V,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case me:return L=na(x.type,x.key,x.props,null,V.mode,L),L.ref=oo(V,null,x),L.return=V,L;case ce:return x=lc(x,V.mode,L),x.return=V,x;case At:var W=x._init;return G(V,W(x._payload),L)}if(Hn(x)||he(x))return x=pi(x,V.mode,L,null),x.return=V,x;Ol(V,x)}return null}function $(V,x,L,W){var oe=x!==null?x.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return oe!==null?null:w(V,x,""+L,W);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case me:return L.key===oe?A(V,x,L,W):null;case ce:return L.key===oe?F(V,x,L,W):null;case At:return oe=L._init,$(V,x,oe(L._payload),W)}if(Hn(L)||he(L))return oe!==null?null:H(V,x,L,W,null);Ol(V,L)}return null}function ee(V,x,L,W,oe){if(typeof W=="string"&&W!==""||typeof W=="number")return V=V.get(L)||null,w(x,V,""+W,oe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case me:return V=V.get(W.key===null?L:W.key)||null,A(x,V,W,oe);case ce:return V=V.get(W.key===null?L:W.key)||null,F(x,V,W,oe);case At:var fe=W._init;return ee(V,x,L,fe(W._payload),oe)}if(Hn(W)||he(W))return V=V.get(L)||null,H(x,V,W,oe,null);Ol(x,W)}return null}function re(V,x,L,W){for(var oe=null,fe=null,de=x,pe=x=0,dt=null;de!==null&&pe<L.length;pe++){de.index>pe?(dt=de,de=null):dt=de.sibling;var ke=$(V,de,L[pe],W);if(ke===null){de===null&&(de=dt);break}e&&de&&ke.alternate===null&&n(V,de),x=d(ke,x,pe),fe===null?oe=ke:fe.sibling=ke,fe=ke,de=dt}if(pe===L.length)return s(V,de),Ge&&oi(V,pe),oe;if(de===null){for(;pe<L.length;pe++)de=G(V,L[pe],W),de!==null&&(x=d(de,x,pe),fe===null?oe=de:fe.sibling=de,fe=de);return Ge&&oi(V,pe),oe}for(de=a(V,de);pe<L.length;pe++)dt=ee(de,V,pe,L[pe],W),dt!==null&&(e&&dt.alternate!==null&&de.delete(dt.key===null?pe:dt.key),x=d(dt,x,pe),fe===null?oe=dt:fe.sibling=dt,fe=dt);return e&&de.forEach(function(Vr){return n(V,Vr)}),Ge&&oi(V,pe),oe}function ie(V,x,L,W){var oe=he(L);if(typeof oe!="function")throw Error(r(150));if(L=oe.call(L),L==null)throw Error(r(151));for(var fe=oe=null,de=x,pe=x=0,dt=null,ke=L.next();de!==null&&!ke.done;pe++,ke=L.next()){de.index>pe?(dt=de,de=null):dt=de.sibling;var Vr=$(V,de,ke.value,W);if(Vr===null){de===null&&(de=dt);break}e&&de&&Vr.alternate===null&&n(V,de),x=d(Vr,x,pe),fe===null?oe=Vr:fe.sibling=Vr,fe=Vr,de=dt}if(ke.done)return s(V,de),Ge&&oi(V,pe),oe;if(de===null){for(;!ke.done;pe++,ke=L.next())ke=G(V,ke.value,W),ke!==null&&(x=d(ke,x,pe),fe===null?oe=ke:fe.sibling=ke,fe=ke);return Ge&&oi(V,pe),oe}for(de=a(V,de);!ke.done;pe++,ke=L.next())ke=ee(de,V,pe,ke.value,W),ke!==null&&(e&&ke.alternate!==null&&de.delete(ke.key===null?pe:ke.key),x=d(ke,x,pe),fe===null?oe=ke:fe.sibling=ke,fe=ke);return e&&de.forEach(function(Wg){return n(V,Wg)}),Ge&&oi(V,pe),oe}function Je(V,x,L,W){if(typeof L=="object"&&L!==null&&L.type===R&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case me:e:{for(var oe=L.key,fe=x;fe!==null;){if(fe.key===oe){if(oe=L.type,oe===R){if(fe.tag===7){s(V,fe.sibling),x=c(fe,L.props.children),x.return=V,V=x;break e}}else if(fe.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===At&&Gh(oe)===fe.type){s(V,fe.sibling),x=c(fe,L.props),x.ref=oo(V,fe,L),x.return=V,V=x;break e}s(V,fe);break}else n(V,fe);fe=fe.sibling}L.type===R?(x=pi(L.props.children,V.mode,W,L.key),x.return=V,V=x):(W=na(L.type,L.key,L.props,null,V.mode,W),W.ref=oo(V,x,L),W.return=V,V=W)}return y(V);case ce:e:{for(fe=L.key;x!==null;){if(x.key===fe)if(x.tag===4&&x.stateNode.containerInfo===L.containerInfo&&x.stateNode.implementation===L.implementation){s(V,x.sibling),x=c(x,L.children||[]),x.return=V,V=x;break e}else{s(V,x);break}else n(V,x);x=x.sibling}x=lc(L,V.mode,W),x.return=V,V=x}return y(V);case At:return fe=L._init,Je(V,x,fe(L._payload),W)}if(Hn(L))return re(V,x,L,W);if(he(L))return ie(V,x,L,W);Ol(V,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,x!==null&&x.tag===6?(s(V,x.sibling),x=c(x,L),x.return=V,V=x):(s(V,x),x=oc(L,V.mode,W),x.return=V,V=x),y(V)):s(V,x)}return Je}var os=Kh(!0),qh=Kh(!1),Dl=Sr(null),Vl=null,ls=null,gu=null;function yu(){gu=ls=Vl=null}function vu(e){var n=Dl.current;$e(Dl),e._currentValue=n}function _u(e,n,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,a!==null&&(a.childLanes|=n)):a!==null&&(a.childLanes&n)!==n&&(a.childLanes|=n),e===s)break;e=e.return}}function as(e,n){Vl=e,gu=ls=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(zt=!0),e.firstContext=null)}function an(e){var n=e._currentValue;if(gu!==e)if(e={context:e,memoizedValue:n,next:null},ls===null){if(Vl===null)throw Error(r(308));ls=e,Vl.dependencies={lanes:0,firstContext:e}}else ls=ls.next=e;return n}var li=null;function Eu(e){li===null?li=[e]:li.push(e)}function Wh(e,n,s,a){var c=n.interleaved;return c===null?(s.next=s,Eu(n)):(s.next=c.next,c.next=s),n.interleaved=s,rr(e,a)}function rr(e,n){e.lanes|=n;var s=e.alternate;for(s!==null&&(s.lanes|=n),s=e,e=e.return;e!==null;)e.childLanes|=n,s=e.alternate,s!==null&&(s.childLanes|=n),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Cr=!1;function wu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qh(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ir(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Rr(e,n,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(xe&2)!==0){var c=a.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),a.pending=n,rr(e,s)}return c=a.interleaved,c===null?(n.next=n,Eu(a)):(n.next=c.next,c.next=n),a.interleaved=n,rr(e,s)}function Ml(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var a=n.lanes;a&=e.pendingLanes,s|=a,n.lanes=s,gr(e,s)}}function Yh(e,n){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var c=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var y={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};d===null?c=d=y:d=d.next=y,s=s.next}while(s!==null);d===null?c=d=n:d=d.next=n}else c=d=n;s={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:a.shared,effects:a.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}function Ll(e,n,s,a){var c=e.updateQueue;Cr=!1;var d=c.firstBaseUpdate,y=c.lastBaseUpdate,w=c.shared.pending;if(w!==null){c.shared.pending=null;var A=w,F=A.next;A.next=null,y===null?d=F:y.next=F,y=A;var H=e.alternate;H!==null&&(H=H.updateQueue,w=H.lastBaseUpdate,w!==y&&(w===null?H.firstBaseUpdate=F:w.next=F,H.lastBaseUpdate=A))}if(d!==null){var G=c.baseState;y=0,H=F=A=null,w=d;do{var $=w.lane,ee=w.eventTime;if((a&$)===$){H!==null&&(H=H.next={eventTime:ee,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var re=e,ie=w;switch($=n,ee=s,ie.tag){case 1:if(re=ie.payload,typeof re=="function"){G=re.call(ee,G,$);break e}G=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=ie.payload,$=typeof re=="function"?re.call(ee,G,$):re,$==null)break e;G=te({},G,$);break e;case 2:Cr=!0}}w.callback!==null&&w.lane!==0&&(e.flags|=64,$=c.effects,$===null?c.effects=[w]:$.push(w))}else ee={eventTime:ee,lane:$,tag:w.tag,payload:w.payload,callback:w.callback,next:null},H===null?(F=H=ee,A=G):H=H.next=ee,y|=$;if(w=w.next,w===null){if(w=c.shared.pending,w===null)break;$=w,w=$.next,$.next=null,c.lastBaseUpdate=$,c.shared.pending=null}}while(!0);if(H===null&&(A=G),c.baseState=A,c.firstBaseUpdate=F,c.lastBaseUpdate=H,n=c.shared.interleaved,n!==null){c=n;do y|=c.lane,c=c.next;while(c!==n)}else d===null&&(c.shared.lanes=0);ci|=y,e.lanes=y,e.memoizedState=G}}function Xh(e,n,s){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var a=e[n],c=a.callback;if(c!==null){if(a.callback=null,a=s,typeof c!="function")throw Error(r(191,c));c.call(a)}}}var lo={},jn=Sr(lo),ao=Sr(lo),uo=Sr(lo);function ai(e){if(e===lo)throw Error(r(174));return e}function Tu(e,n){switch(be(uo,n),be(ao,e),be(jn,lo),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:st(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=st(n,e)}$e(jn),be(jn,n)}function us(){$e(jn),$e(ao),$e(uo)}function Jh(e){ai(uo.current);var n=ai(jn.current),s=st(n,e.type);n!==s&&(be(ao,e),be(jn,s))}function Su(e){ao.current===e&&($e(jn),$e(ao))}var Ke=Sr(0);function Fl(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Iu=[];function Au(){for(var e=0;e<Iu.length;e++)Iu[e]._workInProgressVersionPrimary=null;Iu.length=0}var jl=le.ReactCurrentDispatcher,Cu=le.ReactCurrentBatchConfig,ui=0,qe=null,lt=null,ht=null,Ul=!1,co=!1,ho=0,gg=0;function Rt(){throw Error(r(321))}function Ru(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!wn(e[s],n[s]))return!1;return!0}function xu(e,n,s,a,c,d){if(ui=d,qe=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,jl.current=e===null||e.memoizedState===null?Eg:wg,e=s(a,c),co){d=0;do{if(co=!1,ho=0,25<=d)throw Error(r(301));d+=1,ht=lt=null,n.updateQueue=null,jl.current=Tg,e=s(a,c)}while(co)}if(jl.current=zl,n=lt!==null&&lt.next!==null,ui=0,ht=lt=qe=null,Ul=!1,n)throw Error(r(300));return e}function Pu(){var e=ho!==0;return ho=0,e}function Un(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?qe.memoizedState=ht=e:ht=ht.next=e,ht}function un(){if(lt===null){var e=qe.alternate;e=e!==null?e.memoizedState:null}else e=lt.next;var n=ht===null?qe.memoizedState:ht.next;if(n!==null)ht=n,lt=e;else{if(e===null)throw Error(r(310));lt=e,e={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ht===null?qe.memoizedState=ht=e:ht=ht.next=e}return ht}function fo(e,n){return typeof n=="function"?n(e):n}function ku(e){var n=un(),s=n.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=e;var a=lt,c=a.baseQueue,d=s.pending;if(d!==null){if(c!==null){var y=c.next;c.next=d.next,d.next=y}a.baseQueue=c=d,s.pending=null}if(c!==null){d=c.next,a=a.baseState;var w=y=null,A=null,F=d;do{var H=F.lane;if((ui&H)===H)A!==null&&(A=A.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),a=F.hasEagerState?F.eagerState:e(a,F.action);else{var G={lane:H,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};A===null?(w=A=G,y=a):A=A.next=G,qe.lanes|=H,ci|=H}F=F.next}while(F!==null&&F!==d);A===null?y=a:A.next=w,wn(a,n.memoizedState)||(zt=!0),n.memoizedState=a,n.baseState=y,n.baseQueue=A,s.lastRenderedState=a}if(e=s.interleaved,e!==null){c=e;do d=c.lane,qe.lanes|=d,ci|=d,c=c.next;while(c!==e)}else c===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function Nu(e){var n=un(),s=n.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=e;var a=s.dispatch,c=s.pending,d=n.memoizedState;if(c!==null){s.pending=null;var y=c=c.next;do d=e(d,y.action),y=y.next;while(y!==c);wn(d,n.memoizedState)||(zt=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),s.lastRenderedState=d}return[d,a]}function Zh(){}function ef(e,n){var s=qe,a=un(),c=n(),d=!wn(a.memoizedState,c);if(d&&(a.memoizedState=c,zt=!0),a=a.queue,Ou(rf.bind(null,s,a,e),[e]),a.getSnapshot!==n||d||ht!==null&&ht.memoizedState.tag&1){if(s.flags|=2048,po(9,nf.bind(null,s,a,c,n),void 0,null),ft===null)throw Error(r(349));(ui&30)!==0||tf(s,n,c)}return c}function tf(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=qe.updateQueue,n===null?(n={lastEffect:null,stores:null},qe.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function nf(e,n,s,a){n.value=s,n.getSnapshot=a,sf(n)&&of(e)}function rf(e,n,s){return s(function(){sf(n)&&of(e)})}function sf(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!wn(e,s)}catch{return!0}}function of(e){var n=rr(e,1);n!==null&&Cn(n,e,1,-1)}function lf(e){var n=Un();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:e},n.queue=e,e=e.dispatch=_g.bind(null,qe,e),[n.memoizedState,e]}function po(e,n,s,a){return e={tag:e,create:n,destroy:s,deps:a,next:null},n=qe.updateQueue,n===null?(n={lastEffect:null,stores:null},qe.updateQueue=n,n.lastEffect=e.next=e):(s=n.lastEffect,s===null?n.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,n.lastEffect=e)),e}function af(){return un().memoizedState}function bl(e,n,s,a){var c=Un();qe.flags|=e,c.memoizedState=po(1|n,s,void 0,a===void 0?null:a)}function Bl(e,n,s,a){var c=un();a=a===void 0?null:a;var d=void 0;if(lt!==null){var y=lt.memoizedState;if(d=y.destroy,a!==null&&Ru(a,y.deps)){c.memoizedState=po(n,s,d,a);return}}qe.flags|=e,c.memoizedState=po(1|n,s,d,a)}function uf(e,n){return bl(8390656,8,e,n)}function Ou(e,n){return Bl(2048,8,e,n)}function cf(e,n){return Bl(4,2,e,n)}function hf(e,n){return Bl(4,4,e,n)}function ff(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function df(e,n,s){return s=s!=null?s.concat([e]):null,Bl(4,4,ff.bind(null,n,e),s)}function Du(){}function pf(e,n){var s=un();n=n===void 0?null:n;var a=s.memoizedState;return a!==null&&n!==null&&Ru(n,a[1])?a[0]:(s.memoizedState=[e,n],e)}function mf(e,n){var s=un();n=n===void 0?null:n;var a=s.memoizedState;return a!==null&&n!==null&&Ru(n,a[1])?a[0]:(e=e(),s.memoizedState=[e,n],e)}function gf(e,n,s){return(ui&21)===0?(e.baseState&&(e.baseState=!1,zt=!0),e.memoizedState=s):(wn(s,n)||(s=Jr(),qe.lanes|=s,ci|=s,e.baseState=!0),n)}function yg(e,n){var s=Se;Se=s!==0&&4>s?s:4,e(!0);var a=Cu.transition;Cu.transition={};try{e(!1),n()}finally{Se=s,Cu.transition=a}}function yf(){return un().memoizedState}function vg(e,n,s){var a=Nr(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},vf(e))_f(n,s);else if(s=Wh(e,n,s,a),s!==null){var c=Ft();Cn(s,e,a,c),Ef(s,n,a)}}function _g(e,n,s){var a=Nr(e),c={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(vf(e))_f(n,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var y=n.lastRenderedState,w=d(y,s);if(c.hasEagerState=!0,c.eagerState=w,wn(w,y)){var A=n.interleaved;A===null?(c.next=c,Eu(n)):(c.next=A.next,A.next=c),n.interleaved=c;return}}catch{}finally{}s=Wh(e,n,c,a),s!==null&&(c=Ft(),Cn(s,e,a,c),Ef(s,n,a))}}function vf(e){var n=e.alternate;return e===qe||n!==null&&n===qe}function _f(e,n){co=Ul=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function Ef(e,n,s){if((s&4194240)!==0){var a=n.lanes;a&=e.pendingLanes,s|=a,n.lanes=s,gr(e,s)}}var zl={readContext:an,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},Eg={readContext:an,useCallback:function(e,n){return Un().memoizedState=[e,n===void 0?null:n],e},useContext:an,useEffect:uf,useImperativeHandle:function(e,n,s){return s=s!=null?s.concat([e]):null,bl(4194308,4,ff.bind(null,n,e),s)},useLayoutEffect:function(e,n){return bl(4194308,4,e,n)},useInsertionEffect:function(e,n){return bl(4,2,e,n)},useMemo:function(e,n){var s=Un();return n=n===void 0?null:n,e=e(),s.memoizedState=[e,n],e},useReducer:function(e,n,s){var a=Un();return n=s!==void 0?s(n):n,a.memoizedState=a.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},a.queue=e,e=e.dispatch=vg.bind(null,qe,e),[a.memoizedState,e]},useRef:function(e){var n=Un();return e={current:e},n.memoizedState=e},useState:lf,useDebugValue:Du,useDeferredValue:function(e){return Un().memoizedState=e},useTransition:function(){var e=lf(!1),n=e[0];return e=yg.bind(null,e[1]),Un().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,s){var a=qe,c=Un();if(Ge){if(s===void 0)throw Error(r(407));s=s()}else{if(s=n(),ft===null)throw Error(r(349));(ui&30)!==0||tf(a,n,s)}c.memoizedState=s;var d={value:s,getSnapshot:n};return c.queue=d,uf(rf.bind(null,a,d,e),[e]),a.flags|=2048,po(9,nf.bind(null,a,d,s,n),void 0,null),s},useId:function(){var e=Un(),n=ft.identifierPrefix;if(Ge){var s=nr,a=tr;s=(a&~(1<<32-Vt(a)-1)).toString(32)+s,n=":"+n+"R"+s,s=ho++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=gg++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},wg={readContext:an,useCallback:pf,useContext:an,useEffect:Ou,useImperativeHandle:df,useInsertionEffect:cf,useLayoutEffect:hf,useMemo:mf,useReducer:ku,useRef:af,useState:function(){return ku(fo)},useDebugValue:Du,useDeferredValue:function(e){var n=un();return gf(n,lt.memoizedState,e)},useTransition:function(){var e=ku(fo)[0],n=un().memoizedState;return[e,n]},useMutableSource:Zh,useSyncExternalStore:ef,useId:yf,unstable_isNewReconciler:!1},Tg={readContext:an,useCallback:pf,useContext:an,useEffect:Ou,useImperativeHandle:df,useInsertionEffect:cf,useLayoutEffect:hf,useMemo:mf,useReducer:Nu,useRef:af,useState:function(){return Nu(fo)},useDebugValue:Du,useDeferredValue:function(e){var n=un();return lt===null?n.memoizedState=e:gf(n,lt.memoizedState,e)},useTransition:function(){var e=Nu(fo)[0],n=un().memoizedState;return[e,n]},useMutableSource:Zh,useSyncExternalStore:ef,useId:yf,unstable_isNewReconciler:!1};function Sn(e,n){if(e&&e.defaultProps){n=te({},n),e=e.defaultProps;for(var s in e)n[s]===void 0&&(n[s]=e[s]);return n}return n}function Vu(e,n,s,a){n=e.memoizedState,s=s(a,n),s=s==null?n:te({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var $l={isMounted:function(e){return(e=e._reactInternals)?pn(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var a=Ft(),c=Nr(e),d=ir(a,c);d.payload=n,s!=null&&(d.callback=s),n=Rr(e,d,c),n!==null&&(Cn(n,e,c,a),Ml(n,e,c))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var a=Ft(),c=Nr(e),d=ir(a,c);d.tag=1,d.payload=n,s!=null&&(d.callback=s),n=Rr(e,d,c),n!==null&&(Cn(n,e,c,a),Ml(n,e,c))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=Ft(),a=Nr(e),c=ir(s,a);c.tag=2,n!=null&&(c.callback=n),n=Rr(e,c,a),n!==null&&(Cn(n,e,a,s),Ml(n,e,a))}};function wf(e,n,s,a,c,d,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,d,y):n.prototype&&n.prototype.isPureReactComponent?!Zs(s,a)||!Zs(c,d):!0}function Tf(e,n,s){var a=!1,c=Ir,d=n.contextType;return typeof d=="object"&&d!==null?d=an(d):(c=Bt(n)?ii:Ct.current,a=n.contextTypes,d=(a=a!=null)?ns(e,c):Ir),n=new n(s,d),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=$l,e.stateNode=n,n._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),n}function Sf(e,n,s,a){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,a),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,a),n.state!==e&&$l.enqueueReplaceState(n,n.state,null)}function Mu(e,n,s,a){var c=e.stateNode;c.props=s,c.state=e.memoizedState,c.refs={},wu(e);var d=n.contextType;typeof d=="object"&&d!==null?c.context=an(d):(d=Bt(n)?ii:Ct.current,c.context=ns(e,d)),c.state=e.memoizedState,d=n.getDerivedStateFromProps,typeof d=="function"&&(Vu(e,n,d,s),c.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(n=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),n!==c.state&&$l.enqueueReplaceState(c,c.state,null),Ll(e,s,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function cs(e,n){try{var s="",a=n;do s+=we(a),a=a.return;while(a);var c=s}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:n,stack:c,digest:null}}function Lu(e,n,s){return{value:e,source:null,stack:s??null,digest:n??null}}function Fu(e,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var Sg=typeof WeakMap=="function"?WeakMap:Map;function If(e,n,s){s=ir(-1,s),s.tag=3,s.payload={element:null};var a=n.value;return s.callback=function(){Yl||(Yl=!0,Ju=a),Fu(e,n)},s}function Af(e,n,s){s=ir(-1,s),s.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=n.value;s.payload=function(){return a(c)},s.callback=function(){Fu(e,n)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(s.callback=function(){Fu(e,n),typeof a!="function"&&(Pr===null?Pr=new Set([this]):Pr.add(this));var y=n.stack;this.componentDidCatch(n.value,{componentStack:y!==null?y:""})}),s}function Cf(e,n,s){var a=e.pingCache;if(a===null){a=e.pingCache=new Sg;var c=new Set;a.set(n,c)}else c=a.get(n),c===void 0&&(c=new Set,a.set(n,c));c.has(s)||(c.add(s),e=Fg.bind(null,e,n,s),n.then(e,e))}function Rf(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function xf(e,n,s,a,c){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=ir(-1,1),n.tag=2,Rr(s,n,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=c,e)}var Ig=le.ReactCurrentOwner,zt=!1;function Lt(e,n,s,a){n.child=e===null?qh(n,null,s,a):os(n,e.child,s,a)}function Pf(e,n,s,a,c){s=s.render;var d=n.ref;return as(n,c),a=xu(e,n,s,a,d,c),s=Pu(),e!==null&&!zt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~c,sr(e,n,c)):(Ge&&s&&hu(n),n.flags|=1,Lt(e,n,a,c),n.child)}function kf(e,n,s,a,c){if(e===null){var d=s.type;return typeof d=="function"&&!sc(d)&&d.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=d,Nf(e,n,d,a,c)):(e=na(s.type,null,a,n,n.mode,c),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,(e.lanes&c)===0){var y=d.memoizedProps;if(s=s.compare,s=s!==null?s:Zs,s(y,a)&&e.ref===n.ref)return sr(e,n,c)}return n.flags|=1,e=Dr(d,a),e.ref=n.ref,e.return=n,n.child=e}function Nf(e,n,s,a,c){if(e!==null){var d=e.memoizedProps;if(Zs(d,a)&&e.ref===n.ref)if(zt=!1,n.pendingProps=a=d,(e.lanes&c)!==0)(e.flags&131072)!==0&&(zt=!0);else return n.lanes=e.lanes,sr(e,n,c)}return ju(e,n,s,a,c)}function Of(e,n,s){var a=n.pendingProps,c=a.children,d=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(fs,en),en|=s;else{if((s&1073741824)===0)return e=d!==null?d.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,be(fs,en),en|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=d!==null?d.baseLanes:s,be(fs,en),en|=a}else d!==null?(a=d.baseLanes|s,n.memoizedState=null):a=s,be(fs,en),en|=a;return Lt(e,n,c,s),n.child}function Df(e,n){var s=n.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function ju(e,n,s,a,c){var d=Bt(s)?ii:Ct.current;return d=ns(n,d),as(n,c),s=xu(e,n,s,a,d,c),a=Pu(),e!==null&&!zt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~c,sr(e,n,c)):(Ge&&a&&hu(n),n.flags|=1,Lt(e,n,s,c),n.child)}function Vf(e,n,s,a,c){if(Bt(s)){var d=!0;Rl(n)}else d=!1;if(as(n,c),n.stateNode===null)Gl(e,n),Tf(n,s,a),Mu(n,s,a,c),a=!0;else if(e===null){var y=n.stateNode,w=n.memoizedProps;y.props=w;var A=y.context,F=s.contextType;typeof F=="object"&&F!==null?F=an(F):(F=Bt(s)?ii:Ct.current,F=ns(n,F));var H=s.getDerivedStateFromProps,G=typeof H=="function"||typeof y.getSnapshotBeforeUpdate=="function";G||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==a||A!==F)&&Sf(n,y,a,F),Cr=!1;var $=n.memoizedState;y.state=$,Ll(n,a,y,c),A=n.memoizedState,w!==a||$!==A||bt.current||Cr?(typeof H=="function"&&(Vu(n,s,H,a),A=n.memoizedState),(w=Cr||wf(n,s,w,a,$,A,F))?(G||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(n.flags|=4194308)):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=a,n.memoizedState=A),y.props=a,y.state=A,y.context=F,a=w):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),a=!1)}else{y=n.stateNode,Qh(e,n),w=n.memoizedProps,F=n.type===n.elementType?w:Sn(n.type,w),y.props=F,G=n.pendingProps,$=y.context,A=s.contextType,typeof A=="object"&&A!==null?A=an(A):(A=Bt(s)?ii:Ct.current,A=ns(n,A));var ee=s.getDerivedStateFromProps;(H=typeof ee=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==G||$!==A)&&Sf(n,y,a,A),Cr=!1,$=n.memoizedState,y.state=$,Ll(n,a,y,c);var re=n.memoizedState;w!==G||$!==re||bt.current||Cr?(typeof ee=="function"&&(Vu(n,s,ee,a),re=n.memoizedState),(F=Cr||wf(n,s,F,a,$,re,A)||!1)?(H||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(a,re,A),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(a,re,A)),typeof y.componentDidUpdate=="function"&&(n.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof y.componentDidUpdate!="function"||w===e.memoizedProps&&$===e.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&$===e.memoizedState||(n.flags|=1024),n.memoizedProps=a,n.memoizedState=re),y.props=a,y.state=re,y.context=A,a=F):(typeof y.componentDidUpdate!="function"||w===e.memoizedProps&&$===e.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&$===e.memoizedState||(n.flags|=1024),a=!1)}return Uu(e,n,s,a,d,c)}function Uu(e,n,s,a,c,d){Df(e,n);var y=(n.flags&128)!==0;if(!a&&!y)return c&&jh(n,s,!1),sr(e,n,d);a=n.stateNode,Ig.current=n;var w=y&&typeof s.getDerivedStateFromError!="function"?null:a.render();return n.flags|=1,e!==null&&y?(n.child=os(n,e.child,null,d),n.child=os(n,null,w,d)):Lt(e,n,w,d),n.memoizedState=a.state,c&&jh(n,s,!0),n.child}function Mf(e){var n=e.stateNode;n.pendingContext?Lh(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Lh(e,n.context,!1),Tu(e,n.containerInfo)}function Lf(e,n,s,a,c){return ss(),mu(c),n.flags|=256,Lt(e,n,s,a),n.child}var bu={dehydrated:null,treeContext:null,retryLane:0};function Bu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ff(e,n,s){var a=n.pendingProps,c=Ke.current,d=!1,y=(n.flags&128)!==0,w;if((w=y)||(w=e!==null&&e.memoizedState===null?!1:(c&2)!==0),w?(d=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),be(Ke,c&1),e===null)return pu(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(y=a.children,e=a.fallback,d?(a=n.mode,d=n.child,y={mode:"hidden",children:y},(a&1)===0&&d!==null?(d.childLanes=0,d.pendingProps=y):d=ra(y,a,0,null),e=pi(e,a,s,null),d.return=n,e.return=n,d.sibling=e,n.child=d,n.child.memoizedState=Bu(s),n.memoizedState=bu,e):zu(n,y));if(c=e.memoizedState,c!==null&&(w=c.dehydrated,w!==null))return Ag(e,n,y,a,w,c,s);if(d){d=a.fallback,y=n.mode,c=e.child,w=c.sibling;var A={mode:"hidden",children:a.children};return(y&1)===0&&n.child!==c?(a=n.child,a.childLanes=0,a.pendingProps=A,n.deletions=null):(a=Dr(c,A),a.subtreeFlags=c.subtreeFlags&14680064),w!==null?d=Dr(w,d):(d=pi(d,y,s,null),d.flags|=2),d.return=n,a.return=n,a.sibling=d,n.child=a,a=d,d=n.child,y=e.child.memoizedState,y=y===null?Bu(s):{baseLanes:y.baseLanes|s,cachePool:null,transitions:y.transitions},d.memoizedState=y,d.childLanes=e.childLanes&~s,n.memoizedState=bu,a}return d=e.child,e=d.sibling,a=Dr(d,{mode:"visible",children:a.children}),(n.mode&1)===0&&(a.lanes=s),a.return=n,a.sibling=null,e!==null&&(s=n.deletions,s===null?(n.deletions=[e],n.flags|=16):s.push(e)),n.child=a,n.memoizedState=null,a}function zu(e,n){return n=ra({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Hl(e,n,s,a){return a!==null&&mu(a),os(n,e.child,null,s),e=zu(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Ag(e,n,s,a,c,d,y){if(s)return n.flags&256?(n.flags&=-257,a=Lu(Error(r(422))),Hl(e,n,y,a)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(d=a.fallback,c=n.mode,a=ra({mode:"visible",children:a.children},c,0,null),d=pi(d,c,y,null),d.flags|=2,a.return=n,d.return=n,a.sibling=d,n.child=a,(n.mode&1)!==0&&os(n,e.child,null,y),n.child.memoizedState=Bu(y),n.memoizedState=bu,d);if((n.mode&1)===0)return Hl(e,n,y,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var w=a.dgst;return a=w,d=Error(r(419)),a=Lu(d,a,void 0),Hl(e,n,y,a)}if(w=(y&e.childLanes)!==0,zt||w){if(a=ft,a!==null){switch(y&-y){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=(c&(a.suspendedLanes|y))!==0?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,rr(e,c),Cn(a,e,c,-1))}return ic(),a=Lu(Error(r(421))),Hl(e,n,y,a)}return c.data==="$?"?(n.flags|=128,n.child=e.child,n=jg.bind(null,e),c._reactRetry=n,null):(e=d.treeContext,Zt=Tr(c.nextSibling),Jt=n,Ge=!0,Tn=null,e!==null&&(on[ln++]=tr,on[ln++]=nr,on[ln++]=si,tr=e.id,nr=e.overflow,si=n),n=zu(n,a.children),n.flags|=4096,n)}function jf(e,n,s){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n),_u(e.return,n,s)}function $u(e,n,s,a,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:c}:(d.isBackwards=n,d.rendering=null,d.renderingStartTime=0,d.last=a,d.tail=s,d.tailMode=c)}function Uf(e,n,s){var a=n.pendingProps,c=a.revealOrder,d=a.tail;if(Lt(e,n,a.children,s),a=Ke.current,(a&2)!==0)a=a&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jf(e,s,n);else if(e.tag===19)jf(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(be(Ke,a),(n.mode&1)===0)n.memoizedState=null;else switch(c){case"forwards":for(s=n.child,c=null;s!==null;)e=s.alternate,e!==null&&Fl(e)===null&&(c=s),s=s.sibling;s=c,s===null?(c=n.child,n.child=null):(c=s.sibling,s.sibling=null),$u(n,!1,c,s,d);break;case"backwards":for(s=null,c=n.child,n.child=null;c!==null;){if(e=c.alternate,e!==null&&Fl(e)===null){n.child=c;break}e=c.sibling,c.sibling=s,s=c,c=e}$u(n,!0,s,null,d);break;case"together":$u(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Gl(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function sr(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),ci|=n.lanes,(s&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,s=Dr(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=Dr(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function Cg(e,n,s){switch(n.tag){case 3:Mf(n),ss();break;case 5:Jh(n);break;case 1:Bt(n.type)&&Rl(n);break;case 4:Tu(n,n.stateNode.containerInfo);break;case 10:var a=n.type._context,c=n.memoizedProps.value;be(Dl,a._currentValue),a._currentValue=c;break;case 13:if(a=n.memoizedState,a!==null)return a.dehydrated!==null?(be(Ke,Ke.current&1),n.flags|=128,null):(s&n.child.childLanes)!==0?Ff(e,n,s):(be(Ke,Ke.current&1),e=sr(e,n,s),e!==null?e.sibling:null);be(Ke,Ke.current&1);break;case 19:if(a=(s&n.childLanes)!==0,(e.flags&128)!==0){if(a)return Uf(e,n,s);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),be(Ke,Ke.current),a)break;return null;case 22:case 23:return n.lanes=0,Of(e,n,s)}return sr(e,n,s)}var bf,Hu,Bf,zf;bf=function(e,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Hu=function(){},Bf=function(e,n,s,a){var c=e.memoizedProps;if(c!==a){e=n.stateNode,ai(jn.current);var d=null;switch(s){case"input":c=Br(e,c),a=Br(e,a),d=[];break;case"select":c=te({},c,{value:void 0}),a=te({},a,{value:void 0}),d=[];break;case"textarea":c=xs(e,c),a=xs(e,a),d=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Il)}Vs(s,a);var y;s=null;for(F in c)if(!a.hasOwnProperty(F)&&c.hasOwnProperty(F)&&c[F]!=null)if(F==="style"){var w=c[F];for(y in w)w.hasOwnProperty(y)&&(s||(s={}),s[y]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(u.hasOwnProperty(F)?d||(d=[]):(d=d||[]).push(F,null));for(F in a){var A=a[F];if(w=c?.[F],a.hasOwnProperty(F)&&A!==w&&(A!=null||w!=null))if(F==="style")if(w){for(y in w)!w.hasOwnProperty(y)||A&&A.hasOwnProperty(y)||(s||(s={}),s[y]="");for(y in A)A.hasOwnProperty(y)&&w[y]!==A[y]&&(s||(s={}),s[y]=A[y])}else s||(d||(d=[]),d.push(F,s)),s=A;else F==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,w=w?w.__html:void 0,A!=null&&w!==A&&(d=d||[]).push(F,A)):F==="children"?typeof A!="string"&&typeof A!="number"||(d=d||[]).push(F,""+A):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(u.hasOwnProperty(F)?(A!=null&&F==="onScroll"&&ze("scroll",e),d||w===A||(d=[])):(d=d||[]).push(F,A))}s&&(d=d||[]).push("style",s);var F=d;(n.updateQueue=F)&&(n.flags|=4)}},zf=function(e,n,s,a){s!==a&&(n.flags|=4)};function mo(e,n){if(!Ge)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function xt(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(n)for(var c=e.child;c!==null;)s|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)s|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=s,n}function Rg(e,n,s){var a=n.pendingProps;switch(fu(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(n),null;case 1:return Bt(n.type)&&Cl(),xt(n),null;case 3:return a=n.stateNode,us(),$e(bt),$e(Ct),Au(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Nl(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Tn!==null&&(tc(Tn),Tn=null))),Hu(e,n),xt(n),null;case 5:Su(n);var c=ai(uo.current);if(s=n.type,e!==null&&n.stateNode!=null)Bf(e,n,s,a,c),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!a){if(n.stateNode===null)throw Error(r(166));return xt(n),null}if(e=ai(jn.current),Nl(n)){a=n.stateNode,s=n.type;var d=n.memoizedProps;switch(a[Fn]=n,a[io]=d,e=(n.mode&1)!==0,s){case"dialog":ze("cancel",a),ze("close",a);break;case"iframe":case"object":case"embed":ze("load",a);break;case"video":case"audio":for(c=0;c<to.length;c++)ze(to[c],a);break;case"source":ze("error",a);break;case"img":case"image":case"link":ze("error",a),ze("load",a);break;case"details":ze("toggle",a);break;case"input":Ii(a,d),ze("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!d.multiple},ze("invalid",a);break;case"textarea":Ci(a,d),ze("invalid",a)}Vs(s,d),c=null;for(var y in d)if(d.hasOwnProperty(y)){var w=d[y];y==="children"?typeof w=="string"?a.textContent!==w&&(d.suppressHydrationWarning!==!0&&Sl(a.textContent,w,e),c=["children",w]):typeof w=="number"&&a.textContent!==""+w&&(d.suppressHydrationWarning!==!0&&Sl(a.textContent,w,e),c=["children",""+w]):u.hasOwnProperty(y)&&w!=null&&y==="onScroll"&&ze("scroll",a)}switch(s){case"input":$n(a),Qo(a,d,!0);break;case"textarea":$n(a),Ps(a);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(a.onclick=Il)}a=c,n.updateQueue=a,a!==null&&(n.flags|=4)}else{y=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=it(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=y.createElement(s,{is:a.is}):(e=y.createElement(s),s==="select"&&(y=e,a.multiple?y.multiple=!0:a.size&&(y.size=a.size))):e=y.createElementNS(e,s),e[Fn]=n,e[io]=a,bf(e,n,!1,!1),n.stateNode=e;e:{switch(y=Ms(s,a),s){case"dialog":ze("cancel",e),ze("close",e),c=a;break;case"iframe":case"object":case"embed":ze("load",e),c=a;break;case"video":case"audio":for(c=0;c<to.length;c++)ze(to[c],e);c=a;break;case"source":ze("error",e),c=a;break;case"img":case"image":case"link":ze("error",e),ze("load",e),c=a;break;case"details":ze("toggle",e),c=a;break;case"input":Ii(e,a),c=Br(e,a),ze("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=te({},a,{value:void 0}),ze("invalid",e);break;case"textarea":Ci(e,a),c=xs(e,a),ze("invalid",e);break;default:c=a}Vs(s,c),w=c;for(d in w)if(w.hasOwnProperty(d)){var A=w[d];d==="style"?Os(e,A):d==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&ks(e,A)):d==="children"?typeof A=="string"?(s!=="textarea"||A!=="")&&hr(e,A):typeof A=="number"&&hr(e,""+A):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(u.hasOwnProperty(d)?A!=null&&d==="onScroll"&&ze("scroll",e):A!=null&&se(e,d,A,y))}switch(s){case"input":$n(e),Qo(e,a,!1);break;case"textarea":$n(e),Ps(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Oe(a.value));break;case"select":e.multiple=!!a.multiple,d=a.value,d!=null?Gn(e,!!a.multiple,d,!1):a.defaultValue!=null&&Gn(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Il)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return xt(n),null;case 6:if(e&&n.stateNode!=null)zf(e,n,e.memoizedProps,a);else{if(typeof a!="string"&&n.stateNode===null)throw Error(r(166));if(s=ai(uo.current),ai(jn.current),Nl(n)){if(a=n.stateNode,s=n.memoizedProps,a[Fn]=n,(d=a.nodeValue!==s)&&(e=Jt,e!==null))switch(e.tag){case 3:Sl(a.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Sl(a.nodeValue,s,(e.mode&1)!==0)}d&&(n.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Fn]=n,n.stateNode=a}return xt(n),null;case 13:if($e(Ke),a=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ge&&Zt!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Hh(),ss(),n.flags|=98560,d=!1;else if(d=Nl(n),a!==null&&a.dehydrated!==null){if(e===null){if(!d)throw Error(r(318));if(d=n.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Fn]=n}else ss(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;xt(n),d=!1}else Tn!==null&&(tc(Tn),Tn=null),d=!0;if(!d)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=s,n):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(Ke.current&1)!==0?at===0&&(at=3):ic())),n.updateQueue!==null&&(n.flags|=4),xt(n),null);case 4:return us(),Hu(e,n),e===null&&no(n.stateNode.containerInfo),xt(n),null;case 10:return vu(n.type._context),xt(n),null;case 17:return Bt(n.type)&&Cl(),xt(n),null;case 19:if($e(Ke),d=n.memoizedState,d===null)return xt(n),null;if(a=(n.flags&128)!==0,y=d.rendering,y===null)if(a)mo(d,!1);else{if(at!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(y=Fl(e),y!==null){for(n.flags|=128,mo(d,!1),a=y.updateQueue,a!==null&&(n.updateQueue=a,n.flags|=4),n.subtreeFlags=0,a=s,s=n.child;s!==null;)d=s,e=a,d.flags&=14680066,y=d.alternate,y===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=y.childLanes,d.lanes=y.lanes,d.child=y.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=y.memoizedProps,d.memoizedState=y.memoizedState,d.updateQueue=y.updateQueue,d.type=y.type,e=y.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return be(Ke,Ke.current&1|2),n.child}e=e.sibling}d.tail!==null&&Ue()>ds&&(n.flags|=128,a=!0,mo(d,!1),n.lanes=4194304)}else{if(!a)if(e=Fl(y),e!==null){if(n.flags|=128,a=!0,s=e.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),mo(d,!0),d.tail===null&&d.tailMode==="hidden"&&!y.alternate&&!Ge)return xt(n),null}else 2*Ue()-d.renderingStartTime>ds&&s!==1073741824&&(n.flags|=128,a=!0,mo(d,!1),n.lanes=4194304);d.isBackwards?(y.sibling=n.child,n.child=y):(s=d.last,s!==null?s.sibling=y:n.child=y,d.last=y)}return d.tail!==null?(n=d.tail,d.rendering=n,d.tail=n.sibling,d.renderingStartTime=Ue(),n.sibling=null,s=Ke.current,be(Ke,a?s&1|2:s&1),n):(xt(n),null);case 22:case 23:return rc(),a=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(n.flags|=8192),a&&(n.mode&1)!==0?(en&1073741824)!==0&&(xt(n),n.subtreeFlags&6&&(n.flags|=8192)):xt(n),null;case 24:return null;case 25:return null}throw Error(r(156,n.tag))}function xg(e,n){switch(fu(n),n.tag){case 1:return Bt(n.type)&&Cl(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return us(),$e(bt),$e(Ct),Au(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return Su(n),null;case 13:if($e(Ke),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));ss()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return $e(Ke),null;case 4:return us(),null;case 10:return vu(n.type._context),null;case 22:case 23:return rc(),null;case 24:return null;default:return null}}var Kl=!1,Pt=!1,Pg=typeof WeakSet=="function"?WeakSet:Set,ne=null;function hs(e,n){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){Qe(e,n,a)}else s.current=null}function Gu(e,n,s){try{s()}catch(a){Qe(e,n,a)}}var $f=!1;function kg(e,n){if(ru=_r,e=Eh(),Qa(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var c=a.anchorOffset,d=a.focusNode;a=a.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break e}var y=0,w=-1,A=-1,F=0,H=0,G=e,$=null;t:for(;;){for(var ee;G!==s||c!==0&&G.nodeType!==3||(w=y+c),G!==d||a!==0&&G.nodeType!==3||(A=y+a),G.nodeType===3&&(y+=G.nodeValue.length),(ee=G.firstChild)!==null;)$=G,G=ee;for(;;){if(G===e)break t;if($===s&&++F===c&&(w=y),$===d&&++H===a&&(A=y),(ee=G.nextSibling)!==null)break;G=$,$=G.parentNode}G=ee}s=w===-1||A===-1?null:{start:w,end:A}}else s=null}s=s||{start:0,end:0}}else s=null;for(iu={focusedElem:e,selectionRange:s},_r=!1,ne=n;ne!==null;)if(n=ne,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,ne=e;else for(;ne!==null;){n=ne;try{var re=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(re!==null){var ie=re.memoizedProps,Je=re.memoizedState,V=n.stateNode,x=V.getSnapshotBeforeUpdate(n.elementType===n.type?ie:Sn(n.type,ie),Je);V.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var L=n.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(W){Qe(n,n.return,W)}if(e=n.sibling,e!==null){e.return=n.return,ne=e;break}ne=n.return}return re=$f,$f=!1,re}function go(e,n,s){var a=n.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var d=c.destroy;c.destroy=void 0,d!==void 0&&Gu(n,s,d)}c=c.next}while(c!==a)}}function ql(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==n)}}function Ku(e){var n=e.ref;if(n!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof n=="function"?n(e):n.current=e}}function Hf(e){var n=e.alternate;n!==null&&(e.alternate=null,Hf(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Fn],delete n[io],delete n[au],delete n[fg],delete n[dg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Gf(e){return e.tag===5||e.tag===3||e.tag===4}function Kf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Gf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qu(e,n,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(e,n):s.insertBefore(e,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(e,s)):(n=s,n.appendChild(e)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Il));else if(a!==4&&(e=e.child,e!==null))for(qu(e,n,s),e=e.sibling;e!==null;)qu(e,n,s),e=e.sibling}function Wu(e,n,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Wu(e,n,s),e=e.sibling;e!==null;)Wu(e,n,s),e=e.sibling}var _t=null,In=!1;function xr(e,n,s){for(s=s.child;s!==null;)qf(e,n,s),s=s.sibling}function qf(e,n,s){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(Yr,s)}catch{}switch(s.tag){case 5:Pt||hs(s,n);case 6:var a=_t,c=In;_t=null,xr(e,n,s),_t=a,In=c,_t!==null&&(In?(e=_t,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):_t.removeChild(s.stateNode));break;case 18:_t!==null&&(In?(e=_t,s=s.stateNode,e.nodeType===8?lu(e.parentNode,s):e.nodeType===1&&lu(e,s),_n(e)):lu(_t,s.stateNode));break;case 4:a=_t,c=In,_t=s.stateNode.containerInfo,In=!0,xr(e,n,s),_t=a,In=c;break;case 0:case 11:case 14:case 15:if(!Pt&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var d=c,y=d.destroy;d=d.tag,y!==void 0&&((d&2)!==0||(d&4)!==0)&&Gu(s,n,y),c=c.next}while(c!==a)}xr(e,n,s);break;case 1:if(!Pt&&(hs(s,n),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(w){Qe(s,n,w)}xr(e,n,s);break;case 21:xr(e,n,s);break;case 22:s.mode&1?(Pt=(a=Pt)||s.memoizedState!==null,xr(e,n,s),Pt=a):xr(e,n,s);break;default:xr(e,n,s)}}function Wf(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Pg),n.forEach(function(a){var c=Ug.bind(null,e,a);s.has(a)||(s.add(a),a.then(c,c))})}}function An(e,n){var s=n.deletions;if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];try{var d=e,y=n,w=y;e:for(;w!==null;){switch(w.tag){case 5:_t=w.stateNode,In=!1;break e;case 3:_t=w.stateNode.containerInfo,In=!0;break e;case 4:_t=w.stateNode.containerInfo,In=!0;break e}w=w.return}if(_t===null)throw Error(r(160));qf(d,y,c),_t=null,In=!1;var A=c.alternate;A!==null&&(A.return=null),c.return=null}catch(F){Qe(c,n,F)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Qf(n,e),n=n.sibling}function Qf(e,n){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(An(n,e),bn(e),a&4){try{go(3,e,e.return),ql(3,e)}catch(ie){Qe(e,e.return,ie)}try{go(5,e,e.return)}catch(ie){Qe(e,e.return,ie)}}break;case 1:An(n,e),bn(e),a&512&&s!==null&&hs(s,s.return);break;case 5:if(An(n,e),bn(e),a&512&&s!==null&&hs(s,s.return),e.flags&32){var c=e.stateNode;try{hr(c,"")}catch(ie){Qe(e,e.return,ie)}}if(a&4&&(c=e.stateNode,c!=null)){var d=e.memoizedProps,y=s!==null?s.memoizedProps:d,w=e.type,A=e.updateQueue;if(e.updateQueue=null,A!==null)try{w==="input"&&d.type==="radio"&&d.name!=null&&Cs(c,d),Ms(w,y);var F=Ms(w,d);for(y=0;y<A.length;y+=2){var H=A[y],G=A[y+1];H==="style"?Os(c,G):H==="dangerouslySetInnerHTML"?ks(c,G):H==="children"?hr(c,G):se(c,H,G,F)}switch(w){case"input":Rs(c,d);break;case"textarea":Ri(c,d);break;case"select":var $=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var ee=d.value;ee!=null?Gn(c,!!d.multiple,ee,!1):$!==!!d.multiple&&(d.defaultValue!=null?Gn(c,!!d.multiple,d.defaultValue,!0):Gn(c,!!d.multiple,d.multiple?[]:"",!1))}c[io]=d}catch(ie){Qe(e,e.return,ie)}}break;case 6:if(An(n,e),bn(e),a&4){if(e.stateNode===null)throw Error(r(162));c=e.stateNode,d=e.memoizedProps;try{c.nodeValue=d}catch(ie){Qe(e,e.return,ie)}}break;case 3:if(An(n,e),bn(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{_n(n.containerInfo)}catch(ie){Qe(e,e.return,ie)}break;case 4:An(n,e),bn(e);break;case 13:An(n,e),bn(e),c=e.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(Xu=Ue())),a&4&&Wf(e);break;case 22:if(H=s!==null&&s.memoizedState!==null,e.mode&1?(Pt=(F=Pt)||H,An(n,e),Pt=F):An(n,e),bn(e),a&8192){if(F=e.memoizedState!==null,(e.stateNode.isHidden=F)&&!H&&(e.mode&1)!==0)for(ne=e,H=e.child;H!==null;){for(G=ne=H;ne!==null;){switch($=ne,ee=$.child,$.tag){case 0:case 11:case 14:case 15:go(4,$,$.return);break;case 1:hs($,$.return);var re=$.stateNode;if(typeof re.componentWillUnmount=="function"){a=$,s=$.return;try{n=a,re.props=n.memoizedProps,re.state=n.memoizedState,re.componentWillUnmount()}catch(ie){Qe(a,s,ie)}}break;case 5:hs($,$.return);break;case 22:if($.memoizedState!==null){Jf(G);continue}}ee!==null?(ee.return=$,ne=ee):Jf(G)}H=H.sibling}e:for(H=null,G=e;;){if(G.tag===5){if(H===null){H=G;try{c=G.stateNode,F?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(w=G.stateNode,A=G.memoizedProps.style,y=A!=null&&A.hasOwnProperty("display")?A.display:null,w.style.display=Ns("display",y))}catch(ie){Qe(e,e.return,ie)}}}else if(G.tag===6){if(H===null)try{G.stateNode.nodeValue=F?"":G.memoizedProps}catch(ie){Qe(e,e.return,ie)}}else if((G.tag!==22&&G.tag!==23||G.memoizedState===null||G===e)&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===e)break e;for(;G.sibling===null;){if(G.return===null||G.return===e)break e;H===G&&(H=null),G=G.return}H===G&&(H=null),G.sibling.return=G.return,G=G.sibling}}break;case 19:An(n,e),bn(e),a&4&&Wf(e);break;case 21:break;default:An(n,e),bn(e)}}function bn(e){var n=e.flags;if(n&2){try{e:{for(var s=e.return;s!==null;){if(Gf(s)){var a=s;break e}s=s.return}throw Error(r(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(hr(c,""),a.flags&=-33);var d=Kf(e);Wu(e,d,c);break;case 3:case 4:var y=a.stateNode.containerInfo,w=Kf(e);qu(e,w,y);break;default:throw Error(r(161))}}catch(A){Qe(e,e.return,A)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Ng(e,n,s){ne=e,Yf(e)}function Yf(e,n,s){for(var a=(e.mode&1)!==0;ne!==null;){var c=ne,d=c.child;if(c.tag===22&&a){var y=c.memoizedState!==null||Kl;if(!y){var w=c.alternate,A=w!==null&&w.memoizedState!==null||Pt;w=Kl;var F=Pt;if(Kl=y,(Pt=A)&&!F)for(ne=c;ne!==null;)y=ne,A=y.child,y.tag===22&&y.memoizedState!==null?Zf(c):A!==null?(A.return=y,ne=A):Zf(c);for(;d!==null;)ne=d,Yf(d),d=d.sibling;ne=c,Kl=w,Pt=F}Xf(e)}else(c.subtreeFlags&8772)!==0&&d!==null?(d.return=c,ne=d):Xf(e)}}function Xf(e){for(;ne!==null;){var n=ne;if((n.flags&8772)!==0){var s=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:Pt||ql(5,n);break;case 1:var a=n.stateNode;if(n.flags&4&&!Pt)if(s===null)a.componentDidMount();else{var c=n.elementType===n.type?s.memoizedProps:Sn(n.type,s.memoizedProps);a.componentDidUpdate(c,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var d=n.updateQueue;d!==null&&Xh(n,d,a);break;case 3:var y=n.updateQueue;if(y!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}Xh(n,y,s)}break;case 5:var w=n.stateNode;if(s===null&&n.flags&4){s=w;var A=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&s.focus();break;case"img":A.src&&(s.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var F=n.alternate;if(F!==null){var H=F.memoizedState;if(H!==null){var G=H.dehydrated;G!==null&&_n(G)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Pt||n.flags&512&&Ku(n)}catch($){Qe(n,n.return,$)}}if(n===e){ne=null;break}if(s=n.sibling,s!==null){s.return=n.return,ne=s;break}ne=n.return}}function Jf(e){for(;ne!==null;){var n=ne;if(n===e){ne=null;break}var s=n.sibling;if(s!==null){s.return=n.return,ne=s;break}ne=n.return}}function Zf(e){for(;ne!==null;){var n=ne;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{ql(4,n)}catch(A){Qe(n,s,A)}break;case 1:var a=n.stateNode;if(typeof a.componentDidMount=="function"){var c=n.return;try{a.componentDidMount()}catch(A){Qe(n,c,A)}}var d=n.return;try{Ku(n)}catch(A){Qe(n,d,A)}break;case 5:var y=n.return;try{Ku(n)}catch(A){Qe(n,y,A)}}}catch(A){Qe(n,n.return,A)}if(n===e){ne=null;break}var w=n.sibling;if(w!==null){w.return=n.return,ne=w;break}ne=n.return}}var Og=Math.ceil,Wl=le.ReactCurrentDispatcher,Qu=le.ReactCurrentOwner,cn=le.ReactCurrentBatchConfig,xe=0,ft=null,tt=null,Et=0,en=0,fs=Sr(0),at=0,yo=null,ci=0,Ql=0,Yu=0,vo=null,$t=null,Xu=0,ds=1/0,or=null,Yl=!1,Ju=null,Pr=null,Xl=!1,kr=null,Jl=0,_o=0,Zu=null,Zl=-1,ea=0;function Ft(){return(xe&6)!==0?Ue():Zl!==-1?Zl:Zl=Ue()}function Nr(e){return(e.mode&1)===0?1:(xe&2)!==0&&Et!==0?Et&-Et:mg.transition!==null?(ea===0&&(ea=Jr()),ea):(e=Se,e!==0||(e=window.event,e=e===void 0?16:Ks(e.type)),e)}function Cn(e,n,s,a){if(50<_o)throw _o=0,Zu=null,Error(r(185));mr(e,s,a),((xe&2)===0||e!==ft)&&(e===ft&&((xe&2)===0&&(Ql|=s),at===4&&Or(e,Et)),Ht(e,a),s===1&&xe===0&&(n.mode&1)===0&&(ds=Ue()+500,xl&&Ar()))}function Ht(e,n){var s=e.callbackNode;Wn(e,n);var a=Xr(e,e===ft?Et:0);if(a===0)s!==null&&Bs(s),e.callbackNode=null,e.callbackPriority=0;else if(n=a&-a,e.callbackPriority!==n){if(s!=null&&Bs(s),n===1)e.tag===0?pg(td.bind(null,e)):Uh(td.bind(null,e)),cg(function(){(xe&6)===0&&Ar()}),s=null;else{switch(yr(a)){case 1:s=Qr;break;case 4:s=fr;break;case 16:s=nn;break;case 536870912:s=el;break;default:s=nn}s=ud(s,ed.bind(null,e))}e.callbackPriority=n,e.callbackNode=s}}function ed(e,n){if(Zl=-1,ea=0,(xe&6)!==0)throw Error(r(327));var s=e.callbackNode;if(ps()&&e.callbackNode!==s)return null;var a=Xr(e,e===ft?Et:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||n)n=ta(e,a);else{n=a;var c=xe;xe|=2;var d=rd();(ft!==e||Et!==n)&&(or=null,ds=Ue()+500,fi(e,n));do try{Mg();break}catch(w){nd(e,w)}while(!0);yu(),Wl.current=d,xe=c,tt!==null?n=0:(ft=null,Et=0,n=at)}if(n!==0){if(n===2&&(c=Qt(e),c!==0&&(a=c,n=ec(e,c))),n===1)throw s=yo,fi(e,0),Or(e,a),Ht(e,Ue()),s;if(n===6)Or(e,a);else{if(c=e.current.alternate,(a&30)===0&&!Dg(c)&&(n=ta(e,a),n===2&&(d=Qt(e),d!==0&&(a=d,n=ec(e,d))),n===1))throw s=yo,fi(e,0),Or(e,a),Ht(e,Ue()),s;switch(e.finishedWork=c,e.finishedLanes=a,n){case 0:case 1:throw Error(r(345));case 2:di(e,$t,or);break;case 3:if(Or(e,a),(a&130023424)===a&&(n=Xu+500-Ue(),10<n)){if(Xr(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){Ft(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=ou(di.bind(null,e,$t,or),n);break}di(e,$t,or);break;case 4:if(Or(e,a),(a&4194240)===a)break;for(n=e.eventTimes,c=-1;0<a;){var y=31-Vt(a);d=1<<y,y=n[y],y>c&&(c=y),a&=~d}if(a=c,a=Ue()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Og(a/1960))-a,10<a){e.timeoutHandle=ou(di.bind(null,e,$t,or),a);break}di(e,$t,or);break;case 5:di(e,$t,or);break;default:throw Error(r(329))}}}return Ht(e,Ue()),e.callbackNode===s?ed.bind(null,e):null}function ec(e,n){var s=vo;return e.current.memoizedState.isDehydrated&&(fi(e,n).flags|=256),e=ta(e,n),e!==2&&(n=$t,$t=s,n!==null&&tc(n)),e}function tc(e){$t===null?$t=e:$t.push.apply($t,e)}function Dg(e){for(var n=e;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var c=s[a],d=c.getSnapshot;c=c.value;try{if(!wn(d(),c))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Or(e,n){for(n&=~Yu,n&=~Ql,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var s=31-Vt(n),a=1<<s;e[s]=-1,n&=~a}}function td(e){if((xe&6)!==0)throw Error(r(327));ps();var n=Xr(e,0);if((n&1)===0)return Ht(e,Ue()),null;var s=ta(e,n);if(e.tag!==0&&s===2){var a=Qt(e);a!==0&&(n=a,s=ec(e,a))}if(s===1)throw s=yo,fi(e,0),Or(e,n),Ht(e,Ue()),s;if(s===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,di(e,$t,or),Ht(e,Ue()),null}function nc(e,n){var s=xe;xe|=1;try{return e(n)}finally{xe=s,xe===0&&(ds=Ue()+500,xl&&Ar())}}function hi(e){kr!==null&&kr.tag===0&&(xe&6)===0&&ps();var n=xe;xe|=1;var s=cn.transition,a=Se;try{if(cn.transition=null,Se=1,e)return e()}finally{Se=a,cn.transition=s,xe=n,(xe&6)===0&&Ar()}}function rc(){en=fs.current,$e(fs)}function fi(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,ug(s)),tt!==null)for(s=tt.return;s!==null;){var a=s;switch(fu(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Cl();break;case 3:us(),$e(bt),$e(Ct),Au();break;case 5:Su(a);break;case 4:us();break;case 13:$e(Ke);break;case 19:$e(Ke);break;case 10:vu(a.type._context);break;case 22:case 23:rc()}s=s.return}if(ft=e,tt=e=Dr(e.current,null),Et=en=n,at=0,yo=null,Yu=Ql=ci=0,$t=vo=null,li!==null){for(n=0;n<li.length;n++)if(s=li[n],a=s.interleaved,a!==null){s.interleaved=null;var c=a.next,d=s.pending;if(d!==null){var y=d.next;d.next=c,a.next=y}s.pending=a}li=null}return e}function nd(e,n){do{var s=tt;try{if(yu(),jl.current=zl,Ul){for(var a=qe.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Ul=!1}if(ui=0,ht=lt=qe=null,co=!1,ho=0,Qu.current=null,s===null||s.return===null){at=1,yo=n,tt=null;break}e:{var d=e,y=s.return,w=s,A=n;if(n=Et,w.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var F=A,H=w,G=H.tag;if((H.mode&1)===0&&(G===0||G===11||G===15)){var $=H.alternate;$?(H.updateQueue=$.updateQueue,H.memoizedState=$.memoizedState,H.lanes=$.lanes):(H.updateQueue=null,H.memoizedState=null)}var ee=Rf(y);if(ee!==null){ee.flags&=-257,xf(ee,y,w,d,n),ee.mode&1&&Cf(d,F,n),n=ee,A=F;var re=n.updateQueue;if(re===null){var ie=new Set;ie.add(A),n.updateQueue=ie}else re.add(A);break e}else{if((n&1)===0){Cf(d,F,n),ic();break e}A=Error(r(426))}}else if(Ge&&w.mode&1){var Je=Rf(y);if(Je!==null){(Je.flags&65536)===0&&(Je.flags|=256),xf(Je,y,w,d,n),mu(cs(A,w));break e}}d=A=cs(A,w),at!==4&&(at=2),vo===null?vo=[d]:vo.push(d),d=y;do{switch(d.tag){case 3:d.flags|=65536,n&=-n,d.lanes|=n;var V=If(d,A,n);Yh(d,V);break e;case 1:w=A;var x=d.type,L=d.stateNode;if((d.flags&128)===0&&(typeof x.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(Pr===null||!Pr.has(L)))){d.flags|=65536,n&=-n,d.lanes|=n;var W=Af(d,w,n);Yh(d,W);break e}}d=d.return}while(d!==null)}sd(s)}catch(oe){n=oe,tt===s&&s!==null&&(tt=s=s.return);continue}break}while(!0)}function rd(){var e=Wl.current;return Wl.current=zl,e===null?zl:e}function ic(){(at===0||at===3||at===2)&&(at=4),ft===null||(ci&268435455)===0&&(Ql&268435455)===0||Or(ft,Et)}function ta(e,n){var s=xe;xe|=2;var a=rd();(ft!==e||Et!==n)&&(or=null,fi(e,n));do try{Vg();break}catch(c){nd(e,c)}while(!0);if(yu(),xe=s,Wl.current=a,tt!==null)throw Error(r(261));return ft=null,Et=0,at}function Vg(){for(;tt!==null;)id(tt)}function Mg(){for(;tt!==null&&!Jo();)id(tt)}function id(e){var n=ad(e.alternate,e,en);e.memoizedProps=e.pendingProps,n===null?sd(e):tt=n,Qu.current=null}function sd(e){var n=e;do{var s=n.alternate;if(e=n.return,(n.flags&32768)===0){if(s=Rg(s,n,en),s!==null){tt=s;return}}else{if(s=xg(s,n),s!==null){s.flags&=32767,tt=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{at=6,tt=null;return}}if(n=n.sibling,n!==null){tt=n;return}tt=n=e}while(n!==null);at===0&&(at=5)}function di(e,n,s){var a=Se,c=cn.transition;try{cn.transition=null,Se=1,Lg(e,n,s,a)}finally{cn.transition=c,Se=a}return null}function Lg(e,n,s,a){do ps();while(kr!==null);if((xe&6)!==0)throw Error(r(327));s=e.finishedWork;var c=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var d=s.lanes|s.childLanes;if(Le(e,d),e===ft&&(tt=ft=null,Et=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Xl||(Xl=!0,ud(nn,function(){return ps(),null})),d=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||d){d=cn.transition,cn.transition=null;var y=Se;Se=1;var w=xe;xe|=4,Qu.current=null,kg(e,s),Qf(s,e),ng(iu),_r=!!ru,iu=ru=null,e.current=s,Ng(s),Ba(),xe=w,Se=y,cn.transition=d}else e.current=s;if(Xl&&(Xl=!1,kr=e,Jl=c),d=e.pendingLanes,d===0&&(Pr=null),tl(s.stateNode),Ht(e,Ue()),n!==null)for(a=e.onRecoverableError,s=0;s<n.length;s++)c=n[s],a(c.value,{componentStack:c.stack,digest:c.digest});if(Yl)throw Yl=!1,e=Ju,Ju=null,e;return(Jl&1)!==0&&e.tag!==0&&ps(),d=e.pendingLanes,(d&1)!==0?e===Zu?_o++:(_o=0,Zu=e):_o=0,Ar(),null}function ps(){if(kr!==null){var e=yr(Jl),n=cn.transition,s=Se;try{if(cn.transition=null,Se=16>e?16:e,kr===null)var a=!1;else{if(e=kr,kr=null,Jl=0,(xe&6)!==0)throw Error(r(331));var c=xe;for(xe|=4,ne=e.current;ne!==null;){var d=ne,y=d.child;if((ne.flags&16)!==0){var w=d.deletions;if(w!==null){for(var A=0;A<w.length;A++){var F=w[A];for(ne=F;ne!==null;){var H=ne;switch(H.tag){case 0:case 11:case 15:go(8,H,d)}var G=H.child;if(G!==null)G.return=H,ne=G;else for(;ne!==null;){H=ne;var $=H.sibling,ee=H.return;if(Hf(H),H===F){ne=null;break}if($!==null){$.return=ee,ne=$;break}ne=ee}}}var re=d.alternate;if(re!==null){var ie=re.child;if(ie!==null){re.child=null;do{var Je=ie.sibling;ie.sibling=null,ie=Je}while(ie!==null)}}ne=d}}if((d.subtreeFlags&2064)!==0&&y!==null)y.return=d,ne=y;else e:for(;ne!==null;){if(d=ne,(d.flags&2048)!==0)switch(d.tag){case 0:case 11:case 15:go(9,d,d.return)}var V=d.sibling;if(V!==null){V.return=d.return,ne=V;break e}ne=d.return}}var x=e.current;for(ne=x;ne!==null;){y=ne;var L=y.child;if((y.subtreeFlags&2064)!==0&&L!==null)L.return=y,ne=L;else e:for(y=x;ne!==null;){if(w=ne,(w.flags&2048)!==0)try{switch(w.tag){case 0:case 11:case 15:ql(9,w)}}catch(oe){Qe(w,w.return,oe)}if(w===y){ne=null;break e}var W=w.sibling;if(W!==null){W.return=w.return,ne=W;break e}ne=w.return}}if(xe=c,Ar(),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(Yr,e)}catch{}a=!0}return a}finally{Se=s,cn.transition=n}}return!1}function od(e,n,s){n=cs(s,n),n=If(e,n,1),e=Rr(e,n,1),n=Ft(),e!==null&&(mr(e,1,n),Ht(e,n))}function Qe(e,n,s){if(e.tag===3)od(e,e,s);else for(;n!==null;){if(n.tag===3){od(n,e,s);break}else if(n.tag===1){var a=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Pr===null||!Pr.has(a))){e=cs(s,e),e=Af(n,e,1),n=Rr(n,e,1),e=Ft(),n!==null&&(mr(n,1,e),Ht(n,e));break}}n=n.return}}function Fg(e,n,s){var a=e.pingCache;a!==null&&a.delete(n),n=Ft(),e.pingedLanes|=e.suspendedLanes&s,ft===e&&(Et&s)===s&&(at===4||at===3&&(Et&130023424)===Et&&500>Ue()-Xu?fi(e,0):Yu|=s),Ht(e,n)}function ld(e,n){n===0&&((e.mode&1)===0?n=1:(n=Fi,Fi<<=1,(Fi&130023424)===0&&(Fi=4194304)));var s=Ft();e=rr(e,n),e!==null&&(mr(e,n,s),Ht(e,s))}function jg(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),ld(e,s)}function Ug(e,n){var s=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(s=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(r(314))}a!==null&&a.delete(n),ld(e,s)}var ad;ad=function(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps||bt.current)zt=!0;else{if((e.lanes&s)===0&&(n.flags&128)===0)return zt=!1,Cg(e,n,s);zt=(e.flags&131072)!==0}else zt=!1,Ge&&(n.flags&1048576)!==0&&bh(n,kl,n.index);switch(n.lanes=0,n.tag){case 2:var a=n.type;Gl(e,n),e=n.pendingProps;var c=ns(n,Ct.current);as(n,s),c=xu(null,n,a,e,c,s);var d=Pu();return n.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Bt(a)?(d=!0,Rl(n)):d=!1,n.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,wu(n),c.updater=$l,n.stateNode=c,c._reactInternals=n,Mu(n,a,e,s),n=Uu(null,n,a,!0,d,s)):(n.tag=0,Ge&&d&&hu(n),Lt(null,n,c,s),n=n.child),n;case 16:a=n.elementType;e:{switch(Gl(e,n),e=n.pendingProps,c=a._init,a=c(a._payload),n.type=a,c=n.tag=Bg(a),e=Sn(a,e),c){case 0:n=ju(null,n,a,e,s);break e;case 1:n=Vf(null,n,a,e,s);break e;case 11:n=Pf(null,n,a,e,s);break e;case 14:n=kf(null,n,a,Sn(a.type,e),s);break e}throw Error(r(306,a,""))}return n;case 0:return a=n.type,c=n.pendingProps,c=n.elementType===a?c:Sn(a,c),ju(e,n,a,c,s);case 1:return a=n.type,c=n.pendingProps,c=n.elementType===a?c:Sn(a,c),Vf(e,n,a,c,s);case 3:e:{if(Mf(n),e===null)throw Error(r(387));a=n.pendingProps,d=n.memoizedState,c=d.element,Qh(e,n),Ll(n,a,null,s);var y=n.memoizedState;if(a=y.element,d.isDehydrated)if(d={element:a,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){c=cs(Error(r(423)),n),n=Lf(e,n,a,s,c);break e}else if(a!==c){c=cs(Error(r(424)),n),n=Lf(e,n,a,s,c);break e}else for(Zt=Tr(n.stateNode.containerInfo.firstChild),Jt=n,Ge=!0,Tn=null,s=qh(n,null,a,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(ss(),a===c){n=sr(e,n,s);break e}Lt(e,n,a,s)}n=n.child}return n;case 5:return Jh(n),e===null&&pu(n),a=n.type,c=n.pendingProps,d=e!==null?e.memoizedProps:null,y=c.children,su(a,c)?y=null:d!==null&&su(a,d)&&(n.flags|=32),Df(e,n),Lt(e,n,y,s),n.child;case 6:return e===null&&pu(n),null;case 13:return Ff(e,n,s);case 4:return Tu(n,n.stateNode.containerInfo),a=n.pendingProps,e===null?n.child=os(n,null,a,s):Lt(e,n,a,s),n.child;case 11:return a=n.type,c=n.pendingProps,c=n.elementType===a?c:Sn(a,c),Pf(e,n,a,c,s);case 7:return Lt(e,n,n.pendingProps,s),n.child;case 8:return Lt(e,n,n.pendingProps.children,s),n.child;case 12:return Lt(e,n,n.pendingProps.children,s),n.child;case 10:e:{if(a=n.type._context,c=n.pendingProps,d=n.memoizedProps,y=c.value,be(Dl,a._currentValue),a._currentValue=y,d!==null)if(wn(d.value,y)){if(d.children===c.children&&!bt.current){n=sr(e,n,s);break e}}else for(d=n.child,d!==null&&(d.return=n);d!==null;){var w=d.dependencies;if(w!==null){y=d.child;for(var A=w.firstContext;A!==null;){if(A.context===a){if(d.tag===1){A=ir(-1,s&-s),A.tag=2;var F=d.updateQueue;if(F!==null){F=F.shared;var H=F.pending;H===null?A.next=A:(A.next=H.next,H.next=A),F.pending=A}}d.lanes|=s,A=d.alternate,A!==null&&(A.lanes|=s),_u(d.return,s,n),w.lanes|=s;break}A=A.next}}else if(d.tag===10)y=d.type===n.type?null:d.child;else if(d.tag===18){if(y=d.return,y===null)throw Error(r(341));y.lanes|=s,w=y.alternate,w!==null&&(w.lanes|=s),_u(y,s,n),y=d.sibling}else y=d.child;if(y!==null)y.return=d;else for(y=d;y!==null;){if(y===n){y=null;break}if(d=y.sibling,d!==null){d.return=y.return,y=d;break}y=y.return}d=y}Lt(e,n,c.children,s),n=n.child}return n;case 9:return c=n.type,a=n.pendingProps.children,as(n,s),c=an(c),a=a(c),n.flags|=1,Lt(e,n,a,s),n.child;case 14:return a=n.type,c=Sn(a,n.pendingProps),c=Sn(a.type,c),kf(e,n,a,c,s);case 15:return Nf(e,n,n.type,n.pendingProps,s);case 17:return a=n.type,c=n.pendingProps,c=n.elementType===a?c:Sn(a,c),Gl(e,n),n.tag=1,Bt(a)?(e=!0,Rl(n)):e=!1,as(n,s),Tf(n,a,c),Mu(n,a,c,s),Uu(null,n,a,!0,e,s);case 19:return Uf(e,n,s);case 22:return Of(e,n,s)}throw Error(r(156,n.tag))};function ud(e,n){return Mi(e,n)}function bg(e,n,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(e,n,s,a){return new bg(e,n,s,a)}function sc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Bg(e){if(typeof e=="function")return sc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===N)return 11;if(e===It)return 14}return 2}function Dr(e,n){var s=e.alternate;return s===null?(s=hn(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function na(e,n,s,a,c,d){var y=2;if(a=e,typeof e=="function")sc(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case R:return pi(s.children,c,d,n);case E:y=8,c|=8;break;case S:return e=hn(12,s,n,c|2),e.elementType=S,e.lanes=d,e;case I:return e=hn(13,s,n,c),e.elementType=I,e.lanes=d,e;case Ye:return e=hn(19,s,n,c),e.elementType=Ye,e.lanes=d,e;case Me:return ra(s,c,d,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case C:y=10;break e;case k:y=9;break e;case N:y=11;break e;case It:y=14;break e;case At:y=16,a=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return n=hn(y,s,n,c),n.elementType=e,n.type=a,n.lanes=d,n}function pi(e,n,s,a){return e=hn(7,e,a,n),e.lanes=s,e}function ra(e,n,s,a){return e=hn(22,e,a,n),e.elementType=Me,e.lanes=s,e.stateNode={isHidden:!1},e}function oc(e,n,s){return e=hn(6,e,null,n),e.lanes=s,e}function lc(e,n,s){return n=hn(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function zg(e,n,s,a,c){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pr(0),this.expirationTimes=pr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pr(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function ac(e,n,s,a,c,d,y,w,A){return e=new zg(e,n,s,w,A),n===1?(n=1,d===!0&&(n|=8)):n=0,d=hn(3,null,null,n),e.current=d,d.stateNode=e,d.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},wu(d),e}function $g(e,n,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ce,key:a==null?null:""+a,children:e,containerInfo:n,implementation:s}}function cd(e){if(!e)return Ir;e=e._reactInternals;e:{if(pn(e)!==e||e.tag!==1)throw Error(r(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Bt(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(r(171))}if(e.tag===1){var s=e.type;if(Bt(s))return Fh(e,s,n)}return n}function hd(e,n,s,a,c,d,y,w,A){return e=ac(s,a,!0,e,c,d,y,w,A),e.context=cd(null),s=e.current,a=Ft(),c=Nr(s),d=ir(a,c),d.callback=n??null,Rr(s,d,c),e.current.lanes=c,mr(e,c,a),Ht(e,a),e}function ia(e,n,s,a){var c=n.current,d=Ft(),y=Nr(c);return s=cd(s),n.context===null?n.context=s:n.pendingContext=s,n=ir(d,y),n.payload={element:e},a=a===void 0?null:a,a!==null&&(n.callback=a),e=Rr(c,n,y),e!==null&&(Cn(e,c,y,d),Ml(e,c,y)),y}function sa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function fd(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function uc(e,n){fd(e,n),(e=e.alternate)&&fd(e,n)}function Hg(){return null}var dd=typeof reportError=="function"?reportError:function(e){console.error(e)};function cc(e){this._internalRoot=e}oa.prototype.render=cc.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));ia(e,n,null,null)},oa.prototype.unmount=cc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;hi(function(){ia(null,e,null,null)}),n[Zn]=null}};function oa(e){this._internalRoot=e}oa.prototype.unstable_scheduleHydration=function(e){if(e){var n=ol();e={blockedOn:null,target:e,priority:n};for(var s=0;s<Dn.length&&n!==0&&n<Dn[s].priority;s++);Dn.splice(s,0,e),s===0&&ul(e)}};function hc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function la(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pd(){}function Gg(e,n,s,a,c){if(c){if(typeof a=="function"){var d=a;a=function(){var F=sa(y);d.call(F)}}var y=hd(n,a,e,0,null,!1,!1,"",pd);return e._reactRootContainer=y,e[Zn]=y.current,no(e.nodeType===8?e.parentNode:e),hi(),y}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var w=a;a=function(){var F=sa(A);w.call(F)}}var A=ac(e,0,!1,null,null,!1,!1,"",pd);return e._reactRootContainer=A,e[Zn]=A.current,no(e.nodeType===8?e.parentNode:e),hi(function(){ia(n,A,s,a)}),A}function aa(e,n,s,a,c){var d=s._reactRootContainer;if(d){var y=d;if(typeof c=="function"){var w=c;c=function(){var A=sa(y);w.call(A)}}ia(n,y,e,c)}else y=Gg(s,n,e,c,a);return sa(y)}il=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var s=dr(n.pendingLanes);s!==0&&(gr(n,s|1),Ht(n,Ue()),(xe&6)===0&&(ds=Ue()+500,Ar()))}break;case 13:hi(function(){var a=rr(e,1);if(a!==null){var c=Ft();Cn(a,e,1,c)}}),uc(e,1)}},ji=function(e){if(e.tag===13){var n=rr(e,134217728);if(n!==null){var s=Ft();Cn(n,e,134217728,s)}uc(e,134217728)}},sl=function(e){if(e.tag===13){var n=Nr(e),s=rr(e,n);if(s!==null){var a=Ft();Cn(s,e,n,a)}uc(e,n)}},ol=function(){return Se},ll=function(e,n){var s=Se;try{return Se=e,n()}finally{Se=s}},Pi=function(e,n,s){switch(n){case"input":if(Rs(e,s),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var a=s[n];if(a!==e&&a.form===e.form){var c=Al(a);if(!c)throw Error(r(90));Si(a),Rs(a,c)}}}break;case"textarea":Ri(e,s);break;case"select":n=s.value,n!=null&&Gn(e,!!s.multiple,n,!1)}},Gr=nc,Fs=hi;var Kg={usingClientEntryPoint:!1,Events:[so,es,Al,Nn,Ls,nc]},Eo={findFiberByHostInstance:ri,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qg={bundleType:Eo.bundleType,version:Eo.version,rendererPackageName:Eo.rendererPackageName,rendererConfig:Eo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:le.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=bs(e),e===null?null:e.stateNode},findFiberByHostInstance:Eo.findFiberByHostInstance||Hg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ua=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ua.isDisabled&&ua.supportsFiber)try{Yr=ua.inject(qg),Wt=ua}catch{}}return Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kg,Gt.createPortal=function(e,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hc(n))throw Error(r(200));return $g(e,n,null,s)},Gt.createRoot=function(e,n){if(!hc(e))throw Error(r(299));var s=!1,a="",c=dd;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),n=ac(e,1,!1,null,null,s,!1,a,c),e[Zn]=n.current,no(e.nodeType===8?e.parentNode:e),new cc(n)},Gt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=bs(n),e=e===null?null:e.stateNode,e},Gt.flushSync=function(e){return hi(e)},Gt.hydrate=function(e,n,s){if(!la(n))throw Error(r(200));return aa(null,e,n,!0,s)},Gt.hydrateRoot=function(e,n,s){if(!hc(e))throw Error(r(405));var a=s!=null&&s.hydratedSources||null,c=!1,d="",y=dd;if(s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(y=s.onRecoverableError)),n=hd(n,null,e,1,s??null,c,!1,d,y),e[Zn]=n.current,no(e),a)for(e=0;e<a.length;e++)s=a[e],c=s._getVersion,c=c(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,c]:n.mutableSourceEagerHydrationData.push(s,c);return new oa(n)},Gt.render=function(e,n,s){if(!la(n))throw Error(r(200));return aa(null,e,n,!1,s)},Gt.unmountComponentAtNode=function(e){if(!la(e))throw Error(r(40));return e._reactRootContainer?(hi(function(){aa(null,null,e,!1,function(){e._reactRootContainer=null,e[Zn]=null})}),!0):!1},Gt.unstable_batchedUpdates=nc,Gt.unstable_renderSubtreeIntoContainer=function(e,n,s,a){if(!la(s))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return aa(e,n,s,!1,a)},Gt.version="18.3.1-next-f1338f8080-20240426",Gt}var Td;function ny(){if(Td)return pc.exports;Td=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),pc.exports=ty(),pc.exports}var Sd;function ry(){if(Sd)return ca;Sd=1;var i=ny();return ca.createRoot=i.createRoot,ca.hydrateRoot=i.hydrateRoot,ca}var iy=ry();const sy=xp(iy),oy="modulepreload",ly=function(i){return"/"+i},Id={},ay=function(t,r,o){let u=Promise.resolve();if(r&&r.length>0){let T=function(P){return Promise.all(P.map(M=>Promise.resolve(M).then(j=>({status:"fulfilled",value:j}),j=>({status:"rejected",reason:j}))))};var p=T;document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),v=g?.nonce||g?.getAttribute("nonce");u=T(r.map(P=>{if(P=ly(P),P in Id)return;Id[P]=!0;const M=P.endsWith(".css"),j=M?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${P}"]${j}`))return;const B=document.createElement("link");if(B.rel=M?"stylesheet":oy,M||(B.as="script"),B.crossOrigin="",B.href=P,v&&B.setAttribute("nonce",v),document.head.appendChild(B),M)return new Promise((q,J)=>{B.addEventListener("load",q),B.addEventListener("error",()=>J(new Error(`Unable to preload CSS for ${P}`)))})}))}function h(g){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=g,window.dispatchEvent(v),!v.defaultPrevented)throw g}return u.then(g=>{for(const v of g||[])v.status==="rejected"&&h(v.reason);return t().catch(h)})},uy=({onChoice:i})=>b.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:b.jsxs("div",{className:"p-8 bg-slate-800 rounded-lg shadow-lg w-full max-w-sm text-center",children:[b.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Learning Buddy"}),b.jsx("p",{className:"text-slate-400 mb-8",children:"Choose your login method"}),b.jsxs("div",{className:"space-y-4",children:[b.jsx("button",{onClick:()=>i("login"),className:"w-full px-4 py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-500 transition-colors",children:"Sign in with Email"}),b.jsx("button",{onClick:()=>i("demo"),className:"w-full px-4 py-3 bg-slate-600 text-white font-semibold rounded-lg hover:bg-slate-500 transition-colors",children:"Continue in Demo Mode"})]})]})}),cy=({onSuccess:i,onSwitchMode:t,onGoBack:r})=>b.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:b.jsxs("div",{className:"p-8 bg-slate-800 rounded-lg shadow-lg w-full max-w-sm",children:[b.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:"Login"}),b.jsx("p",{className:"text-slate-400 mb-4 text-center",children:"Use a test account to sign in."}),b.jsx("button",{onClick:()=>i({uid:"test-user-123",email:"test@example.com",displayName:"Test User"}),className:"w-full px-4 py-2 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-500 transition-colors",children:"Log in as Test User"}),b.jsx("button",{onClick:r,className:"w-full mt-4 text-sm text-slate-400 hover:text-white",children:"Back"})]})}),Pp=[{id:"math",name:"Mathematics",description:"Covers core concepts of O-Level Mathematics.",icon:"",color:"border-blue-500",topics:[{id:"algebra",name:"Algebra"},{id:"geometry",name:"Geometry"},{id:"trigonometry",name:"Trigonometry"},{id:"statistics",name:"Statistics"}]},{id:"english",name:"English",description:"Focuses on grammar, comprehension, and writing.",icon:"",color:"border-red-500",topics:[{id:"grammar",name:"Grammar"},{id:"comprehension",name:"Comprehension"},{id:"writing",name:"Essay Writing"}]}];var Ad;(function(i){i.STRING="string",i.NUMBER="number",i.INTEGER="integer",i.BOOLEAN="boolean",i.ARRAY="array",i.OBJECT="object"})(Ad||(Ad={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cd;(function(i){i.LANGUAGE_UNSPECIFIED="language_unspecified",i.PYTHON="python"})(Cd||(Cd={}));var Rd;(function(i){i.OUTCOME_UNSPECIFIED="outcome_unspecified",i.OUTCOME_OK="outcome_ok",i.OUTCOME_FAILED="outcome_failed",i.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Rd||(Rd={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=["user","model","function","system"];var Pd;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Pd||(Pd={}));var kd;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(kd||(kd={}));var Nd;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(Nd||(Nd={}));var Od;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER"})(Od||(Od={}));var Ao;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.OTHER="OTHER"})(Ao||(Ao={}));var Dd;(function(i){i.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",i.RETRIEVAL_QUERY="RETRIEVAL_QUERY",i.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",i.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",i.CLASSIFICATION="CLASSIFICATION",i.CLUSTERING="CLUSTERING"})(Dd||(Dd={}));var Vd;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(Vd||(Vd={}));var Md;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Md||(Md={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class ms extends Ot{constructor(t,r){super(t),this.response=r}}class kp extends Ot{constructor(t,r,o,u){super(t),this.status=r,this.statusText=o,this.errorDetails=u}}class Lr extends Ot{}class Np extends Ot{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy="https://generativelanguage.googleapis.com",fy="v1beta",dy="0.24.1",py="genai-js";var vi;(function(i){i.GENERATE_CONTENT="generateContent",i.STREAM_GENERATE_CONTENT="streamGenerateContent",i.COUNT_TOKENS="countTokens",i.EMBED_CONTENT="embedContent",i.BATCH_EMBED_CONTENTS="batchEmbedContents"})(vi||(vi={}));class my{constructor(t,r,o,u,h){this.model=t,this.task=r,this.apiKey=o,this.stream=u,this.requestOptions=h}toString(){var t,r;const o=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||fy;let h=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||hy}/${o}/${this.model}:${this.task}`;return this.stream&&(h+="?alt=sse"),h}}function gy(i){const t=[];return i?.apiClient&&t.push(i.apiClient),t.push(`${py}/${dy}`),t.join(" ")}async function yy(i){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",gy(i.requestOptions)),r.append("x-goog-api-key",i.apiKey);let o=(t=i.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(o){if(!(o instanceof Headers))try{o=new Headers(o)}catch(u){throw new Lr(`unable to convert customHeaders value ${JSON.stringify(o)} to Headers: ${u.message}`)}for(const[u,h]of o.entries()){if(u==="x-goog-api-key")throw new Lr(`Cannot set reserved header name ${u}`);if(u==="x-goog-api-client")throw new Lr(`Header name ${u} can only be set using the apiClient field`);r.append(u,h)}}return r}async function vy(i,t,r,o,u,h){const p=new my(i,t,r,o,h);return{url:p.toString(),fetchOptions:Object.assign(Object.assign({},Ty(h)),{method:"POST",headers:await yy(p),body:u})}}async function Ho(i,t,r,o,u,h={},p=fetch){const{url:g,fetchOptions:v}=await vy(i,t,r,o,u,h);return _y(g,v,p)}async function _y(i,t,r=fetch){let o;try{o=await r(i,t)}catch(u){Ey(u,i)}return o.ok||await wy(o,i),o}function Ey(i,t){let r=i;throw r.name==="AbortError"?(r=new Np(`Request aborted when fetching ${t.toString()}: ${i.message}`),r.stack=i.stack):i instanceof kp||i instanceof Lr||(r=new Ot(`Error fetching from ${t.toString()}: ${i.message}`),r.stack=i.stack),r}async function wy(i,t){let r="",o;try{const u=await i.json();r=u.error.message,u.error.details&&(r+=` ${JSON.stringify(u.error.details)}`,o=u.error.details)}catch{}throw new kp(`Error fetching from ${t.toString()}: [${i.status} ${i.statusText}] ${r}`,i.status,i.statusText,o)}function Ty(i){const t={};if(i?.signal!==void 0||i?.timeout>=0){const r=new AbortController;i?.timeout>=0&&setTimeout(()=>r.abort(),i.timeout),i?.signal&&i.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(i){return i.text=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),ga(i.candidates[0]))throw new ms(`${Mr(i)}`,i);return Sy(i)}else if(i.promptFeedback)throw new ms(`Text not available. ${Mr(i)}`,i);return""},i.functionCall=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),ga(i.candidates[0]))throw new ms(`${Mr(i)}`,i);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Ld(i)[0]}else if(i.promptFeedback)throw new ms(`Function call not available. ${Mr(i)}`,i)},i.functionCalls=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),ga(i.candidates[0]))throw new ms(`${Mr(i)}`,i);return Ld(i)}else if(i.promptFeedback)throw new ms(`Function call not available. ${Mr(i)}`,i)},i}function Sy(i){var t,r,o,u;const h=[];if(!((r=(t=i.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const p of(u=(o=i.candidates)===null||o===void 0?void 0:o[0].content)===null||u===void 0?void 0:u.parts)p.text&&h.push(p.text),p.executableCode&&h.push("\n```"+p.executableCode.language+`
`+p.executableCode.code+"\n```\n"),p.codeExecutionResult&&h.push("\n```\n"+p.codeExecutionResult.output+"\n```\n");return h.length>0?h.join(""):""}function Ld(i){var t,r,o,u;const h=[];if(!((r=(t=i.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const p of(u=(o=i.candidates)===null||o===void 0?void 0:o[0].content)===null||u===void 0?void 0:u.parts)p.functionCall&&h.push(p.functionCall);if(h.length>0)return h}const Iy=[Ao.RECITATION,Ao.SAFETY,Ao.LANGUAGE];function ga(i){return!!i.finishReason&&Iy.includes(i.finishReason)}function Mr(i){var t,r,o;let u="";if((!i.candidates||i.candidates.length===0)&&i.promptFeedback)u+="Response was blocked",!((t=i.promptFeedback)===null||t===void 0)&&t.blockReason&&(u+=` due to ${i.promptFeedback.blockReason}`),!((r=i.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(u+=`: ${i.promptFeedback.blockReasonMessage}`);else if(!((o=i.candidates)===null||o===void 0)&&o[0]){const h=i.candidates[0];ga(h)&&(u+=`Candidate was blocked due to ${h.finishReason}`,h.finishMessage&&(u+=`: ${h.finishMessage}`))}return u}function Oo(i){return this instanceof Oo?(this.v=i,this):new Oo(i)}function Ay(i,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=r.apply(i,t||[]),u,h=[];return u={},p("next"),p("throw"),p("return"),u[Symbol.asyncIterator]=function(){return this},u;function p(j){o[j]&&(u[j]=function(B){return new Promise(function(q,J){h.push([j,B,q,J])>1||g(j,B)})})}function g(j,B){try{v(o[j](B))}catch(q){M(h[0][3],q)}}function v(j){j.value instanceof Oo?Promise.resolve(j.value.v).then(T,P):M(h[0][2],j)}function T(j){g("next",j)}function P(j){g("throw",j)}function M(j,B){j(B),h.shift(),h.length&&g(h[0][0],h[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Cy(i){const t=i.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=Py(t),[o,u]=r.tee();return{stream:xy(o),response:Ry(u)}}async function Ry(i){const t=[],r=i.getReader();for(;;){const{done:o,value:u}=await r.read();if(o)return bc(ky(t));t.push(u)}}function xy(i){return Ay(this,arguments,function*(){const r=i.getReader();for(;;){const{value:o,done:u}=yield Oo(r.read());if(u)break;yield yield Oo(bc(o))}})}function Py(i){const t=i.getReader();return new ReadableStream({start(o){let u="";return h();function h(){return t.read().then(({value:p,done:g})=>{if(g){if(u.trim()){o.error(new Ot("Failed to parse stream"));return}o.close();return}u+=p;let v=u.match(Fd),T;for(;v;){try{T=JSON.parse(v[1])}catch{o.error(new Ot(`Error parsing JSON response: "${v[1]}"`));return}o.enqueue(T),u=u.substring(v[0].length),v=u.match(Fd)}return h()}).catch(p=>{let g=p;throw g.stack=p.stack,g.name==="AbortError"?g=new Np("Request aborted when reading from the stream"):g=new Ot("Error reading from the stream"),g})}}})}function ky(i){const t=i[i.length-1],r={promptFeedback:t?.promptFeedback};for(const o of i){if(o.candidates){let u=0;for(const h of o.candidates)if(r.candidates||(r.candidates=[]),r.candidates[u]||(r.candidates[u]={index:u}),r.candidates[u].citationMetadata=h.citationMetadata,r.candidates[u].groundingMetadata=h.groundingMetadata,r.candidates[u].finishReason=h.finishReason,r.candidates[u].finishMessage=h.finishMessage,r.candidates[u].safetyRatings=h.safetyRatings,h.content&&h.content.parts){r.candidates[u].content||(r.candidates[u].content={role:h.content.role||"user",parts:[]});const p={};for(const g of h.content.parts)g.text&&(p.text=g.text),g.functionCall&&(p.functionCall=g.functionCall),g.executableCode&&(p.executableCode=g.executableCode),g.codeExecutionResult&&(p.codeExecutionResult=g.codeExecutionResult),Object.keys(p).length===0&&(p.text=""),r.candidates[u].content.parts.push(p)}u++}o.usageMetadata&&(r.usageMetadata=o.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Op(i,t,r,o){const u=await Ho(t,vi.STREAM_GENERATE_CONTENT,i,!0,JSON.stringify(r),o);return Cy(u)}async function Dp(i,t,r,o){const h=await(await Ho(t,vi.GENERATE_CONTENT,i,!1,JSON.stringify(r),o)).json();return{response:bc(h)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(i){if(i!=null){if(typeof i=="string")return{role:"system",parts:[{text:i}]};if(i.text)return{role:"system",parts:[i]};if(i.parts)return i.role?i:{role:"system",parts:i.parts}}}function Do(i){let t=[];if(typeof i=="string")t=[{text:i}];else for(const r of i)typeof r=="string"?t.push({text:r}):t.push(r);return Ny(t)}function Ny(i){const t={role:"user",parts:[]},r={role:"function",parts:[]};let o=!1,u=!1;for(const h of i)"functionResponse"in h?(r.parts.push(h),u=!0):(t.parts.push(h),o=!0);if(o&&u)throw new Ot("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!o&&!u)throw new Ot("No content is provided for sending chat message.");return o?t:r}function Oy(i,t){var r;let o={model:t?.model,generationConfig:t?.generationConfig,safetySettings:t?.safetySettings,tools:t?.tools,toolConfig:t?.toolConfig,systemInstruction:t?.systemInstruction,cachedContent:(r=t?.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const u=i.generateContentRequest!=null;if(i.contents){if(u)throw new Lr("CountTokensRequest must have one of contents or generateContentRequest, not both.");o.contents=i.contents}else if(u)o=Object.assign(Object.assign({},o),i.generateContentRequest);else{const h=Do(i);o.contents=[h]}return{generateContentRequest:o}}function jd(i){let t;return i.contents?t=i:t={contents:[Do(i)]},i.systemInstruction&&(t.systemInstruction=Vp(i.systemInstruction)),t}function Dy(i){return typeof i=="string"||Array.isArray(i)?{content:Do(i)}:i}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Vy={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function My(i){let t=!1;for(const r of i){const{role:o,parts:u}=r;if(!t&&o!=="user")throw new Ot(`First content should be with role 'user', got ${o}`);if(!xd.includes(o))throw new Ot(`Each item should include role field. Got ${o} but valid roles are: ${JSON.stringify(xd)}`);if(!Array.isArray(u))throw new Ot("Content should have 'parts' property with an array of Parts");if(u.length===0)throw new Ot("Each Content should have at least one part");const h={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const g of u)for(const v of Ud)v in g&&(h[v]+=1);const p=Vy[o];for(const g of Ud)if(!p.includes(g)&&h[g]>0)throw new Ot(`Content with role '${o}' can't contain '${g}' part`);t=!0}}function bd(i){var t;if(i.candidates===void 0||i.candidates.length===0)return!1;const r=(t=i.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const o of r.parts)if(o===void 0||Object.keys(o).length===0||o.text!==void 0&&o.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="SILENT_ERROR";class Ly{constructor(t,r,o,u={}){this.model=r,this.params=o,this._requestOptions=u,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,o?.history&&(My(o.history),this._history=o.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var o,u,h,p,g,v;await this._sendPromise;const T=Do(t),P={safetySettings:(o=this.params)===null||o===void 0?void 0:o.safetySettings,generationConfig:(u=this.params)===null||u===void 0?void 0:u.generationConfig,tools:(h=this.params)===null||h===void 0?void 0:h.tools,toolConfig:(p=this.params)===null||p===void 0?void 0:p.toolConfig,systemInstruction:(g=this.params)===null||g===void 0?void 0:g.systemInstruction,cachedContent:(v=this.params)===null||v===void 0?void 0:v.cachedContent,contents:[...this._history,T]},M=Object.assign(Object.assign({},this._requestOptions),r);let j;return this._sendPromise=this._sendPromise.then(()=>Dp(this._apiKey,this.model,P,M)).then(B=>{var q;if(bd(B.response)){this._history.push(T);const J=Object.assign({parts:[],role:"model"},(q=B.response.candidates)===null||q===void 0?void 0:q[0].content);this._history.push(J)}else{const J=Mr(B.response);J&&console.warn(`sendMessage() was unsuccessful. ${J}. Inspect response object for details.`)}j=B}).catch(B=>{throw this._sendPromise=Promise.resolve(),B}),await this._sendPromise,j}async sendMessageStream(t,r={}){var o,u,h,p,g,v;await this._sendPromise;const T=Do(t),P={safetySettings:(o=this.params)===null||o===void 0?void 0:o.safetySettings,generationConfig:(u=this.params)===null||u===void 0?void 0:u.generationConfig,tools:(h=this.params)===null||h===void 0?void 0:h.tools,toolConfig:(p=this.params)===null||p===void 0?void 0:p.toolConfig,systemInstruction:(g=this.params)===null||g===void 0?void 0:g.systemInstruction,cachedContent:(v=this.params)===null||v===void 0?void 0:v.cachedContent,contents:[...this._history,T]},M=Object.assign(Object.assign({},this._requestOptions),r),j=Op(this._apiKey,this.model,P,M);return this._sendPromise=this._sendPromise.then(()=>j).catch(B=>{throw new Error(Bd)}).then(B=>B.response).then(B=>{if(bd(B)){this._history.push(T);const q=Object.assign({},B.candidates[0].content);q.role||(q.role="model"),this._history.push(q)}else{const q=Mr(B);q&&console.warn(`sendMessageStream() was unsuccessful. ${q}. Inspect response object for details.`)}}).catch(B=>{B.message!==Bd&&console.error(B)}),j}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fy(i,t,r,o){return(await Ho(t,vi.COUNT_TOKENS,i,!1,JSON.stringify(r),o)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jy(i,t,r,o){return(await Ho(t,vi.EMBED_CONTENT,i,!1,JSON.stringify(r),o)).json()}async function Uy(i,t,r,o){const u=r.requests.map(p=>Object.assign(Object.assign({},p),{model:t}));return(await Ho(t,vi.BATCH_EMBED_CONTENTS,i,!1,JSON.stringify({requests:u}),o)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(t,r,o={}){this.apiKey=t,this._requestOptions=o,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=Vp(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var o;const u=jd(t),h=Object.assign(Object.assign({},this._requestOptions),r);return Dp(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(o=this.cachedContent)===null||o===void 0?void 0:o.name},u),h)}async generateContentStream(t,r={}){var o;const u=jd(t),h=Object.assign(Object.assign({},this._requestOptions),r);return Op(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(o=this.cachedContent)===null||o===void 0?void 0:o.name},u),h)}startChat(t){var r;return new Ly(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const o=Oy(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),u=Object.assign(Object.assign({},this._requestOptions),r);return Fy(this.apiKey,this.model,o,u)}async embedContent(t,r={}){const o=Dy(t),u=Object.assign(Object.assign({},this._requestOptions),r);return jy(this.apiKey,this.model,o,u)}async batchEmbedContents(t,r={}){const o=Object.assign(Object.assign({},this._requestOptions),r);return Uy(this.apiKey,this.model,t,o)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new Ot("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new zd(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,o){if(!t.name)throw new Lr("Cached content must contain a `name` field.");if(!t.model)throw new Lr("Cached content must contain a `model` field.");const u=["model","systemInstruction"];for(const p of u)if(r?.[p]&&t[p]&&r?.[p]!==t[p]){if(p==="model"){const g=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,v=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(g===v)continue}throw new Lr(`Different value for "${p}" specified in modelParams (${r[p]}) and cachedContent (${t[p]})`)}const h=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new zd(this.apiKey,h,o)}}var By={};const Mp=new by(By.GEMINI_API_KEY||"your-api-key-here"),zy=async(i,t,r,o)=>{try{console.log("Generating quiz with Gemini API for:",{subjects:i,topics:t,level:r,year:o});const u=Mp.getGenerativeModel({model:"gemini-1.5-flash"}),h=`
    Generate a comprehensive evaluation quiz for a ${r} student preparing for their ${o} O-Level exams.
    
    Subjects: ${i.map(P=>P.name||P).join(", ")}
    Topics: ${Object.values(t).flat().map(P=>P.name||P).join(", ")}
    
    Please generate 5 questions that:
    1. Cover the specified subjects and topics
    2. Are appropriate for ${r} level
    3. Include multiple choice questions with 4 options each
    4. Vary in difficulty (Easy, Medium, Hard)
    5. Are relevant to O-Level preparation
    
    Return the response as a JSON array with this structure:
    [
      {
        "question": "Question text here",
        "questionType": "MCQ",
        "options": ["A", "B", "C", "D"],
        "subjectName": "Subject name",
        "topicName": "Topic name",
        "difficulty": "Easy/Medium/Hard",
        "correctAnswer": "A"
      }
    ]
    `,v=(await(await u.generateContent(h)).response).text(),T=JSON.parse(v);return console.log("Generated quiz with Gemini API:",T),T}catch(u){return console.error("Error generating quiz with Gemini API:",u),[{question:"What is 2 + 2?",questionType:"MCQ",options:["3","4","5","6"],subjectName:i[0]?.name||"Mathematics",topicName:t[i[0]?.id]?.[0]?.name||"Basic Arithmetic",difficulty:"Easy",correctAnswer:"4"}]}},$y=async(i,t,r)=>{try{console.log("Generating study plan with Gemini API:",{evaluation:i,subjects:t,topics:r});const o=Mp.getGenerativeModel({model:"gemini-1.5-flash"}),u=`
    Create a personalized study plan based on the following evaluation:
    
    Evaluation Results: ${JSON.stringify(i,null,2)}
    Subjects: ${t.map(T=>T.name||T).join(", ")}
    Topics: ${Object.values(r).flat().map(T=>T.name||T).join(", ")}
    
    Generate a 4-week study plan that:
    1. Addresses the identified weaknesses
    2. Builds on existing strengths
    3. Includes daily study activities
    4. Provides specific learning objectives
    5. Suggests practice exercises and resources
    
    Return the response as JSON with this structure:
    {
      "weeklySchedule": {
        "Week 1": {
          "Monday": ["Subject: Topic - Activity"],
          "Tuesday": ["Subject: Topic - Activity"]
        }
      },
      "milestones": ["Complete algebra basics", "Master geometry concepts"],
      "resources": ["Textbook chapters", "Online practice", "Video tutorials"],
      "goals": ["Improve geometry", "Strengthen algebra"]
    }
    `,g=(await(await o.generateContent(u)).response).text(),v=JSON.parse(g);return console.log("Generated study plan with Gemini API:",v),v}catch(o){return console.error("Error generating study plan with Gemini API:",o),{weeklySchedule:{"Week 1":{Monday:["Mathematics: Algebra - Practice linear equations"],Tuesday:["Mathematics: Geometry - Review basic shapes"]}},milestones:["Complete basic concepts","Practice problem-solving"],resources:["Textbook","Online exercises"],goals:["Improve understanding","Build confidence"]}}},Hy=({onNext:i,userName:t,setUserName:r})=>{const o=u=>{u.key==="Enter"&&t.trim()&&i()};return b.jsxs("div",{className:"text-center",children:[b.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:" Welcome to Learning Buddy"}),b.jsx("p",{className:"text-slate-300 mb-8 text-lg",children:"Your AI-powered companion for O-Level success"}),b.jsxs("div",{className:"mb-8",children:[b.jsx("label",{className:"block text-slate-300 text-sm font-medium mb-2",children:"What should we call you?"}),b.jsx("input",{type:"text",value:t,onChange:u=>r(u.target.value),onKeyPress:o,placeholder:"Enter your name",className:"w-full max-w-sm mx-auto px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),b.jsx("button",{onClick:i,disabled:!t.trim(),className:"px-8 py-3 bg-indigo-600 text-white font-semibold rounded-lg shadow-lg hover:bg-indigo-500 transition-colors disabled:bg-slate-600 disabled:cursor-not-allowed",children:"Let's Get Started"})]})},Gy=({onNext:i,onBack:t,userData:r,setUserData:o})=>b.jsxs("div",{children:[b.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:" Tell us about yourself"}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-slate-300 text-sm font-medium mb-2",children:"Current Grade"}),b.jsxs("select",{value:r.grade,onChange:u=>o(h=>({...h,grade:u.target.value})),className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[b.jsx("option",{value:"",children:"Select your grade"}),b.jsx("option",{value:"Secondary 1",children:"Secondary 1"}),b.jsx("option",{value:"Secondary 2",children:"Secondary 2"}),b.jsx("option",{value:"Secondary 3",children:"Secondary 3"}),b.jsx("option",{value:"Secondary 4",children:"Secondary 4"}),b.jsx("option",{value:"Secondary 5",children:"Secondary 5"})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-slate-300 text-sm font-medium mb-2",children:"Target O-Level Year"}),b.jsxs("select",{value:r.examYear,onChange:u=>o(h=>({...h,examYear:u.target.value})),className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[b.jsx("option",{value:"",children:"Select a year"}),[2024,2025,2026,2027,2028].map(u=>b.jsx("option",{value:u,children:u},u))]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-slate-300 text-sm font-medium mb-2",children:"When is your next exam?"}),b.jsx("input",{type:"date",value:r.examDate,onChange:u=>o(h=>({...h,examDate:u.target.value})),className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),b.jsxs("div",{className:"flex space-x-4 mt-8",children:[b.jsx("button",{onClick:t,className:"px-6 py-3 bg-slate-600 text-white font-semibold rounded-lg hover:bg-slate-500 transition-colors",children:"Back"}),b.jsx("button",{onClick:i,disabled:!r.grade||!r.examYear,className:"flex-1 px-6 py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-500 transition-colors disabled:bg-slate-600 disabled:cursor-not-allowed",children:"Continue"})]})]}),Ky=({onComplete:i})=>{const[t,r]=De.useState(0),[o,u]=De.useState({userName:"",grade:"",examYear:"",subjects:[],topics:{},level:"",examDate:""}),[h,p]=De.useState([]),[g,v]=De.useState({}),[T,P]=De.useState(null),[M,j]=De.useState(null),[B,q]=De.useState(!1),[J,X]=De.useState(!1),[Ee,ye]=De.useState(!1),[se,le]=De.useState(!1),me=Pp,ce=async()=>{if(t===2){X(!0);const S=me.filter(N=>o.subjects.includes(N.id)),C={};S.forEach(N=>{C[N.id]=N.topics.filter(I=>o.topics[N.id]?.includes(I.id))});const k=await zy(S,C,o.level,o.examYear);p(k||[]),X(!1),k&&r(N=>N+1)}else r(S=>S+1)},R=()=>r(S=>S-1),E=()=>{if(J||Ee||se)return b.jsxs("div",{className:"text-center",children:[b.jsxs("h2",{className:"text-2xl font-bold text-white mb-4",children:[J&&"Generating your personalized quiz...",Ee&&"Evaluating your answers...",se&&"Creating your study plan..."]}),b.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto"})]});switch(t){case 0:return b.jsx(Hy,{onNext:ce,userName:o.userName,setUserName:S=>u(C=>({...C,userName:S}))});case 1:return b.jsx(Gy,{onNext:ce,onBack:R,userData:o,setUserData:u});default:return null}};return b.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-slate-900 to-indigo-900 p-4",children:b.jsx("div",{className:"w-full max-w-3xl bg-slate-800/50 backdrop-blur-sm rounded-2xl shadow-2xl p-8 border border-slate-700 transition-all duration-500",children:E()})})},qy=({subject:i,topic:t,onExit:r})=>{const[o,u]=De.useState(0),h=["Introduction to the topic.","Explanation of core concepts.","Practice questions.","Summary and next steps."];return b.jsxs("div",{className:"p-8 bg-slate-800 rounded-lg shadow-lg",children:[b.jsxs("h2",{className:"text-white text-xl mb-4",children:[i.name," - ",t.name]}),b.jsx("p",{className:"text-slate-300 mb-6",children:h[o]}),b.jsxs("div",{className:"flex space-x-4",children:[b.jsx("button",{onClick:()=>u(p=>Math.max(0,p-1)),className:"px-4 py-2 bg-gray-600 rounded",children:"Previous"}),o<h.length-1?b.jsx("button",{onClick:()=>u(p=>p+1),className:"px-4 py-2 bg-indigo-600 rounded",children:"Next"}):b.jsx("button",{onClick:r,className:"px-4 py-2 bg-red-600 rounded",children:"Exit Session"})]})]})},Wy=({onClose:i})=>{const[t,r]=De.useState({}),o=[{id:1,text:"What is 5 + 7?",options:["10","12","14"]},{id:2,text:"Which shape has four equal sides?",options:["Square","Rectangle","Triangle"]}],u=(p,g)=>{r(v=>({...v,[p]:g}))},h=()=>{console.log("Diagnostic Answers:",t),i()};return b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center",children:b.jsxs("div",{className:"bg-slate-800 p-6 rounded-lg w-full max-w-md",children:[b.jsx("h2",{className:"text-white text-lg mb-4",children:"Diagnostic Assessment"}),o.map(p=>b.jsxs("div",{className:"mb-4",children:[b.jsx("p",{className:"text-white mb-2",children:p.text}),p.options.map(g=>b.jsx("button",{onClick:()=>u(p.id,g),className:`block w-full text-left px-3 py-2 rounded mb-1 ${t[p.id]===g?"bg-indigo-600 text-white":"bg-slate-700 text-slate-300"}`,children:g},g))]},p.id)),b.jsxs("div",{className:"flex justify-between mt-6",children:[b.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-600 rounded",children:"Cancel"}),b.jsx("button",{onClick:h,className:"px-4 py-2 bg-indigo-600 rounded",children:"Submit"})]})]})})},Qy=({children:i})=>{const[t,r]=De.useState(0);De.useEffect(()=>{const u=setInterval(()=>r(h=>h+1),1e3);return()=>clearInterval(u)},[]);const o=u=>{const h=Math.floor(u/60),p=u%60;return`${h}:${p.toString().padStart(2,"0")}`};return b.jsxs("div",{className:"relative",children:[b.jsxs("div",{className:"absolute top-0 right-0 m-4 px-3 py-1 bg-indigo-600 text-white rounded",children:["Session Time: ",o(t)]}),i]})},Yy=({onClose:i})=>b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center",children:b.jsxs("div",{className:"bg-slate-800 p-6 rounded-lg w-96",children:[b.jsx("h2",{className:"text-white text-lg font-bold mb-2",children:"Spaced Repetition"}),b.jsx("p",{className:"text-slate-400",children:"This is a placeholder for the Spaced Repetition System."}),b.jsx("div",{className:"mt-4 flex justify-end",children:b.jsx("button",{onClick:i,className:"px-4 py-2 bg-indigo-600 rounded hover:bg-indigo-500 transition-colors",children:"Close"})})]})});var $d={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp=function(i){const t=[];let r=0;for(let o=0;o<i.length;o++){let u=i.charCodeAt(o);u<128?t[r++]=u:u<2048?(t[r++]=u>>6|192,t[r++]=u&63|128):(u&64512)===55296&&o+1<i.length&&(i.charCodeAt(o+1)&64512)===56320?(u=65536+((u&1023)<<10)+(i.charCodeAt(++o)&1023),t[r++]=u>>18|240,t[r++]=u>>12&63|128,t[r++]=u>>6&63|128,t[r++]=u&63|128):(t[r++]=u>>12|224,t[r++]=u>>6&63|128,t[r++]=u&63|128)}return t},Xy=function(i){const t=[];let r=0,o=0;for(;r<i.length;){const u=i[r++];if(u<128)t[o++]=String.fromCharCode(u);else if(u>191&&u<224){const h=i[r++];t[o++]=String.fromCharCode((u&31)<<6|h&63)}else if(u>239&&u<365){const h=i[r++],p=i[r++],g=i[r++],v=((u&7)<<18|(h&63)<<12|(p&63)<<6|g&63)-65536;t[o++]=String.fromCharCode(55296+(v>>10)),t[o++]=String.fromCharCode(56320+(v&1023))}else{const h=i[r++],p=i[r++];t[o++]=String.fromCharCode((u&15)<<12|(h&63)<<6|p&63)}}return t.join("")},Fp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let u=0;u<i.length;u+=3){const h=i[u],p=u+1<i.length,g=p?i[u+1]:0,v=u+2<i.length,T=v?i[u+2]:0,P=h>>2,M=(h&3)<<4|g>>4;let j=(g&15)<<2|T>>6,B=T&63;v||(B=64,p||(j=64)),o.push(r[P],r[M],r[j],r[B])}return o.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(Lp(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):Xy(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let u=0;u<i.length;){const h=r[i.charAt(u++)],g=u<i.length?r[i.charAt(u)]:0;++u;const T=u<i.length?r[i.charAt(u)]:64;++u;const M=u<i.length?r[i.charAt(u)]:64;if(++u,h==null||g==null||T==null||M==null)throw new Jy;const j=h<<2|g>>4;if(o.push(j),T!==64){const B=g<<4&240|T>>2;if(o.push(B),M!==64){const q=T<<6&192|M;o.push(q)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class Jy extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Zy=function(i){const t=Lp(i);return Fp.encodeByteArray(t,!0)},jp=function(i){return Zy(i).replace(/\./g,"")},ev=function(i){try{return Fp.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=()=>tv().__FIREBASE_DEFAULTS__,rv=()=>{if(typeof process>"u"||typeof $d>"u")return;const i=$d.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},iv=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&ev(i[1]);return t&&JSON.parse(t)},sv=()=>{try{return nv()||rv()||iv()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lv(){var i;const t=(i=sv())===null||i===void 0?void 0:i.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function av(){return!lv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uv(){try{return typeof indexedDB=="object"}catch{return!1}}function cv(){return new Promise((i,t)=>{try{let r=!0;const o="validate-browser-context-for-indexeddb-analytics-module",u=self.indexedDB.open(o);u.onsuccess=()=>{u.result.close(),r||self.indexedDB.deleteDatabase(o),i(!0)},u.onupgradeneeded=()=>{r=!1},u.onerror=()=>{var h;t(((h=u.error)===null||h===void 0?void 0:h.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="FirebaseError";class Ss extends Error{constructor(t,r,o){super(r),this.code=t,this.customData=o,this.name=hv,Object.setPrototypeOf(this,Ss.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Up.prototype.create)}}class Up{constructor(t,r,o){this.service=t,this.serviceName=r,this.errors=o}create(t,...r){const o=r[0]||{},u=`${this.service}/${t}`,h=this.errors[t],p=h?fv(h,o):"Error",g=`${this.serviceName}: ${p} (${u}).`;return new Ss(u,g,o)}}function fv(i,t){return i.replace(dv,(r,o)=>{const u=t[o];return u!=null?String(u):`<${o}?>`})}const dv=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(i){return i&&i._delegate?i._delegate:i}class wa{constructor(t,r,o){this.name=t,this.instanceFactory=r,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Pe||(Pe={}));const pv={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},mv=Pe.INFO,gv={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},yv=(i,t,...r)=>{if(t<i.logLevel)return;const o=new Date().toISOString(),u=gv[t];if(u)console[u](`[${o}]  ${i.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class bp{constructor(t){this.name=t,this._logLevel=mv,this._logHandler=yv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pe))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?pv[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...t),this._logHandler(this,Pe.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...t),this._logHandler(this,Pe.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...t),this._logHandler(this,Pe.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...t),this._logHandler(this,Pe.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...t),this._logHandler(this,Pe.ERROR,...t)}}const vv=(i,t)=>t.some(r=>i instanceof r);let Hd,Gd;function _v(){return Hd||(Hd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ev(){return Gd||(Gd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bp=new WeakMap,Ac=new WeakMap,zp=new WeakMap,yc=new WeakMap,Bc=new WeakMap;function wv(i){const t=new Promise((r,o)=>{const u=()=>{i.removeEventListener("success",h),i.removeEventListener("error",p)},h=()=>{r(Fr(i.result)),u()},p=()=>{o(i.error),u()};i.addEventListener("success",h),i.addEventListener("error",p)});return t.then(r=>{r instanceof IDBCursor&&Bp.set(r,i)}).catch(()=>{}),Bc.set(t,i),t}function Tv(i){if(Ac.has(i))return;const t=new Promise((r,o)=>{const u=()=>{i.removeEventListener("complete",h),i.removeEventListener("error",p),i.removeEventListener("abort",p)},h=()=>{r(),u()},p=()=>{o(i.error||new DOMException("AbortError","AbortError")),u()};i.addEventListener("complete",h),i.addEventListener("error",p),i.addEventListener("abort",p)});Ac.set(i,t)}let Cc={get(i,t,r){if(i instanceof IDBTransaction){if(t==="done")return Ac.get(i);if(t==="objectStoreNames")return i.objectStoreNames||zp.get(i);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Fr(i[t])},set(i,t,r){return i[t]=r,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function Sv(i){Cc=i(Cc)}function Iv(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const o=i.call(vc(this),t,...r);return zp.set(o,t.sort?t.sort():[t]),Fr(o)}:Ev().includes(i)?function(...t){return i.apply(vc(this),t),Fr(Bp.get(this))}:function(...t){return Fr(i.apply(vc(this),t))}}function Av(i){return typeof i=="function"?Iv(i):(i instanceof IDBTransaction&&Tv(i),vv(i,_v())?new Proxy(i,Cc):i)}function Fr(i){if(i instanceof IDBRequest)return wv(i);if(yc.has(i))return yc.get(i);const t=Av(i);return t!==i&&(yc.set(i,t),Bc.set(t,i)),t}const vc=i=>Bc.get(i);function Cv(i,t,{blocked:r,upgrade:o,blocking:u,terminated:h}={}){const p=indexedDB.open(i,t),g=Fr(p);return o&&p.addEventListener("upgradeneeded",v=>{o(Fr(p.result),v.oldVersion,v.newVersion,Fr(p.transaction),v)}),r&&p.addEventListener("blocked",v=>r(v.oldVersion,v.newVersion,v)),g.then(v=>{h&&v.addEventListener("close",()=>h()),u&&v.addEventListener("versionchange",T=>u(T.oldVersion,T.newVersion,T))}).catch(()=>{}),g}const Rv=["get","getKey","getAll","getAllKeys","count"],xv=["put","add","delete","clear"],_c=new Map;function Kd(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(_c.get(t))return _c.get(t);const r=t.replace(/FromIndex$/,""),o=t!==r,u=xv.includes(r);if(!(r in(o?IDBIndex:IDBObjectStore).prototype)||!(u||Rv.includes(r)))return;const h=async function(p,...g){const v=this.transaction(p,u?"readwrite":"readonly");let T=v.store;return o&&(T=T.index(g.shift())),(await Promise.all([T[r](...g),u&&v.done]))[0]};return _c.set(t,h),h}Sv(i=>({...i,get:(t,r,o)=>Kd(t,r)||i.get(t,r,o),has:(t,r)=>!!Kd(t,r)||i.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(kv(r)){const o=r.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(r=>r).join(" ")}}function kv(i){const t=i.getComponent();return t?.type==="VERSION"}const Rc="@firebase/app",qd="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur=new bp("@firebase/app"),Nv="@firebase/app-compat",Ov="@firebase/analytics-compat",Dv="@firebase/analytics",Vv="@firebase/app-check-compat",Mv="@firebase/app-check",Lv="@firebase/auth",Fv="@firebase/auth-compat",jv="@firebase/database",Uv="@firebase/data-connect",bv="@firebase/database-compat",Bv="@firebase/functions",zv="@firebase/functions-compat",$v="@firebase/installations",Hv="@firebase/installations-compat",Gv="@firebase/messaging",Kv="@firebase/messaging-compat",qv="@firebase/performance",Wv="@firebase/performance-compat",Qv="@firebase/remote-config",Yv="@firebase/remote-config-compat",Xv="@firebase/storage",Jv="@firebase/storage-compat",Zv="@firebase/firestore",e_="@firebase/vertexai-preview",t_="@firebase/firestore-compat",n_="firebase",r_="10.14.1",i_={[Rc]:"fire-core",[Nv]:"fire-core-compat",[Dv]:"fire-analytics",[Ov]:"fire-analytics-compat",[Mv]:"fire-app-check",[Vv]:"fire-app-check-compat",[Lv]:"fire-auth",[Fv]:"fire-auth-compat",[jv]:"fire-rtdb",[Uv]:"fire-data-connect",[bv]:"fire-rtdb-compat",[Bv]:"fire-fn",[zv]:"fire-fn-compat",[$v]:"fire-iid",[Hv]:"fire-iid-compat",[Gv]:"fire-fcm",[Kv]:"fire-fcm-compat",[qv]:"fire-perf",[Wv]:"fire-perf-compat",[Qv]:"fire-rc",[Yv]:"fire-rc-compat",[Xv]:"fire-gcs",[Jv]:"fire-gcs-compat",[Zv]:"fire-fst",[t_]:"fire-fst-compat",[e_]:"fire-vertex","fire-js":"fire-js",[n_]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_=new Map,o_=new Map,Wd=new Map;function Qd(i,t){try{i.container.addComponent(t)}catch(r){ur.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,r)}}function Ta(i){const t=i.name;if(Wd.has(t))return ur.debug(`There were multiple attempts to register component ${t}.`),!1;Wd.set(t,i);for(const r of s_.values())Qd(r,i);for(const r of o_.values())Qd(r,i);return!0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zc=new Up("app","Firebase",l_);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_=r_;function Co(i,t,r){var o;let u=(o=i_[i])!==null&&o!==void 0?o:i;r&&(u+=`-${r}`);const h=u.match(/\s|\//),p=t.match(/\s|\//);if(h||p){const g=[`Unable to register library "${u}" with version "${t}":`];h&&g.push(`library name "${u}" contains illegal characters (whitespace or "/")`),h&&p&&g.push("and"),p&&g.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ur.warn(g.join(" "));return}Ta(new wa(`${u}-version`,()=>({library:u,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="firebase-heartbeat-database",c_=1,Vo="firebase-heartbeat-store";let Ec=null;function $p(){return Ec||(Ec=Cv(u_,c_,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(Vo)}catch(r){console.warn(r)}}}}).catch(i=>{throw zc.create("idb-open",{originalErrorMessage:i.message})})),Ec}async function h_(i){try{const r=(await $p()).transaction(Vo),o=await r.objectStore(Vo).get(Hp(i));return await r.done,o}catch(t){if(t instanceof Ss)ur.warn(t.message);else{const r=zc.create("idb-get",{originalErrorMessage:t?.message});ur.warn(r.message)}}}async function Yd(i,t){try{const o=(await $p()).transaction(Vo,"readwrite");await o.objectStore(Vo).put(t,Hp(i)),await o.done}catch(r){if(r instanceof Ss)ur.warn(r.message);else{const o=zc.create("idb-set",{originalErrorMessage:r?.message});ur.warn(o.message)}}}function Hp(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_=1024,d_=30*24*60*60*1e3;class p_{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new g_(r),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var t,r;try{const u=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),h=Xd();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===h||this._heartbeatsCache.heartbeats.some(p=>p.date===h)?void 0:(this._heartbeatsCache.heartbeats.push({date:h,agent:u}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(p=>{const g=new Date(p.date).valueOf();return Date.now()-g<=d_}),this._storage.overwrite(this._heartbeatsCache))}catch(o){ur.warn(o)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Xd(),{heartbeatsToSend:o,unsentEntries:u}=m_(this._heartbeatsCache.heartbeats),h=jp(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=r,u.length>0?(this._heartbeatsCache.heartbeats=u,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),h}catch(r){return ur.warn(r),""}}}function Xd(){return new Date().toISOString().substring(0,10)}function m_(i,t=f_){const r=[];let o=i.slice();for(const u of i){const h=r.find(p=>p.agent===u.agent);if(h){if(h.dates.push(u.date),Jd(r)>t){h.dates.pop();break}}else if(r.push({agent:u.agent,dates:[u.date]}),Jd(r)>t){r.pop();break}o=o.slice(1)}return{heartbeatsToSend:r,unsentEntries:o}}class g_{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uv()?cv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await h_(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var r;if(await this._canUseIndexedDBPromise){const u=await this.read();return Yd(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:u.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var r;if(await this._canUseIndexedDBPromise){const u=await this.read();return Yd(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:u.lastSentHeartbeatDate,heartbeats:[...u.heartbeats,...t.heartbeats]})}else return}}function Jd(i){return jp(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(i){Ta(new wa("platform-logger",t=>new Pv(t),"PRIVATE")),Ta(new wa("heartbeat",t=>new p_(t),"PRIVATE")),Co(Rc,qd,i),Co(Rc,qd,"esm2017"),Co("fire-js","")}y_("");var Zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gp;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(R,E){function S(){}S.prototype=E.prototype,R.D=E.prototype,R.prototype=new S,R.prototype.constructor=R,R.C=function(C,k,N){for(var I=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)I[Ye-2]=arguments[Ye];return E.prototype[k].apply(C,I)}}function r(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(o,r),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function u(R,E,S){S||(S=0);var C=Array(16);if(typeof E=="string")for(var k=0;16>k;++k)C[k]=E.charCodeAt(S++)|E.charCodeAt(S++)<<8|E.charCodeAt(S++)<<16|E.charCodeAt(S++)<<24;else for(k=0;16>k;++k)C[k]=E[S++]|E[S++]<<8|E[S++]<<16|E[S++]<<24;E=R.g[0],S=R.g[1],k=R.g[2];var N=R.g[3],I=E+(N^S&(k^N))+C[0]+3614090360&4294967295;E=S+(I<<7&4294967295|I>>>25),I=N+(k^E&(S^k))+C[1]+3905402710&4294967295,N=E+(I<<12&4294967295|I>>>20),I=k+(S^N&(E^S))+C[2]+606105819&4294967295,k=N+(I<<17&4294967295|I>>>15),I=S+(E^k&(N^E))+C[3]+3250441966&4294967295,S=k+(I<<22&4294967295|I>>>10),I=E+(N^S&(k^N))+C[4]+4118548399&4294967295,E=S+(I<<7&4294967295|I>>>25),I=N+(k^E&(S^k))+C[5]+1200080426&4294967295,N=E+(I<<12&4294967295|I>>>20),I=k+(S^N&(E^S))+C[6]+2821735955&4294967295,k=N+(I<<17&4294967295|I>>>15),I=S+(E^k&(N^E))+C[7]+4249261313&4294967295,S=k+(I<<22&4294967295|I>>>10),I=E+(N^S&(k^N))+C[8]+1770035416&4294967295,E=S+(I<<7&4294967295|I>>>25),I=N+(k^E&(S^k))+C[9]+2336552879&4294967295,N=E+(I<<12&4294967295|I>>>20),I=k+(S^N&(E^S))+C[10]+4294925233&4294967295,k=N+(I<<17&4294967295|I>>>15),I=S+(E^k&(N^E))+C[11]+2304563134&4294967295,S=k+(I<<22&4294967295|I>>>10),I=E+(N^S&(k^N))+C[12]+1804603682&4294967295,E=S+(I<<7&4294967295|I>>>25),I=N+(k^E&(S^k))+C[13]+4254626195&4294967295,N=E+(I<<12&4294967295|I>>>20),I=k+(S^N&(E^S))+C[14]+2792965006&4294967295,k=N+(I<<17&4294967295|I>>>15),I=S+(E^k&(N^E))+C[15]+1236535329&4294967295,S=k+(I<<22&4294967295|I>>>10),I=E+(k^N&(S^k))+C[1]+4129170786&4294967295,E=S+(I<<5&4294967295|I>>>27),I=N+(S^k&(E^S))+C[6]+3225465664&4294967295,N=E+(I<<9&4294967295|I>>>23),I=k+(E^S&(N^E))+C[11]+643717713&4294967295,k=N+(I<<14&4294967295|I>>>18),I=S+(N^E&(k^N))+C[0]+3921069994&4294967295,S=k+(I<<20&4294967295|I>>>12),I=E+(k^N&(S^k))+C[5]+3593408605&4294967295,E=S+(I<<5&4294967295|I>>>27),I=N+(S^k&(E^S))+C[10]+38016083&4294967295,N=E+(I<<9&4294967295|I>>>23),I=k+(E^S&(N^E))+C[15]+3634488961&4294967295,k=N+(I<<14&4294967295|I>>>18),I=S+(N^E&(k^N))+C[4]+3889429448&4294967295,S=k+(I<<20&4294967295|I>>>12),I=E+(k^N&(S^k))+C[9]+568446438&4294967295,E=S+(I<<5&4294967295|I>>>27),I=N+(S^k&(E^S))+C[14]+3275163606&4294967295,N=E+(I<<9&4294967295|I>>>23),I=k+(E^S&(N^E))+C[3]+4107603335&4294967295,k=N+(I<<14&4294967295|I>>>18),I=S+(N^E&(k^N))+C[8]+1163531501&4294967295,S=k+(I<<20&4294967295|I>>>12),I=E+(k^N&(S^k))+C[13]+2850285829&4294967295,E=S+(I<<5&4294967295|I>>>27),I=N+(S^k&(E^S))+C[2]+4243563512&4294967295,N=E+(I<<9&4294967295|I>>>23),I=k+(E^S&(N^E))+C[7]+1735328473&4294967295,k=N+(I<<14&4294967295|I>>>18),I=S+(N^E&(k^N))+C[12]+2368359562&4294967295,S=k+(I<<20&4294967295|I>>>12),I=E+(S^k^N)+C[5]+4294588738&4294967295,E=S+(I<<4&4294967295|I>>>28),I=N+(E^S^k)+C[8]+2272392833&4294967295,N=E+(I<<11&4294967295|I>>>21),I=k+(N^E^S)+C[11]+1839030562&4294967295,k=N+(I<<16&4294967295|I>>>16),I=S+(k^N^E)+C[14]+4259657740&4294967295,S=k+(I<<23&4294967295|I>>>9),I=E+(S^k^N)+C[1]+2763975236&4294967295,E=S+(I<<4&4294967295|I>>>28),I=N+(E^S^k)+C[4]+1272893353&4294967295,N=E+(I<<11&4294967295|I>>>21),I=k+(N^E^S)+C[7]+4139469664&4294967295,k=N+(I<<16&4294967295|I>>>16),I=S+(k^N^E)+C[10]+3200236656&4294967295,S=k+(I<<23&4294967295|I>>>9),I=E+(S^k^N)+C[13]+681279174&4294967295,E=S+(I<<4&4294967295|I>>>28),I=N+(E^S^k)+C[0]+3936430074&4294967295,N=E+(I<<11&4294967295|I>>>21),I=k+(N^E^S)+C[3]+3572445317&4294967295,k=N+(I<<16&4294967295|I>>>16),I=S+(k^N^E)+C[6]+76029189&4294967295,S=k+(I<<23&4294967295|I>>>9),I=E+(S^k^N)+C[9]+3654602809&4294967295,E=S+(I<<4&4294967295|I>>>28),I=N+(E^S^k)+C[12]+3873151461&4294967295,N=E+(I<<11&4294967295|I>>>21),I=k+(N^E^S)+C[15]+530742520&4294967295,k=N+(I<<16&4294967295|I>>>16),I=S+(k^N^E)+C[2]+3299628645&4294967295,S=k+(I<<23&4294967295|I>>>9),I=E+(k^(S|~N))+C[0]+4096336452&4294967295,E=S+(I<<6&4294967295|I>>>26),I=N+(S^(E|~k))+C[7]+1126891415&4294967295,N=E+(I<<10&4294967295|I>>>22),I=k+(E^(N|~S))+C[14]+2878612391&4294967295,k=N+(I<<15&4294967295|I>>>17),I=S+(N^(k|~E))+C[5]+4237533241&4294967295,S=k+(I<<21&4294967295|I>>>11),I=E+(k^(S|~N))+C[12]+1700485571&4294967295,E=S+(I<<6&4294967295|I>>>26),I=N+(S^(E|~k))+C[3]+2399980690&4294967295,N=E+(I<<10&4294967295|I>>>22),I=k+(E^(N|~S))+C[10]+4293915773&4294967295,k=N+(I<<15&4294967295|I>>>17),I=S+(N^(k|~E))+C[1]+2240044497&4294967295,S=k+(I<<21&4294967295|I>>>11),I=E+(k^(S|~N))+C[8]+1873313359&4294967295,E=S+(I<<6&4294967295|I>>>26),I=N+(S^(E|~k))+C[15]+4264355552&4294967295,N=E+(I<<10&4294967295|I>>>22),I=k+(E^(N|~S))+C[6]+2734768916&4294967295,k=N+(I<<15&4294967295|I>>>17),I=S+(N^(k|~E))+C[13]+1309151649&4294967295,S=k+(I<<21&4294967295|I>>>11),I=E+(k^(S|~N))+C[4]+4149444226&4294967295,E=S+(I<<6&4294967295|I>>>26),I=N+(S^(E|~k))+C[11]+3174756917&4294967295,N=E+(I<<10&4294967295|I>>>22),I=k+(E^(N|~S))+C[2]+718787259&4294967295,k=N+(I<<15&4294967295|I>>>17),I=S+(N^(k|~E))+C[9]+3951481745&4294967295,R.g[0]=R.g[0]+E&4294967295,R.g[1]=R.g[1]+(k+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+k&4294967295,R.g[3]=R.g[3]+N&4294967295}o.prototype.u=function(R,E){E===void 0&&(E=R.length);for(var S=E-this.blockSize,C=this.B,k=this.h,N=0;N<E;){if(k==0)for(;N<=S;)u(this,R,N),N+=this.blockSize;if(typeof R=="string"){for(;N<E;)if(C[k++]=R.charCodeAt(N++),k==this.blockSize){u(this,C),k=0;break}}else for(;N<E;)if(C[k++]=R[N++],k==this.blockSize){u(this,C),k=0;break}}this.h=k,this.o+=E},o.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var E=1;E<R.length-8;++E)R[E]=0;var S=8*this.o;for(E=R.length-8;E<R.length;++E)R[E]=S&255,S/=256;for(this.u(R),R=Array(16),E=S=0;4>E;++E)for(var C=0;32>C;C+=8)R[S++]=this.g[E]>>>C&255;return R};function h(R,E){var S=g;return Object.prototype.hasOwnProperty.call(S,R)?S[R]:S[R]=E(R)}function p(R,E){this.h=E;for(var S=[],C=!0,k=R.length-1;0<=k;k--){var N=R[k]|0;C&&N==E||(S[k]=N,C=!1)}this.g=S}var g={};function v(R){return-128<=R&&128>R?h(R,function(E){return new p([E|0],0>E?-1:0)}):new p([R|0],0>R?-1:0)}function T(R){if(isNaN(R)||!isFinite(R))return M;if(0>R)return X(T(-R));for(var E=[],S=1,C=0;R>=S;C++)E[C]=R/S|0,S*=4294967296;return new p(E,0)}function P(R,E){if(R.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(R.charAt(0)=="-")return X(P(R.substring(1),E));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=T(Math.pow(E,8)),C=M,k=0;k<R.length;k+=8){var N=Math.min(8,R.length-k),I=parseInt(R.substring(k,k+N),E);8>N?(N=T(Math.pow(E,N)),C=C.j(N).add(T(I))):(C=C.j(S),C=C.add(T(I)))}return C}var M=v(0),j=v(1),B=v(16777216);i=p.prototype,i.m=function(){if(J(this))return-X(this).m();for(var R=0,E=1,S=0;S<this.g.length;S++){var C=this.i(S);R+=(0<=C?C:4294967296+C)*E,E*=4294967296}return R},i.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(q(this))return"0";if(J(this))return"-"+X(this).toString(R);for(var E=T(Math.pow(R,6)),S=this,C="";;){var k=le(S,E).g;S=Ee(S,k.j(E));var N=((0<S.g.length?S.g[0]:S.h)>>>0).toString(R);if(S=k,q(S))return N+C;for(;6>N.length;)N="0"+N;C=N+C}},i.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function q(R){if(R.h!=0)return!1;for(var E=0;E<R.g.length;E++)if(R.g[E]!=0)return!1;return!0}function J(R){return R.h==-1}i.l=function(R){return R=Ee(this,R),J(R)?-1:q(R)?0:1};function X(R){for(var E=R.g.length,S=[],C=0;C<E;C++)S[C]=~R.g[C];return new p(S,~R.h).add(j)}i.abs=function(){return J(this)?X(this):this},i.add=function(R){for(var E=Math.max(this.g.length,R.g.length),S=[],C=0,k=0;k<=E;k++){var N=C+(this.i(k)&65535)+(R.i(k)&65535),I=(N>>>16)+(this.i(k)>>>16)+(R.i(k)>>>16);C=I>>>16,N&=65535,I&=65535,S[k]=I<<16|N}return new p(S,S[S.length-1]&-2147483648?-1:0)};function Ee(R,E){return R.add(X(E))}i.j=function(R){if(q(this)||q(R))return M;if(J(this))return J(R)?X(this).j(X(R)):X(X(this).j(R));if(J(R))return X(this.j(X(R)));if(0>this.l(B)&&0>R.l(B))return T(this.m()*R.m());for(var E=this.g.length+R.g.length,S=[],C=0;C<2*E;C++)S[C]=0;for(C=0;C<this.g.length;C++)for(var k=0;k<R.g.length;k++){var N=this.i(C)>>>16,I=this.i(C)&65535,Ye=R.i(k)>>>16,It=R.i(k)&65535;S[2*C+2*k]+=I*It,ye(S,2*C+2*k),S[2*C+2*k+1]+=N*It,ye(S,2*C+2*k+1),S[2*C+2*k+1]+=I*Ye,ye(S,2*C+2*k+1),S[2*C+2*k+2]+=N*Ye,ye(S,2*C+2*k+2)}for(C=0;C<E;C++)S[C]=S[2*C+1]<<16|S[2*C];for(C=E;C<2*E;C++)S[C]=0;return new p(S,0)};function ye(R,E){for(;(R[E]&65535)!=R[E];)R[E+1]+=R[E]>>>16,R[E]&=65535,E++}function se(R,E){this.g=R,this.h=E}function le(R,E){if(q(E))throw Error("division by zero");if(q(R))return new se(M,M);if(J(R))return E=le(X(R),E),new se(X(E.g),X(E.h));if(J(E))return E=le(R,X(E)),new se(X(E.g),E.h);if(30<R.g.length){if(J(R)||J(E))throw Error("slowDivide_ only works with positive integers.");for(var S=j,C=E;0>=C.l(R);)S=me(S),C=me(C);var k=ce(S,1),N=ce(C,1);for(C=ce(C,2),S=ce(S,2);!q(C);){var I=N.add(C);0>=I.l(R)&&(k=k.add(S),N=I),C=ce(C,1),S=ce(S,1)}return E=Ee(R,k.j(E)),new se(k,E)}for(k=M;0<=R.l(E);){for(S=Math.max(1,Math.floor(R.m()/E.m())),C=Math.ceil(Math.log(S)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),N=T(S),I=N.j(E);J(I)||0<I.l(R);)S-=C,N=T(S),I=N.j(E);q(N)&&(N=j),k=k.add(N),R=Ee(R,I)}return new se(k,R)}i.A=function(R){return le(this,R).h},i.and=function(R){for(var E=Math.max(this.g.length,R.g.length),S=[],C=0;C<E;C++)S[C]=this.i(C)&R.i(C);return new p(S,this.h&R.h)},i.or=function(R){for(var E=Math.max(this.g.length,R.g.length),S=[],C=0;C<E;C++)S[C]=this.i(C)|R.i(C);return new p(S,this.h|R.h)},i.xor=function(R){for(var E=Math.max(this.g.length,R.g.length),S=[],C=0;C<E;C++)S[C]=this.i(C)^R.i(C);return new p(S,this.h^R.h)};function me(R){for(var E=R.g.length+1,S=[],C=0;C<E;C++)S[C]=R.i(C)<<1|R.i(C-1)>>>31;return new p(S,R.h)}function ce(R,E){var S=E>>5;E%=32;for(var C=R.g.length-S,k=[],N=0;N<C;N++)k[N]=0<E?R.i(N+S)>>>E|R.i(N+S+1)<<32-E:R.i(N+S);return new p(k,R.h)}o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,p.prototype.add=p.prototype.add,p.prototype.multiply=p.prototype.j,p.prototype.modulo=p.prototype.A,p.prototype.compare=p.prototype.l,p.prototype.toNumber=p.prototype.m,p.prototype.toString=p.prototype.toString,p.prototype.getBits=p.prototype.i,p.fromNumber=T,p.fromString=P,Gp=p}).apply(typeof Zd<"u"?Zd:typeof self<"u"?self:typeof window<"u"?window:{});var ha=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Kp,Io,qp,ya,xc,Wp,Qp,Yp;(function(){var i,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,m){return l==Array.prototype||l==Object.prototype||(l[f]=m.value),l};function r(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof ha=="object"&&ha];for(var f=0;f<l.length;++f){var m=l[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var o=r(this);function u(l,f){if(f)e:{var m=o;l=l.split(".");for(var _=0;_<l.length-1;_++){var D=l[_];if(!(D in m))break e;m=m[D]}l=l[l.length-1],_=m[l],f=f(_),f!=_&&f!=null&&t(m,l,{configurable:!0,writable:!0,value:f})}}function h(l,f){l instanceof String&&(l+="");var m=0,_=!1,D={next:function(){if(!_&&m<l.length){var U=m++;return{value:f(U,l[U]),done:!1}}return _=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}u("Array.prototype.values",function(l){return l||function(){return h(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var p=p||{},g=this||self;function v(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function T(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function P(l,f,m){return l.call.apply(l.bind,arguments)}function M(l,f,m){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,_),l.apply(f,D)}}return function(){return l.apply(f,arguments)}}function j(l,f,m){return j=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?P:M,j.apply(null,arguments)}function B(l,f){var m=Array.prototype.slice.call(arguments,1);return function(){var _=m.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function q(l,f){function m(){}m.prototype=f.prototype,l.aa=f.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(_,D,U){for(var Y=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)Y[Ve-2]=arguments[Ve];return f.prototype[D].apply(_,Y)}}function J(l){const f=l.length;if(0<f){const m=Array(f);for(let _=0;_<f;_++)m[_]=l[_];return m}return[]}function X(l,f){for(let m=1;m<arguments.length;m++){const _=arguments[m];if(v(_)){const D=l.length||0,U=_.length||0;l.length=D+U;for(let Y=0;Y<U;Y++)l[D+Y]=_[Y]}else l.push(_)}}class Ee{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function ye(l){return/^[\s\xa0]*$/.test(l)}function se(){var l=g.navigator;return l&&(l=l.userAgent)?l:""}function le(l){return le[" "](l),l}le[" "]=function(){};var me=se().indexOf("Gecko")!=-1&&!(se().toLowerCase().indexOf("webkit")!=-1&&se().indexOf("Edge")==-1)&&!(se().indexOf("Trident")!=-1||se().indexOf("MSIE")!=-1)&&se().indexOf("Edge")==-1;function ce(l,f,m){for(const _ in l)f.call(m,l[_],_,l)}function R(l,f){for(const m in l)f.call(void 0,l[m],m,l)}function E(l){const f={};for(const m in l)f[m]=l[m];return f}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(l,f){let m,_;for(let D=1;D<arguments.length;D++){_=arguments[D];for(m in _)l[m]=_[m];for(let U=0;U<S.length;U++)m=S[U],Object.prototype.hasOwnProperty.call(_,m)&&(l[m]=_[m])}}function k(l){var f=1;l=l.split(":");const m=[];for(;0<f&&l.length;)m.push(l.shift()),f--;return l.length&&m.push(l.join(":")),m}function N(l){g.setTimeout(()=>{throw l},0)}function I(){var l=he;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class Ye{constructor(){this.h=this.g=null}add(f,m){const _=It.get();_.set(f,m),this.h?this.h.next=_:this.g=_,this.h=_}}var It=new Ee(()=>new At,l=>l.reset());class At{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Me,Z=!1,he=new Ye,te=()=>{const l=g.Promise.resolve(void 0);Me=()=>{l.then(O)}};var O=()=>{for(var l;l=I();){try{l.h.call(l.g)}catch(m){N(m)}var f=It;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}Z=!1};function z(){this.s=this.s,this.C=this.C}z.prototype.s=!1,z.prototype.ma=function(){this.s||(this.s=!0,this.N())},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var ve=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};g.addEventListener("test",m,f),g.removeEventListener("test",m,f)}catch{}return l}();function we(l,f){if(ae.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(me){e:{try{le(f.nodeName);var D=!0;break e}catch{}D=!1}D||(f=null)}}else m=="mouseover"?f=l.fromElement:m=="mouseout"&&(f=l.toElement);this.relatedTarget=f,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ae[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&we.aa.h.call(this)}}q(we,ae);var Ae={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ne="closure_listenable_"+(1e6*Math.random()|0),Oe=0;function je(l,f,m,_,D){this.listener=l,this.proxy=null,this.src=f,this.type=m,this.capture=!!_,this.ha=D,this.key=++Oe,this.da=this.fa=!1}function ut(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function $n(l){this.src=l,this.g={},this.h=0}$n.prototype.add=function(l,f,m,_,D){var U=l.toString();l=this.g[U],l||(l=this.g[U]=[],this.h++);var Y=cr(l,f,_,D);return-1<Y?(f=l[Y],m||(f.fa=!1)):(f=new je(f,this.src,U,!!_,D),f.fa=m,l.push(f)),f};function Si(l,f){var m=f.type;if(m in l.g){var _=l.g[m],D=Array.prototype.indexOf.call(_,f,void 0),U;(U=0<=D)&&Array.prototype.splice.call(_,D,1),U&&(ut(f),l.g[m].length==0&&(delete l.g[m],l.h--))}}function cr(l,f,m,_){for(var D=0;D<l.length;++D){var U=l[D];if(!U.da&&U.listener==f&&U.capture==!!m&&U.ha==_)return D}return-1}var Br="closure_lm_"+(1e6*Math.random()|0),Ii={};function Cs(l,f,m,_,D){if(Array.isArray(f)){for(var U=0;U<f.length;U++)Cs(l,f[U],m,_,D);return null}return m=Ps(m),l&&l[Ne]?l.K(f,m,T(_)?!!_.capture:!1,D):Rs(l,f,m,!1,_,D)}function Rs(l,f,m,_,D,U){if(!f)throw Error("Invalid event type");var Y=T(D)?!!D.capture:!!D,Ve=Ci(l);if(Ve||(l[Br]=Ve=new $n(l)),m=Ve.add(f,m,_,Y,U),m.proxy)return m;if(_=Qo(),m.proxy=_,_.src=l,_.listener=m,l.addEventListener)ve||(D=Y),D===void 0&&(D=!1),l.addEventListener(f.toString(),_,D);else if(l.attachEvent)l.attachEvent(Gn(f.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Qo(){function l(m){return f.call(l.src,l.listener,m)}const f=xs;return l}function Ai(l,f,m,_,D){if(Array.isArray(f))for(var U=0;U<f.length;U++)Ai(l,f[U],m,_,D);else _=T(_)?!!_.capture:!!_,m=Ps(m),l&&l[Ne]?(l=l.i,f=String(f).toString(),f in l.g&&(U=l.g[f],m=cr(U,m,_,D),-1<m&&(ut(U[m]),Array.prototype.splice.call(U,m,1),U.length==0&&(delete l.g[f],l.h--)))):l&&(l=Ci(l))&&(f=l.g[f.toString()],l=-1,f&&(l=cr(f,m,_,D)),(m=-1<l?f[l]:null)&&Hn(m))}function Hn(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Ne])Si(f.i,l);else{var m=l.type,_=l.proxy;f.removeEventListener?f.removeEventListener(m,_,l.capture):f.detachEvent?f.detachEvent(Gn(m),_):f.addListener&&f.removeListener&&f.removeListener(_),(m=Ci(f))?(Si(m,l),m.h==0&&(m.src=null,f[Br]=null)):ut(l)}}}function Gn(l){return l in Ii?Ii[l]:Ii[l]="on"+l}function xs(l,f){if(l.da)l=!0;else{f=new we(f,this);var m=l.listener,_=l.ha||l.src;l.fa&&Hn(l),l=m.call(_,f)}return l}function Ci(l){return l=l[Br],l instanceof $n?l:null}var Ri="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ps(l){return typeof l=="function"?l:(l[Ri]||(l[Ri]=function(f){return l.handleEvent(f)}),l[Ri])}function it(){z.call(this),this.i=new $n(this),this.M=this,this.F=null}q(it,z),it.prototype[Ne]=!0,it.prototype.removeEventListener=function(l,f,m,_){Ai(this,l,f,m,_)};function st(l,f){var m,_=l.F;if(_)for(m=[];_;_=_.F)m.push(_);if(l=l.M,_=f.type||f,typeof f=="string")f=new ae(f,l);else if(f instanceof ae)f.target=f.target||l;else{var D=f;f=new ae(_,l),C(f,D)}if(D=!0,m)for(var U=m.length-1;0<=U;U--){var Y=f.g=m[U];D=Kn(Y,_,!0,f)&&D}if(Y=f.g=l,D=Kn(Y,_,!0,f)&&D,D=Kn(Y,_,!1,f)&&D,m)for(U=0;U<m.length;U++)Y=f.g=m[U],D=Kn(Y,_,!1,f)&&D}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var m=l.g[f],_=0;_<m.length;_++)ut(m[_]);delete l.g[f],l.h--}}this.F=null},it.prototype.K=function(l,f,m,_){return this.i.add(String(l),f,!1,m,_)},it.prototype.L=function(l,f,m,_){return this.i.add(String(l),f,!0,m,_)};function Kn(l,f,m,_){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var D=!0,U=0;U<f.length;++U){var Y=f[U];if(Y&&!Y.da&&Y.capture==m){var Ve=Y.listener,ot=Y.ha||Y.src;Y.fa&&Si(l.i,Y),D=Ve.call(ot,_)!==!1&&D}}return D&&!_.defaultPrevented}function ks(l,f,m){if(typeof l=="function")m&&(l=j(l,m));else if(l&&typeof l.handleEvent=="function")l=j(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:g.setTimeout(l,f||0)}function hr(l){l.g=ks(()=>{l.g=null,l.i&&(l.i=!1,hr(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class zr extends z{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:hr(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $r(l){z.call(this),this.h=l,this.g={}}q($r,z);var Ns=[];function Os(l){ce(l.g,function(f,m){this.g.hasOwnProperty(m)&&Hn(f)},l),l.g={}}$r.prototype.N=function(){$r.aa.N.call(this),Os(this)},$r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ds=g.JSON.stringify,Vs=g.JSON.parse,Ms=class{stringify(l){return g.JSON.stringify(l,void 0)}parse(l){return g.JSON.parse(l,void 0)}};function Hr(){}Hr.prototype.h=null;function xi(l){return l.h||(l.h=l.i())}function Pi(){}var tn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kn(){ae.call(this,"d")}q(kn,ae);function ki(){ae.call(this,"c")}q(ki,ae);var Nn={},Ls=null;function Gr(){return Ls=Ls||new it}Nn.La="serverreachability";function Fs(l){ae.call(this,Nn.La,l)}q(Fs,ae);function qn(l){const f=Gr();st(f,new Fs(f))}Nn.STAT_EVENT="statevent";function js(l,f){ae.call(this,Nn.STAT_EVENT,l),this.stat=f}q(js,ae);function Xe(l){const f=Gr();st(f,new js(f,l))}Nn.Ma="timingevent";function Ni(l,f){ae.call(this,Nn.Ma,l),this.size=f}q(Ni,ae);function fn(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){l()},f)}function Kr(){this.g=!0}Kr.prototype.xa=function(){this.g=!1};function qr(l,f,m,_,D,U){l.info(function(){if(l.g)if(U)for(var Y="",Ve=U.split("&"),ot=0;ot<Ve.length;ot++){var Ce=Ve[ot].split("=");if(1<Ce.length){var ct=Ce[0];Ce=Ce[1];var et=ct.split("_");Y=2<=et.length&&et[1]=="type"?Y+(ct+"="+Ce+"&"):Y+(ct+"=redacted&")}}else Y=null;else Y=U;return"XMLHTTP REQ ("+_+") [attempt "+D+"]: "+f+`
`+m+`
`+Y})}function Oi(l,f,m,_,D,U,Y){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+D+"]: "+f+`
`+m+`
`+U+" "+Y})}function dn(l,f,m,_){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+ba(l,m)+(_?" "+_:"")})}function Us(l,f){l.info(function(){return"TIMEOUT: "+f})}Kr.prototype.info=function(){};function ba(l,f){if(!l.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var _=m[l];if(!(2>_.length)){var D=_[1];if(Array.isArray(D)&&!(1>D.length)){var U=D[0];if(U!="noop"&&U!="stop"&&U!="close")for(var Y=1;Y<D.length;Y++)D[Y]=""}}}}return Ds(m)}catch{return f}}var Di={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pn;function Wr(){}q(Wr,Hr),Wr.prototype.g=function(){return new XMLHttpRequest},Wr.prototype.i=function(){return{}},pn=new Wr;function mn(l,f,m,_){this.j=l,this.i=f,this.l=m,this.R=_||1,this.U=new $r(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xo}function Xo(){this.i=null,this.g="",this.h=!1}var bs={},Vi={};function Mi(l,f,m){l.L=1,l.v=gr(Qt(f)),l.m=m,l.P=!0,Bs(l,null)}function Bs(l,f){l.F=Date.now(),Ue(l),l.A=Qt(l.v);var m=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),vr(m.i,"t",_),l.C=0,m=l.j.J,l.h=new Xo,l.g=ml(l.j,m?f:null,!l.m),0<l.O&&(l.M=new zr(j(l.Y,l,l.g),l.O)),f=l.U,m=l.g,_=l.ca;var D="readystatechange";Array.isArray(D)||(D&&(Ns[0]=D.toString()),D=Ns);for(var U=0;U<D.length;U++){var Y=Cs(m,D[U],_||f.handleEvent,!1,f.h||f);if(!Y)break;f.g[Y.key]=Y}f=l.H?E(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),qn(),qr(l.i,l.u,l.A,l.l,l.R,l.m)}mn.prototype.ca=function(l){l=l.target;const f=this.M;f&&Ut(l)==3?f.j():this.Y(l)},mn.prototype.Y=function(l){try{if(l==this.g)e:{const et=Ut(this.g);var f=this.g.Ba();const sn=this.g.Z();if(!(3>et)&&(et!=3||this.g&&(this.h.h||this.g.oa()||qs(this.g)))){this.J||et!=4||f==7||(f==8||0>=sn?qn(3):qn(2)),Qr(this);var m=this.g.Z();this.X=m;t:if(Jo(this)){var _=qs(this.g);l="";var D=_.length,U=Ut(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){nn(this),fr(this);var Y="";break t}this.h.i=new g.TextDecoder}for(f=0;f<D;f++)this.h.h=!0,l+=this.h.i.decode(_[f],{stream:!(U&&f==D-1)});_.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=m==200,Oi(this.i,this.u,this.A,this.l,this.R,et,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,ot=this.g;if((Ve=ot.g?ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ye(Ve)){var Ce=Ve;break t}}Ce=null}if(m=Ce)dn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zs(this,m);else{this.o=!1,this.s=3,Xe(12),nn(this),fr(this);break e}}if(this.P){m=!0;let Xt;for(;!this.J&&this.C<Y.length;)if(Xt=Ba(this,Y),Xt==Vi){et==4&&(this.s=4,Xe(14),m=!1),dn(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==bs){this.s=4,Xe(15),dn(this.i,this.l,Y,"[Invalid Chunk]"),m=!1;break}else dn(this.i,this.l,Xt,null),zs(this,Xt);if(Jo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),et!=4||Y.length!=0||this.h.h||(this.s=1,Xe(16),m=!1),this.o=this.o&&m,!m)dn(this.i,this.l,Y,"[Invalid Chunked Response]"),nn(this),fr(this);else if(0<Y.length&&!this.W){this.W=!0;var ct=this.j;ct.g==this&&ct.ba&&!ct.M&&(ct.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),Qs(ct),ct.M=!0,Xe(11))}}else dn(this.i,this.l,Y,null),zs(this,Y);et==4&&nn(this),this.o&&!this.J&&(et==4?Ki(this.j,this):(this.o=!1,Ue(this)))}else Bi(this.g),m==400&&0<Y.indexOf("Unknown SID")?(this.s=3,Xe(12)):(this.s=0,Xe(13)),nn(this),fr(this)}}}catch{}finally{}};function Jo(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Ba(l,f){var m=l.C,_=f.indexOf(`
`,m);return _==-1?Vi:(m=Number(f.substring(m,_)),isNaN(m)?bs:(_+=1,_+m>f.length?Vi:(f=f.slice(_,_+m),l.C=_+m,f)))}mn.prototype.cancel=function(){this.J=!0,nn(this)};function Ue(l){l.S=Date.now()+l.I,Zo(l,l.I)}function Zo(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=fn(j(l.ba,l),f)}function Qr(l){l.B&&(g.clearTimeout(l.B),l.B=null)}mn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Us(this.i,this.A),this.L!=2&&(qn(),Xe(17)),nn(this),this.s=2,fr(this)):Zo(this,this.S-l)};function fr(l){l.j.G==0||l.J||Ki(l.j,l)}function nn(l){Qr(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,Os(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function zs(l,f){try{var m=l.j;if(m.G!=0&&(m.g==l||Vt(m.h,l))){if(!l.K&&Vt(m.h,l)&&m.G==3){try{var _=m.Da.g.parse(f)}catch{_=null}if(Array.isArray(_)&&_.length==3){var D=_;if(D[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)Gi(m),En(m);else break e;Hi(m),Xe(18)}}else m.za=D[1],0<m.za-m.T&&37500>D[2]&&m.F&&m.v==0&&!m.C&&(m.C=fn(j(m.Za,m),6e3));if(1>=tl(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Jn(m,11)}else if((l.K||m.g==l)&&Gi(m),!ye(f))for(D=m.Da.g.parse(f),f=0;f<D.length;f++){let Ce=D[f];if(m.T=Ce[0],Ce=Ce[1],m.G==2)if(Ce[0]=="c"){m.K=Ce[1],m.ia=Ce[2];const ct=Ce[3];ct!=null&&(m.la=ct,m.j.info("VER="+m.la));const et=Ce[4];et!=null&&(m.Aa=et,m.j.info("SVER="+m.Aa));const sn=Ce[5];sn!=null&&typeof sn=="number"&&0<sn&&(_=1.5*sn,m.L=_,m.j.info("backChannelRequestTimeoutMs_="+_)),_=m;const Xt=l.g;if(Xt){const ni=Xt.g?Xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ni){var U=_.h;U.g||ni.indexOf("spdy")==-1&&ni.indexOf("quic")==-1&&ni.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&($s(U,U.h),U.h=null))}if(_.D){const Wi=Xt.g?Xt.g.getResponseHeader("X-HTTP-Session-Id"):null;Wi&&(_.ya=Wi,Le(_.I,_.D,Wi))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),_=m;var Y=l;if(_.qa=pl(_,_.J?_.ia:null,_.W),Y.K){nl(_.h,Y);var Ve=Y,ot=_.L;ot&&(Ve.I=ot),Ve.B&&(Qr(Ve),Ue(Ve)),_.g=Y}else ti(_);0<m.i.length&&Mn(m)}else Ce[0]!="stop"&&Ce[0]!="close"||Jn(m,7);else m.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?Jn(m,7):vt(m):Ce[0]!="noop"&&m.l&&m.l.ta(Ce),m.v=0)}}qn(4)}catch{}}var el=class{constructor(l,f){this.g=l,this.map=f}};function Yr(l){this.l=l||10,g.PerformanceNavigationTiming?(l=g.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wt(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function tl(l){return l.h?1:l.g?l.g.size:0}function Vt(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function $s(l,f){l.g?l.g.add(f):l.h=f}function nl(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Yr.prototype.cancel=function(){if(this.i=rl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function rl(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const m of l.g.values())f=f.concat(m.D);return f}return J(l.i)}function Li(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(v(l)){for(var f=[],m=l.length,_=0;_<m;_++)f.push(l[_]);return f}f=[],m=0;for(_ in l)f[m++]=l[_];return f}function Fi(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(v(l)||typeof l=="string"){var f=[];l=l.length;for(var m=0;m<l;m++)f.push(m);return f}f=[],m=0;for(const _ in l)f[m++]=_;return f}}}function dr(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(v(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var m=Fi(l),_=Li(l),D=_.length,U=0;U<D;U++)f.call(void 0,_[U],m&&m[U],l)}var Xr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function za(l,f){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var _=l[m].indexOf("="),D=null;if(0<=_){var U=l[m].substring(0,_);D=l[m].substring(_+1)}else U=l[m];f(U,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Wn(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Wn){this.h=l.h,Jr(this,l.j),this.o=l.o,this.g=l.g,pr(this,l.s),this.l=l.l;var f=l.i,m=new On;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),mr(this,m),this.m=l.m}else l&&(f=String(l).match(Xr))?(this.h=!1,Jr(this,f[1]||"",!0),this.o=Se(f[2]||""),this.g=Se(f[3]||"",!0),pr(this,f[4]),this.l=Se(f[5]||"",!0),mr(this,f[6]||"",!0),this.m=Se(f[7]||"")):(this.h=!1,this.i=new On(null,this.h))}Wn.prototype.toString=function(){var l=[],f=this.j;f&&l.push(yr(f,ji,!0),":");var m=this.g;return(m||f=="file")&&(l.push("//"),(f=this.o)&&l.push(yr(f,ji,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(yr(m,m.charAt(0)=="/"?ol:sl,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",yr(m,Hs)),l.join("")};function Qt(l){return new Wn(l)}function Jr(l,f,m){l.j=m?Se(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function pr(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function mr(l,f,m){f instanceof On?(l.i=f,Dn(l.i,l.h)):(m||(f=yr(f,ll)),l.i=new On(f,l.h))}function Le(l,f,m){l.i.set(f,m)}function gr(l){return Le(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Se(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function yr(l,f,m){return typeof l=="string"?(l=encodeURI(l).replace(f,il),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function il(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ji=/[#\/\?@]/g,sl=/[#\?:]/g,ol=/[#\?]/g,ll=/[#\?@]/g,Hs=/#/g;function On(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function yt(l){l.g||(l.g=new Map,l.h=0,l.i&&za(l.i,function(f,m){l.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}i=On.prototype,i.add=function(l,f){yt(this),this.i=null,l=rn(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(f),this.h+=1,this};function gn(l,f){yt(l),f=rn(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function yn(l,f){return yt(l),f=rn(l,f),l.g.has(f)}i.forEach=function(l,f){yt(this),this.g.forEach(function(m,_){m.forEach(function(D){l.call(f,D,_,this)},this)},this)},i.na=function(){yt(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let _=0;_<f.length;_++){const D=l[_];for(let U=0;U<D.length;U++)m.push(f[_])}return m},i.V=function(l){yt(this);let f=[];if(typeof l=="string")yn(this,l)&&(f=f.concat(this.g.get(rn(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)f=f.concat(l[m])}return f},i.set=function(l,f){return yt(this),this.i=null,l=rn(this,l),yn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},i.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function vr(l,f,m){gn(l,f),0<m.length&&(l.i=null,l.g.set(rn(l,f),J(m)),l.h+=m.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var _=f[m];const U=encodeURIComponent(String(_)),Y=this.V(_);for(_=0;_<Y.length;_++){var D=U;Y[_]!==""&&(D+="="+encodeURIComponent(String(Y[_]))),l.push(D)}}return this.i=l.join("&")};function rn(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function Dn(l,f){f&&!l.j&&(yt(l),l.i=null,l.g.forEach(function(m,_){var D=_.toLowerCase();_!=D&&(gn(this,_),vr(this,D,m))},l)),l.j=f}function $a(l,f){const m=new Kr;if(g.Image){const _=new Image;_.onload=B(jt,m,"TestLoadImage: loaded",!0,f,_),_.onerror=B(jt,m,"TestLoadImage: error",!1,f,_),_.onabort=B(jt,m,"TestLoadImage: abort",!1,f,_),_.ontimeout=B(jt,m,"TestLoadImage: timeout",!1,f,_),g.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else f(!1)}function al(l,f){const m=new Kr,_=new AbortController,D=setTimeout(()=>{_.abort(),jt(m,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:_.signal}).then(U=>{clearTimeout(D),U.ok?jt(m,"TestPingServer: ok",!0,f):jt(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(D),jt(m,"TestPingServer: error",!1,f)})}function jt(l,f,m,_,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),_(m)}catch{}}function Ha(){this.g=new Ms}function ul(l,f,m){const _=m||"";try{dr(l,function(D,U){let Y=D;T(D)&&(Y=Ds(D)),f.push(_+U+"="+encodeURIComponent(Y))})}catch(D){throw f.push(_+"type="+encodeURIComponent("_badmap")),D}}function Qn(l){this.l=l.Ub||null,this.j=l.eb||!1}q(Qn,Hr),Qn.prototype.g=function(){return new Zr(this.l,this.j)},Qn.prototype.i=function(l){return function(){return l}}({});function Zr(l,f){it.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}q(Zr,it),i=Zr.prototype,i.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,_n(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||g).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vn(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,_n(this)),this.g&&(this.readyState=3,_n(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cl(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function cl(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?vn(this):_n(this),this.readyState==3&&cl(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,vn(this))},i.Qa=function(l){this.g&&(this.response=l,vn(this))},i.ga=function(){this.g&&vn(this)};function vn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,_n(l)}i.setRequestHeader=function(l,f){this.u.append(l,f)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=f.next();return l.join(`\r
`)};function _n(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Zr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Yn(l){let f="";return ce(l,function(m,_){f+=_,f+=":",f+=m,f+=`\r
`}),f}function _r(l,f,m){e:{for(_ in m){var _=!1;break e}_=!0}_||(m=Yn(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):Le(l,f,m))}function He(l){it.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}q(He,it);var Ga=/^https?$/i,Gs=["POST","PUT"];i=He.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,f,m,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pn.g(),this.v=this.o?xi(this.o):xi(pn),this.g.onreadystatechange=j(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(U){ei(this,U);return}if(l=m||"",m=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var D in _)m.set(D,_[D]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const U of _.keys())m.set(U,_.get(U));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(m.keys()).find(U=>U.toLowerCase()=="content-type"),D=g.FormData&&l instanceof g.FormData,!(0<=Array.prototype.indexOf.call(Gs,f,void 0))||_||D||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,Y]of m)this.g.setRequestHeader(U,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bi(this),this.u=!0,this.g.send(l),this.u=!1}catch(U){ei(this,U)}};function ei(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Ui(l),Yt(l)}function Ui(l){l.A||(l.A=!0,st(l,"complete"),st(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,st(this,"complete"),st(this,"abort"),Yt(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yt(this,!0)),He.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Ks(this):this.bb())},i.bb=function(){Ks(this)};function Ks(l){if(l.h&&typeof p<"u"&&(!l.v[1]||Ut(l)!=4||l.Z()!=2)){if(l.u&&Ut(l)==4)ks(l.Ea,0,l);else if(st(l,"readystatechange"),Ut(l)==4){l.h=!1;try{const Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var _;if(_=Y===0){var D=String(l.D).match(Xr)[1]||null;!D&&g.self&&g.self.location&&(D=g.self.location.protocol.slice(0,-1)),_=!Ga.test(D?D.toLowerCase():"")}m=_}if(m)st(l,"complete"),st(l,"success");else{l.m=6;try{var U=2<Ut(l)?l.g.statusText:""}catch{U=""}l.l=U+" ["+l.Z()+"]",Ui(l)}}finally{Yt(l)}}}}function Yt(l,f){if(l.g){bi(l);const m=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||st(l,"ready");try{m.onreadystatechange=_}catch{}}}function bi(l){l.I&&(g.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function Ut(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<Ut(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Vs(f)}};function qs(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Bi(l){const f={};l=(l.g&&2<=Ut(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(ye(l[_]))continue;var m=k(l[_]);const D=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const U=f[D]||[];f[D]=U,U.push(m)}R(f,function(_){return _.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vn(l,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||f}function Ws(l){this.Aa=0,this.i=[],this.j=new Kr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vn("baseRetryDelayMs",5e3,l),this.cb=Vn("retryDelaySeedMs",1e4,l),this.Wa=Vn("forwardChannelMaxRetries",2,l),this.wa=Vn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Yr(l&&l.concurrentRequestLimit),this.Da=new Ha,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Ws.prototype,i.la=8,i.G=1,i.connect=function(l,f,m,_){Xe(0),this.W=l,this.H=f||{},m&&_!==void 0&&(this.H.OSID=m,this.H.OAID=_),this.F=this.X,this.I=pl(this,null,this.W),Mn(this)};function vt(l){if(zi(l),l.G==3){var f=l.U++,m=Qt(l.I);if(Le(m,"SID",l.K),Le(m,"RID",f),Le(m,"TYPE","terminate"),Xn(l,m),f=new mn(l,l.j,f),f.L=2,f.v=gr(Qt(m)),m=!1,g.navigator&&g.navigator.sendBeacon)try{m=g.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&g.Image&&(new Image().src=f.v,m=!0),m||(f.g=ml(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Ue(f)}dl(l)}function En(l){l.g&&(Qs(l),l.g.cancel(),l.g=null)}function zi(l){En(l),l.u&&(g.clearTimeout(l.u),l.u=null),Gi(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&g.clearTimeout(l.s),l.s=null)}function Mn(l){if(!Wt(l.h)&&!l.s){l.s=!0;var f=l.Ga;Me||te(),Z||(Me(),Z=!0),he.add(f,l),l.B=0}}function Ka(l,f){return tl(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=fn(j(l.Ga,l,f),fl(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const D=new mn(this,this.j,l);let U=this.o;if(this.S&&(U?(U=E(U),C(U,this.S)):U=this.S),this.m!==null||this.O||(D.H=U,U=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var _=this.i[m];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(f+=_,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Er(this,D,f),m=Qt(this.I),Le(m,"RID",l),Le(m,"CVER",22),this.D&&Le(m,"X-HTTP-Session-Id",this.D),Xn(this,m),U&&(this.O?f="headers="+encodeURIComponent(String(Yn(U)))+"&"+f:this.m&&_r(m,this.m,U)),$s(this.h,D),this.Ua&&Le(m,"TYPE","init"),this.P?(Le(m,"$req",f),Le(m,"SID","null"),D.T=!0,Mi(D,m,null)):Mi(D,m,f),this.G=2}}else this.G==3&&(l?$i(this,l):this.i.length==0||Wt(this.h)||$i(this))};function $i(l,f){var m;f?m=f.l:m=l.U++;const _=Qt(l.I);Le(_,"SID",l.K),Le(_,"RID",m),Le(_,"AID",l.T),Xn(l,_),l.m&&l.o&&_r(_,l.m,l.o),m=new mn(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Er(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),$s(l.h,m),Mi(m,_,f)}function Xn(l,f){l.H&&ce(l.H,function(m,_){Le(f,_,m)}),l.l&&dr({},function(m,_){Le(f,_,m)})}function Er(l,f,m){m=Math.min(l.i.length,m);var _=l.l?j(l.l.Na,l.l,l):null;e:{var D=l.i;let U=-1;for(;;){const Y=["count="+m];U==-1?0<m?(U=D[0].g,Y.push("ofs="+U)):U=0:Y.push("ofs="+U);let Ve=!0;for(let ot=0;ot<m;ot++){let Ce=D[ot].g;const ct=D[ot].map;if(Ce-=U,0>Ce)U=Math.max(0,D[ot].g-100),Ve=!1;else try{ul(ct,Y,"req"+Ce+"_")}catch{_&&_(ct)}}if(Ve){_=Y.join("&");break e}}}return l=l.i.splice(0,m),f.D=l,_}function ti(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;Me||te(),Z||(Me(),Z=!0),he.add(f,l),l.v=0}}function Hi(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=fn(j(l.Fa,l),fl(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,hl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=fn(j(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xe(10),En(this),hl(this))};function Qs(l){l.A!=null&&(g.clearTimeout(l.A),l.A=null)}function hl(l){l.g=new mn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Qt(l.qa);Le(f,"RID","rpc"),Le(f,"SID",l.K),Le(f,"AID",l.T),Le(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&Le(f,"TO",l.ja),Le(f,"TYPE","xmlhttp"),Xn(l,f),l.m&&l.o&&_r(f,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=gr(Qt(f)),m.m=null,m.P=!0,Bs(m,l)}i.Za=function(){this.C!=null&&(this.C=null,En(this),Hi(this),Xe(19))};function Gi(l){l.C!=null&&(g.clearTimeout(l.C),l.C=null)}function Ki(l,f){var m=null;if(l.g==f){Gi(l),Qs(l),l.g=null;var _=2}else if(Vt(l.h,f))m=f.D,nl(l.h,f),_=1;else return;if(l.G!=0){if(f.o)if(_==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var D=l.B;_=Gr(),st(_,new Ni(_,m)),Mn(l)}else ti(l);else if(D=f.s,D==3||D==0&&0<f.X||!(_==1&&Ka(l,f)||_==2&&Hi(l)))switch(m&&0<m.length&&(f=l.h,f.i=f.i.concat(m)),D){case 1:Jn(l,5);break;case 4:Jn(l,10);break;case 3:Jn(l,6);break;default:Jn(l,2)}}}function fl(l,f){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*f}function Jn(l,f){if(l.j.info("Error code "+f),f==2){var m=j(l.fb,l),_=l.Xa;const D=!_;_=new Wn(_||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||Jr(_,"https"),gr(_),D?$a(_.toString(),m):al(_.toString(),m)}else Xe(2);l.G=0,l.l&&l.l.sa(f),dl(l),zi(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Xe(2)):(this.j.info("Failed to ping google.com"),Xe(1))};function dl(l){if(l.G=0,l.ka=[],l.l){const f=rl(l.h);(f.length!=0||l.i.length!=0)&&(X(l.ka,f),X(l.ka,l.i),l.h.i.length=0,J(l.i),l.i.length=0),l.l.ra()}}function pl(l,f,m){var _=m instanceof Wn?Qt(m):new Wn(m);if(_.g!="")f&&(_.g=f+"."+_.g),pr(_,_.s);else{var D=g.location;_=D.protocol,f=f?f+"."+D.hostname:D.hostname,D=+D.port;var U=new Wn(null);_&&Jr(U,_),f&&(U.g=f),D&&pr(U,D),m&&(U.l=m),_=U}return m=l.D,f=l.ya,m&&f&&Le(_,m,f),Le(_,"VER",l.la),Xn(l,_),_}function ml(l,f,m){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new He(new Qn({eb:m})):new He(l.pa),f.Ha(l.J),f}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ys(){}i=Ys.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function qi(){}qi.prototype.g=function(l,f){return new Mt(l,f)};function Mt(l,f){it.call(this),this.g=new Ws(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!ye(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!ye(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Ln(this)}q(Mt,it),Mt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mt.prototype.close=function(){vt(this.g)},Mt.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=Ds(l),l=m);f.i.push(new el(f.Ya++,l)),f.G==3&&Mn(f)},Mt.prototype.N=function(){this.g.l=null,delete this.j,vt(this.g),delete this.g,Mt.aa.N.call(this)};function gl(l){kn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const m in f){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}q(gl,kn);function yl(){ki.call(this),this.status=1}q(yl,ki);function Ln(l){this.g=l}q(Ln,Ys),Ln.prototype.ua=function(){st(this.g,"a")},Ln.prototype.ta=function(l){st(this.g,new gl(l))},Ln.prototype.sa=function(l){st(this.g,new yl)},Ln.prototype.ra=function(){st(this.g,"b")},qi.prototype.createWebChannel=qi.prototype.g,Mt.prototype.send=Mt.prototype.o,Mt.prototype.open=Mt.prototype.m,Mt.prototype.close=Mt.prototype.close,Yp=function(){return new qi},Qp=function(){return Gr()},Wp=Nn,xc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Di.NO_ERROR=0,Di.TIMEOUT=8,Di.HTTP_ERROR=6,ya=Di,Yo.COMPLETE="complete",qp=Yo,Pi.EventType=tn,tn.OPEN="a",tn.CLOSE="b",tn.ERROR="c",tn.MESSAGE="d",it.prototype.listen=it.prototype.K,Io=Pi,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,Kp=He}).apply(typeof ha<"u"?ha:typeof self<"u"?self:typeof window<"u"?window:{});const ep="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Kt.UNAUTHENTICATED=new Kt(null),Kt.GOOGLE_CREDENTIALS=new Kt("google-credentials-uid"),Kt.FIRST_PARTY=new Kt("first-party-uid"),Kt.MOCK_USER=new Kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Is="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i=new bp("@firebase/firestore");function To(){return _i.logLevel}function ue(i,...t){if(_i.logLevel<=Pe.DEBUG){const r=t.map($c);_i.debug(`Firestore (${Is}): ${i}`,...r)}}function Ei(i,...t){if(_i.logLevel<=Pe.ERROR){const r=t.map($c);_i.error(`Firestore (${Is}): ${i}`,...r)}}function Pc(i,...t){if(_i.logLevel<=Pe.WARN){const r=t.map($c);_i.warn(`Firestore (${Is}): ${i}`,...r)}}function $c(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(i="Unexpected state"){const t=`FIRESTORE (${Is}) INTERNAL ASSERTION FAILED: `+i;throw Ei(t),new Error(t)}function Ze(i,t){i||Ie()}function Be(i,t){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Ss{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class __{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(Kt.UNAUTHENTICATED))}shutdown(){}}class E_{constructor(t){this.t=t,this.currentUser=Kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){Ze(this.o===void 0);let o=this.i;const u=v=>this.i!==o?(o=this.i,r(v)):Promise.resolve();let h=new gi;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new gi,t.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const v=h;t.enqueueRetryable(async()=>{await v.promise,await u(this.currentUser)})},g=v=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit(v=>g(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new gi)}},0),p()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(o=>this.i!==t?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Ze(typeof o.accessToken=="string"),new v_(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ze(t===null||typeof t=="string"),new Kt(t)}}class w_{constructor(t,r,o){this.l=t,this.h=r,this.P=o,this.type="FirstParty",this.user=Kt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class T_{constructor(t,r,o){this.l=t,this.h=r,this.P=o}getToken(){return Promise.resolve(new w_(this.l,this.h,this.P))}start(t,r){t.enqueueRetryable(()=>r(Kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class S_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class I_{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,r){Ze(this.o===void 0);const o=h=>{h.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const p=h.token!==this.R;return this.R=h.token,ue("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?r(h.token):Promise.resolve()};this.o=h=>{t.enqueueRetryable(()=>o(h))};const u=h=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(h=>u(h)),setTimeout(()=>{if(!this.appCheck){const h=this.A.getImmediate({optional:!0});h?u(h):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(Ze(typeof r.token=="string"),this.R=r.token,new S_(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let o=0;o<i;o++)r[o]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/t.length)*t.length;let o="";for(;o.length<20;){const u=A_(40);for(let h=0;h<u.length;++h)o.length<20&&u[h]<r&&(o+=t.charAt(u[h]%t.length))}return o}}function Fe(i,t){return i<t?-1:i>t?1:0}function vs(i,t,r){return i.length===t.length&&i.every((o,u)=>r(o,t[u]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new ge(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ge(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<-62135596800)throw new ge(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ge(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return gt.fromMillis(Date.now())}static fromDate(t){return gt.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),o=Math.floor(1e6*(t-1e3*r));return new gt(r,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Fe(this.nanoseconds,t.nanoseconds):Fe(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(t){this.timestamp=t}static fromTimestamp(t){return new We(t)}static min(){return new We(new gt(0,0))}static max(){return new We(new gt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(t,r,o){r===void 0?r=0:r>t.length&&Ie(),o===void 0?o=t.length-r:o>t.length-r&&Ie(),this.segments=t,this.offset=r,this.len=o}get length(){return this.len}isEqual(t){return Mo.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof Mo?t.forEach(o=>{r.push(o)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,o=this.limit();r<o;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const o=Math.min(t.length,r.length);for(let u=0;u<o;u++){const h=t.get(u),p=r.get(u);if(h<p)return-1;if(h>p)return 1}return t.length<r.length?-1:t.length>r.length?1:0}}class rt extends Mo{construct(t,r,o){return new rt(t,r,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const o of t){if(o.indexOf("//")>=0)throw new ge(Q.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);r.push(...o.split("/").filter(u=>u.length>0))}return new rt(r)}static emptyPath(){return new rt([])}}const C_=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends Mo{construct(t,r,o){return new St(t,r,o)}static isValidIdentifier(t){return C_.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new St(["__name__"])}static fromServerFormat(t){const r=[];let o="",u=0;const h=()=>{if(o.length===0)throw new ge(Q.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(o),o=""};let p=!1;for(;u<t.length;){const g=t[u];if(g==="\\"){if(u+1===t.length)throw new ge(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const v=t[u+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new ge(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);o+=v,u+=2}else g==="`"?(p=!p,u++):g!=="."||p?(o+=g,u++):(h(),u++)}if(h(),p)throw new ge(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new St(r)}static emptyPath(){return new St([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(t){this.path=t}static fromPath(t){return new _e(rt.fromString(t))}static fromName(t){return new _e(rt.fromString(t).popFirst(5))}static empty(){return new _e(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&rt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return rt.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new _e(new rt(t.slice()))}}function R_(i,t){const r=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=We.fromTimestamp(o===1e9?new gt(r+1,0):new gt(r,o));return new jr(u,_e.empty(),t)}function x_(i){return new jr(i.readTime,i.key,-1)}class jr{constructor(t,r,o){this.readTime=t,this.documentKey=r,this.largestBatchId=o}static min(){return new jr(We.min(),_e.empty(),-1)}static max(){return new jr(We.max(),_e.empty(),-1)}}function P_(i,t){let r=i.readTime.compareTo(t.readTime);return r!==0?r:(r=_e.comparator(i.documentKey,t.documentKey),r!==0?r:Fe(i.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class N_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jp(i){if(i.code!==Q.FAILED_PRECONDITION||i.message!==k_)throw i;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&Ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new K((o,u)=>{this.nextCallback=h=>{this.wrapSuccess(t,h).next(o,u)},this.catchCallback=h=>{this.wrapFailure(r,h).next(o,u)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof K?r:K.resolve(r)}catch(r){return K.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):K.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):K.reject(r)}static resolve(t){return new K((r,o)=>{r(t)})}static reject(t){return new K((r,o)=>{o(t)})}static waitFor(t){return new K((r,o)=>{let u=0,h=0,p=!1;t.forEach(g=>{++u,g.next(()=>{++h,p&&h===u&&r()},v=>o(v))}),p=!0,h===u&&r()})}static or(t){let r=K.resolve(!1);for(const o of t)r=r.next(u=>u?K.resolve(u):o());return r}static forEach(t,r){const o=[];return t.forEach((u,h)=>{o.push(r.call(this,u,h))}),this.waitFor(o)}static mapArray(t,r){return new K((o,u)=>{const h=t.length,p=new Array(h);let g=0;for(let v=0;v<h;v++){const T=v;r(t[T]).next(P=>{p[T]=P,++g,g===h&&o(p)},P=>u(P))}})}static doWhile(t,r){return new K((o,u)=>{const h=()=>{t()===!0?r().next(()=>{h()},u):o()};h()})}}function O_(i){const t=i.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Oa(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ie(o),this.se=o=>r.writeSequenceNumber(o))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}Zp.oe=-1;function Hc(i){return i==null}function Sa(i){return i===0&&1/i==-1/0}function D_(i){return typeof i=="number"&&Number.isInteger(i)&&!Sa(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(i){let t=0;for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&t++;return t}function Go(i,t){for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&t(r,i[r])}function em(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(t,r){this.comparator=t,this.root=r||wt.EMPTY}insert(t,r){return new qt(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(t){return new qt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,wt.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return r.value;o<0?r=r.left:o>0&&(r=r.right)}return null}indexOf(t){let r=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(t,o.key);if(u===0)return r+o.left.size;u<0?o=o.left:(r+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,o)=>(t(r,o),!1))}toString(){const t=[];return this.inorderTraversal((r,o)=>(t.push(`${r}:${o}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new fa(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new fa(this.root,t,this.comparator,!1)}getReverseIterator(){return new fa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new fa(this.root,t,this.comparator,!0)}}class fa{constructor(t,r,o,u){this.isReverse=u,this.nodeStack=[];let h=1;for(;!t.isEmpty();)if(h=r?o(t.key,r):1,r&&u&&(h*=-1),h<0)t=this.isReverse?t.left:t.right;else{if(h===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class wt{constructor(t,r,o,u,h){this.key=t,this.value=r,this.color=o??wt.RED,this.left=u??wt.EMPTY,this.right=h??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,o,u,h){return new wt(t??this.key,r??this.value,o??this.color,u??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let u=this;const h=o(t,u.key);return u=h<0?u.copy(null,null,null,u.left.insert(t,r,o),null):h===0?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let o,u=this;if(r(t,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(t,r),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),r(t,u.key)===0){if(u.right.isEmpty())return wt.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(t,r))}return u.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ie();const t=this.left.check();if(t!==this.right.check())throw Ie();return t+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie()}get value(){throw Ie()}get color(){throw Ie()}get left(){throw Ie()}get right(){throw Ie()}copy(t,r,o,u,h){return this}insert(t,r,o){return new wt(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(t){this.comparator=t,this.data=new qt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,o)=>(t(r),!1))}forEachInRange(t,r){const o=this.data.getIteratorFrom(t[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,t[1])>=0)return;r(u.key)}}forEachWhile(t,r){let o;for(o=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();o.hasNext();)if(!t(o.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new np(this.data.getIterator())}getIteratorFrom(t){return new np(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(o=>{r=r.add(o)}),r}isEqual(t){if(!(t instanceof Dt)||this.size!==t.size)return!1;const r=this.data.getIterator(),o=t.data.getIterator();for(;r.hasNext();){const u=r.getNext().key,h=o.getNext().key;if(this.comparator(u,h)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Dt(this.comparator);return r.data=t,r}}class np{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t){this.fields=t,t.sort(St.comparator)}static empty(){return new Pn([])}unionWith(t){let r=new Dt(St.comparator);for(const o of this.fields)r=r.add(o);for(const o of t)r=r.add(o);return new Pn(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return vs(this.fields,t.fields,(r,o)=>r.isEqual(o))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(u){try{return atob(u)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new V_("Invalid base64 string: "+h):h}}(t);return new Bn(r)}static fromUint8Array(t){const r=function(u){let h="";for(let p=0;p<u.length;++p)h+=String.fromCharCode(u[p]);return h}(t);return new Bn(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const o=new Uint8Array(r.length);for(let u=0;u<r.length;u++)o[u]=r.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Fe(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Bn.EMPTY_BYTE_STRING=new Bn("");const M_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wi(i){if(Ze(!!i),typeof i=="string"){let t=0;const r=M_.exec(i);if(Ze(!!r),r[1]){let u=r[1];u=(u+"000000000").substr(0,9),t=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:t}}return{seconds:Tt(i.seconds),nanos:Tt(i.nanos)}}function Tt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Lo(i){return typeof i=="string"?Bn.fromBase64String(i):Bn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(i){var t,r;return((r=(((t=i?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function tm(i){const t=i.mapValue.fields.__previous_value__;return Gc(t)?tm(t):t}function Ia(i){const t=wi(i.mapValue.fields.__local_write_time__.timestampValue);return new gt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(t,r,o,u,h,p,g,v,T){this.databaseId=t,this.appId=r,this.persistenceKey=o,this.host=u,this.ssl=h,this.forceLongPolling=p,this.autoDetectLongPolling=g,this.longPollingOptions=v,this.useFetchStreams=T}}class Aa{constructor(t,r){this.projectId=t,this.database=r||"(default)"}static empty(){return new Aa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Aa&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da={mapValue:{}};function _s(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Gc(i)?4:j_(i)?9007199254740991:F_(i)?10:11:Ie()}function zn(i,t){if(i===t)return!0;const r=_s(i);if(r!==_s(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return Ia(i).isEqual(Ia(t));case 3:return function(u,h){if(typeof u.timestampValue=="string"&&typeof h.timestampValue=="string"&&u.timestampValue.length===h.timestampValue.length)return u.timestampValue===h.timestampValue;const p=wi(u.timestampValue),g=wi(h.timestampValue);return p.seconds===g.seconds&&p.nanos===g.nanos}(i,t);case 5:return i.stringValue===t.stringValue;case 6:return function(u,h){return Lo(u.bytesValue).isEqual(Lo(h.bytesValue))}(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return function(u,h){return Tt(u.geoPointValue.latitude)===Tt(h.geoPointValue.latitude)&&Tt(u.geoPointValue.longitude)===Tt(h.geoPointValue.longitude)}(i,t);case 2:return function(u,h){if("integerValue"in u&&"integerValue"in h)return Tt(u.integerValue)===Tt(h.integerValue);if("doubleValue"in u&&"doubleValue"in h){const p=Tt(u.doubleValue),g=Tt(h.doubleValue);return p===g?Sa(p)===Sa(g):isNaN(p)&&isNaN(g)}return!1}(i,t);case 9:return vs(i.arrayValue.values||[],t.arrayValue.values||[],zn);case 10:case 11:return function(u,h){const p=u.mapValue.fields||{},g=h.mapValue.fields||{};if(tp(p)!==tp(g))return!1;for(const v in p)if(p.hasOwnProperty(v)&&(g[v]===void 0||!zn(p[v],g[v])))return!1;return!0}(i,t);default:return Ie()}}function Fo(i,t){return(i.values||[]).find(r=>zn(r,t))!==void 0}function Es(i,t){if(i===t)return 0;const r=_s(i),o=_s(t);if(r!==o)return Fe(r,o);switch(r){case 0:case 9007199254740991:return 0;case 1:return Fe(i.booleanValue,t.booleanValue);case 2:return function(h,p){const g=Tt(h.integerValue||h.doubleValue),v=Tt(p.integerValue||p.doubleValue);return g<v?-1:g>v?1:g===v?0:isNaN(g)?isNaN(v)?0:-1:1}(i,t);case 3:return rp(i.timestampValue,t.timestampValue);case 4:return rp(Ia(i),Ia(t));case 5:return Fe(i.stringValue,t.stringValue);case 6:return function(h,p){const g=Lo(h),v=Lo(p);return g.compareTo(v)}(i.bytesValue,t.bytesValue);case 7:return function(h,p){const g=h.split("/"),v=p.split("/");for(let T=0;T<g.length&&T<v.length;T++){const P=Fe(g[T],v[T]);if(P!==0)return P}return Fe(g.length,v.length)}(i.referenceValue,t.referenceValue);case 8:return function(h,p){const g=Fe(Tt(h.latitude),Tt(p.latitude));return g!==0?g:Fe(Tt(h.longitude),Tt(p.longitude))}(i.geoPointValue,t.geoPointValue);case 9:return ip(i.arrayValue,t.arrayValue);case 10:return function(h,p){var g,v,T,P;const M=h.fields||{},j=p.fields||{},B=(g=M.value)===null||g===void 0?void 0:g.arrayValue,q=(v=j.value)===null||v===void 0?void 0:v.arrayValue,J=Fe(((T=B?.values)===null||T===void 0?void 0:T.length)||0,((P=q?.values)===null||P===void 0?void 0:P.length)||0);return J!==0?J:ip(B,q)}(i.mapValue,t.mapValue);case 11:return function(h,p){if(h===da.mapValue&&p===da.mapValue)return 0;if(h===da.mapValue)return 1;if(p===da.mapValue)return-1;const g=h.fields||{},v=Object.keys(g),T=p.fields||{},P=Object.keys(T);v.sort(),P.sort();for(let M=0;M<v.length&&M<P.length;++M){const j=Fe(v[M],P[M]);if(j!==0)return j;const B=Es(g[v[M]],T[P[M]]);if(B!==0)return B}return Fe(v.length,P.length)}(i.mapValue,t.mapValue);default:throw Ie()}}function rp(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return Fe(i,t);const r=wi(i),o=wi(t),u=Fe(r.seconds,o.seconds);return u!==0?u:Fe(r.nanos,o.nanos)}function ip(i,t){const r=i.values||[],o=t.values||[];for(let u=0;u<r.length&&u<o.length;++u){const h=Es(r[u],o[u]);if(h)return h}return Fe(r.length,o.length)}function ws(i){return kc(i)}function kc(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(r){const o=wi(r);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(r){return Lo(r).toBase64()}(i.bytesValue):"referenceValue"in i?function(r){return _e.fromName(r).toString()}(i.referenceValue):"geoPointValue"in i?function(r){return`geo(${r.latitude},${r.longitude})`}(i.geoPointValue):"arrayValue"in i?function(r){let o="[",u=!0;for(const h of r.values||[])u?u=!1:o+=",",o+=kc(h);return o+"]"}(i.arrayValue):"mapValue"in i?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",h=!0;for(const p of o)h?h=!1:u+=",",u+=`${p}:${kc(r.fields[p])}`;return u+"}"}(i.mapValue):Ie()}function Nc(i){return!!i&&"integerValue"in i}function Kc(i){return!!i&&"arrayValue"in i}function va(i){return!!i&&"mapValue"in i}function F_(i){var t,r;return((r=(((t=i?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Ro(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const t={mapValue:{fields:{}}};return Go(i.mapValue.fields,(r,o)=>t.mapValue.fields[r]=Ro(o)),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(i.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=Ro(i.arrayValue.values[r]);return t}return Object.assign({},i)}function j_(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(t){this.value=t}static empty(){return new xn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let o=0;o<t.length-1;++o)if(r=(r.mapValue.fields||{})[t.get(o)],!va(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ro(r)}setAll(t){let r=St.emptyPath(),o={},u=[];t.forEach((p,g)=>{if(!r.isImmediateParentOf(g)){const v=this.getFieldsMap(r);this.applyChanges(v,o,u),o={},u=[],r=g.popLast()}p?o[g.lastSegment()]=Ro(p):u.push(g.lastSegment())});const h=this.getFieldsMap(r);this.applyChanges(h,o,u)}delete(t){const r=this.field(t.popLast());va(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return zn(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let o=0;o<t.length;++o){let u=r.mapValue.fields[t.get(o)];va(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},r.mapValue.fields[t.get(o)]=u),r=u}return r.mapValue.fields}applyChanges(t,r,o){Go(r,(u,h)=>t[u]=h);for(const u of o)delete t[u]}clone(){return new xn(Ro(this.value))}}function nm(i){const t=[];return Go(i.fields,(r,o)=>{const u=new St([r]);if(va(o)){const h=nm(o.mapValue).fields;if(h.length===0)t.push(u);else for(const p of h)t.push(u.child(p))}else t.push(u)}),new Pn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(t,r,o,u,h,p,g){this.key=t,this.documentType=r,this.version=o,this.readTime=u,this.createTime=h,this.data=p,this.documentState=g}static newInvalidDocument(t){return new Rn(t,0,We.min(),We.min(),We.min(),xn.empty(),0)}static newFoundDocument(t,r,o,u){return new Rn(t,1,r,We.min(),o,u,0)}static newNoDocument(t,r){return new Rn(t,2,r,We.min(),We.min(),xn.empty(),0)}static newUnknownDocument(t,r){return new Rn(t,3,r,We.min(),We.min(),xn.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(We.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=xn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=We.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Rn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(t,r){this.position=t,this.inclusive=r}}function sp(i,t,r){let o=0;for(let u=0;u<i.position.length;u++){const h=t[u],p=i.position[u];if(h.field.isKeyField()?o=_e.comparator(_e.fromName(p.referenceValue),r.key):o=Es(p,r.data.field(h.field)),h.dir==="desc"&&(o*=-1),o!==0)break}return o}function op(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let r=0;r<i.position.length;r++)if(!zn(i.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(t,r="asc"){this.field=t,this.dir=r}}function U_(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{}class mt extends rm{constructor(t,r,o){super(),this.field=t,this.op=r,this.value=o}static create(t,r,o){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,o):new B_(t,r,o):r==="array-contains"?new H_(t,o):r==="in"?new G_(t,o):r==="not-in"?new K_(t,o):r==="array-contains-any"?new q_(t,o):new mt(t,r,o)}static createKeyFieldInFilter(t,r,o){return r==="in"?new z_(t,o):new $_(t,o)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Es(r,this.value)):r!==null&&_s(this.value)===_s(r)&&this.matchesComparison(Es(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ur extends rm{constructor(t,r){super(),this.filters=t,this.op=r,this.ae=null}static create(t,r){return new Ur(t,r)}matches(t){return im(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function im(i){return i.op==="and"}function sm(i){return b_(i)&&im(i)}function b_(i){for(const t of i.filters)if(t instanceof Ur)return!1;return!0}function Oc(i){if(i instanceof mt)return i.field.canonicalString()+i.op.toString()+ws(i.value);if(sm(i))return i.filters.map(t=>Oc(t)).join(",");{const t=i.filters.map(r=>Oc(r)).join(",");return`${i.op}(${t})`}}function om(i,t){return i instanceof mt?function(o,u){return u instanceof mt&&o.op===u.op&&o.field.isEqual(u.field)&&zn(o.value,u.value)}(i,t):i instanceof Ur?function(o,u){return u instanceof Ur&&o.op===u.op&&o.filters.length===u.filters.length?o.filters.reduce((h,p,g)=>h&&om(p,u.filters[g]),!0):!1}(i,t):void Ie()}function lm(i){return i instanceof mt?function(r){return`${r.field.canonicalString()} ${r.op} ${ws(r.value)}`}(i):i instanceof Ur?function(r){return r.op.toString()+" {"+r.getFilters().map(lm).join(" ,")+"}"}(i):"Filter"}class B_ extends mt{constructor(t,r,o){super(t,r,o),this.key=_e.fromName(o.referenceValue)}matches(t){const r=_e.comparator(t.key,this.key);return this.matchesComparison(r)}}class z_ extends mt{constructor(t,r){super(t,"in",r),this.keys=am("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class $_ extends mt{constructor(t,r){super(t,"not-in",r),this.keys=am("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function am(i,t){var r;return(((r=t.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(o=>_e.fromName(o.referenceValue))}class H_ extends mt{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return Kc(r)&&Fo(r.arrayValue,this.value)}}class G_ extends mt{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Fo(this.value.arrayValue,r)}}class K_ extends mt{constructor(t,r){super(t,"not-in",r)}matches(t){if(Fo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&!Fo(this.value.arrayValue,r)}}class q_ extends mt{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!Kc(r)||!r.arrayValue.values)&&r.arrayValue.values.some(o=>Fo(this.value.arrayValue,o))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(t,r=null,o=[],u=[],h=null,p=null,g=null){this.path=t,this.collectionGroup=r,this.orderBy=o,this.filters=u,this.limit=h,this.startAt=p,this.endAt=g,this.ue=null}}function lp(i,t=null,r=[],o=[],u=null,h=null,p=null){return new W_(i,t,r,o,u,h,p)}function qc(i){const t=Be(i);if(t.ue===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(o=>Oc(o)).join(","),r+="|ob:",r+=t.orderBy.map(o=>function(h){return h.field.canonicalString()+h.dir}(o)).join(","),Hc(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>ws(o)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>ws(o)).join(",")),t.ue=r}return t.ue}function Wc(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<i.orderBy.length;r++)if(!U_(i.orderBy[r],t.orderBy[r]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let r=0;r<i.filters.length;r++)if(!om(i.filters[r],t.filters[r]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!op(i.startAt,t.startAt)&&op(i.endAt,t.endAt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(t,r=null,o=[],u=[],h=null,p="F",g=null,v=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=o,this.filters=u,this.limit=h,this.limitType=p,this.startAt=g,this.endAt=v,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Q_(i,t,r,o,u,h,p,g){return new Da(i,t,r,o,u,h,p,g)}function Y_(i){return new Da(i)}function ap(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function X_(i){return i.collectionGroup!==null}function xo(i){const t=Be(i);if(t.ce===null){t.ce=[];const r=new Set;for(const h of t.explicitOrderBy)t.ce.push(h),r.add(h.field.canonicalString());const o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(p){let g=new Dt(St.comparator);return p.filters.forEach(v=>{v.getFlattenedFilters().forEach(T=>{T.isInequality()&&(g=g.add(T.field))})}),g})(t).forEach(h=>{r.has(h.canonicalString())||h.isKeyField()||t.ce.push(new Ra(h,o))}),r.has(St.keyField().canonicalString())||t.ce.push(new Ra(St.keyField(),o))}return t.ce}function yi(i){const t=Be(i);return t.le||(t.le=J_(t,xo(i))),t.le}function J_(i,t){if(i.limitType==="F")return lp(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map(u=>{const h=u.dir==="desc"?"asc":"desc";return new Ra(u.field,h)});const r=i.endAt?new Ca(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new Ca(i.startAt.position,i.startAt.inclusive):null;return lp(i.path,i.collectionGroup,t,i.filters,i.limit,r,o)}}function Dc(i,t,r){return new Da(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,r,i.startAt,i.endAt)}function um(i,t){return Wc(yi(i),yi(t))&&i.limitType===t.limitType}function cm(i){return`${qc(yi(i))}|lt:${i.limitType}`}function So(i){return`Query(target=${function(r){let o=r.path.canonicalString();return r.collectionGroup!==null&&(o+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(o+=`, filters: [${r.filters.map(u=>lm(u)).join(", ")}]`),Hc(r.limit)||(o+=", limit: "+r.limit),r.orderBy.length>0&&(o+=`, orderBy: [${r.orderBy.map(u=>function(p){return`${p.field.canonicalString()} (${p.dir})`}(u)).join(", ")}]`),r.startAt&&(o+=", startAt: ",o+=r.startAt.inclusive?"b:":"a:",o+=r.startAt.position.map(u=>ws(u)).join(",")),r.endAt&&(o+=", endAt: ",o+=r.endAt.inclusive?"a:":"b:",o+=r.endAt.position.map(u=>ws(u)).join(",")),`Target(${o})`}(yi(i))}; limitType=${i.limitType})`}function Qc(i,t){return t.isFoundDocument()&&function(o,u){const h=u.key.path;return o.collectionGroup!==null?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(h):_e.isDocumentKey(o.path)?o.path.isEqual(h):o.path.isImmediateParentOf(h)}(i,t)&&function(o,u){for(const h of xo(o))if(!h.field.isKeyField()&&u.data.field(h.field)===null)return!1;return!0}(i,t)&&function(o,u){for(const h of o.filters)if(!h.matches(u))return!1;return!0}(i,t)&&function(o,u){return!(o.startAt&&!function(p,g,v){const T=sp(p,g,v);return p.inclusive?T<=0:T<0}(o.startAt,xo(o),u)||o.endAt&&!function(p,g,v){const T=sp(p,g,v);return p.inclusive?T>=0:T>0}(o.endAt,xo(o),u))}(i,t)}function Z_(i){return(t,r)=>{let o=!1;for(const u of xo(i)){const h=e0(u,t,r);if(h!==0)return h;o=o||u.field.isKeyField()}return 0}}function e0(i,t,r){const o=i.field.isKeyField()?_e.comparator(t.key,r.key):function(h,p,g){const v=p.data.field(h),T=g.data.field(h);return v!==null&&T!==null?Es(v,T):Ie()}(i.field,t,r);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),o=this.inner[r];if(o!==void 0){for(const[u,h]of o)if(this.equalsFn(u,t))return h}}has(t){return this.get(t)!==void 0}set(t,r){const o=this.mapKeyFn(t),u=this.inner[o];if(u===void 0)return this.inner[o]=[[t,r]],void this.innerSize++;for(let h=0;h<u.length;h++)if(this.equalsFn(u[h][0],t))return void(u[h]=[t,r]);u.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return o.length===1?delete this.inner[r]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(t){Go(this.inner,(r,o)=>{for(const[u,h]of o)t(u,h)})}isEmpty(){return em(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0=new qt(_e.comparator);function xa(){return t0}const hm=new qt(_e.comparator);function pa(...i){let t=hm;for(const r of i)t=t.insert(r.key,r);return t}function fm(i){let t=hm;return i.forEach((r,o)=>t=t.insert(r,o.overlayedDocument)),t}function mi(){return Po()}function dm(){return Po()}function Po(){return new As(i=>i.toString(),(i,t)=>i.isEqual(t))}const n0=new qt(_e.comparator),r0=new Dt(_e.comparator);function Nt(...i){let t=r0;for(const r of i)t=t.add(r);return t}const i0=new Dt(Fe);function s0(){return i0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sa(t)?"-0":t}}function pm(i){return{integerValue:""+i}}function o0(i,t){return D_(t)?pm(t):Yc(i,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(){this._=void 0}}function l0(i,t,r){return i instanceof jo?function(u,h){const p={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return h&&Gc(h)&&(h=tm(h)),h&&(p.fields.__previous_value__=h),{mapValue:p}}(r,t):i instanceof Uo?gm(i,t):i instanceof bo?ym(i,t):function(u,h){const p=mm(u,h),g=up(p)+up(u.Pe);return Nc(p)&&Nc(u.Pe)?pm(g):Yc(u.serializer,g)}(i,t)}function a0(i,t,r){return i instanceof Uo?gm(i,t):i instanceof bo?ym(i,t):r}function mm(i,t){return i instanceof Pa?function(o){return Nc(o)||function(h){return!!h&&"doubleValue"in h}(o)}(t)?t:{integerValue:0}:null}class jo extends Va{}class Uo extends Va{constructor(t){super(),this.elements=t}}function gm(i,t){const r=vm(t);for(const o of i.elements)r.some(u=>zn(u,o))||r.push(o);return{arrayValue:{values:r}}}class bo extends Va{constructor(t){super(),this.elements=t}}function ym(i,t){let r=vm(t);for(const o of i.elements)r=r.filter(u=>!zn(u,o));return{arrayValue:{values:r}}}class Pa extends Va{constructor(t,r){super(),this.serializer=t,this.Pe=r}}function up(i){return Tt(i.integerValue||i.doubleValue)}function vm(i){return Kc(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(t,r){this.field=t,this.transform=r}}function c0(i,t){return i.field.isEqual(t.field)&&function(o,u){return o instanceof Uo&&u instanceof Uo||o instanceof bo&&u instanceof bo?vs(o.elements,u.elements,zn):o instanceof Pa&&u instanceof Pa?zn(o.Pe,u.Pe):o instanceof jo&&u instanceof jo}(i.transform,t.transform)}class h0{constructor(t,r){this.version=t,this.transformResults=r}}class lr{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new lr}static exists(t){return new lr(void 0,t)}static updateTime(t){return new lr(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function _a(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class Ma{}function _m(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new wm(i.key,lr.none()):new Ko(i.key,i.data,lr.none());{const r=i.data,o=xn.empty();let u=new Dt(St.comparator);for(let h of t.fields)if(!u.has(h)){let p=r.field(h);p===null&&h.length>1&&(h=h.popLast(),p=r.field(h)),p===null?o.delete(h):o.set(h,p),u=u.add(h)}return new Ti(i.key,o,new Pn(u.toArray()),lr.none())}}function f0(i,t,r){i instanceof Ko?function(u,h,p){const g=u.value.clone(),v=hp(u.fieldTransforms,h,p.transformResults);g.setAll(v),h.convertToFoundDocument(p.version,g).setHasCommittedMutations()}(i,t,r):i instanceof Ti?function(u,h,p){if(!_a(u.precondition,h))return void h.convertToUnknownDocument(p.version);const g=hp(u.fieldTransforms,h,p.transformResults),v=h.data;v.setAll(Em(u)),v.setAll(g),h.convertToFoundDocument(p.version,v).setHasCommittedMutations()}(i,t,r):function(u,h,p){h.convertToNoDocument(p.version).setHasCommittedMutations()}(0,t,r)}function ko(i,t,r,o){return i instanceof Ko?function(h,p,g,v){if(!_a(h.precondition,p))return g;const T=h.value.clone(),P=fp(h.fieldTransforms,v,p);return T.setAll(P),p.convertToFoundDocument(p.version,T).setHasLocalMutations(),null}(i,t,r,o):i instanceof Ti?function(h,p,g,v){if(!_a(h.precondition,p))return g;const T=fp(h.fieldTransforms,v,p),P=p.data;return P.setAll(Em(h)),P.setAll(T),p.convertToFoundDocument(p.version,P).setHasLocalMutations(),g===null?null:g.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(M=>M.field))}(i,t,r,o):function(h,p,g){return _a(h.precondition,p)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):g}(i,t,r)}function d0(i,t){let r=null;for(const o of i.fieldTransforms){const u=t.data.field(o.field),h=mm(o.transform,u||null);h!=null&&(r===null&&(r=xn.empty()),r.set(o.field,h))}return r||null}function cp(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!function(o,u){return o===void 0&&u===void 0||!(!o||!u)&&vs(o,u,(h,p)=>c0(h,p))}(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class Ko extends Ma{constructor(t,r,o,u=[]){super(),this.key=t,this.value=r,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Ti extends Ma{constructor(t,r,o,u,h=[]){super(),this.key=t,this.data=r,this.fieldMask=o,this.precondition=u,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function Em(i){const t=new Map;return i.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const o=i.data.field(r);t.set(r,o)}}),t}function hp(i,t,r){const o=new Map;Ze(i.length===r.length);for(let u=0;u<r.length;u++){const h=i[u],p=h.transform,g=t.data.field(h.field);o.set(h.field,a0(p,g,r[u]))}return o}function fp(i,t,r){const o=new Map;for(const u of i){const h=u.transform,p=r.data.field(u.field);o.set(u.field,l0(h,p,t))}return o}class wm extends Ma{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class p0 extends Ma{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(t,r,o,u){this.batchId=t,this.localWriteTime=r,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(t,r){const o=r.mutationResults;for(let u=0;u<this.mutations.length;u++){const h=this.mutations[u];h.key.isEqual(t.key)&&f0(h,t,o[u])}}applyToLocalView(t,r){for(const o of this.baseMutations)o.key.isEqual(t.key)&&(r=ko(o,t,r,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(t.key)&&(r=ko(o,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const o=dm();return this.mutations.forEach(u=>{const h=t.get(u.key),p=h.overlayedDocument;let g=this.applyToLocalView(p,h.mutatedFields);g=r.has(u.key)?null:g;const v=_m(p,g);v!==null&&o.set(u.key,v),p.isValidDocument()||p.convertToNoDocument(We.min())}),o}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Nt())}isEqual(t){return this.batchId===t.batchId&&vs(this.mutations,t.mutations,(r,o)=>cp(r,o))&&vs(this.baseMutations,t.baseMutations,(r,o)=>cp(r,o))}}class Xc{constructor(t,r,o,u){this.batch=t,this.commitVersion=r,this.mutationResults=o,this.docVersions=u}static from(t,r,o){Ze(t.mutations.length===o.length);let u=function(){return n0}();const h=t.mutations;for(let p=0;p<h.length;p++)u=u.insert(h[p].key,o[p].version);return new Xc(t,r,o,u)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,Re;function y0(i){switch(i){default:return Ie();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function v0(i){if(i===void 0)return Ei("GRPC error has no .code"),Q.UNKNOWN;switch(i){case nt.OK:return Q.OK;case nt.CANCELLED:return Q.CANCELLED;case nt.UNKNOWN:return Q.UNKNOWN;case nt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case nt.INTERNAL:return Q.INTERNAL;case nt.UNAVAILABLE:return Q.UNAVAILABLE;case nt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case nt.NOT_FOUND:return Q.NOT_FOUND;case nt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case nt.ABORTED:return Q.ABORTED;case nt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case nt.DATA_LOSS:return Q.DATA_LOSS;default:return Ie()}}(Re=nt||(nt={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Gp([4294967295,4294967295],0);class _0{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function Vc(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function E0(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function w0(i,t){return Vc(i,t.toTimestamp())}function ys(i){return Ze(!!i),We.fromTimestamp(function(r){const o=wi(r);return new gt(o.seconds,o.nanos)}(i))}function Tm(i,t){return Mc(i,t).canonicalString()}function Mc(i,t){const r=function(u){return new rt(["projects",u.projectId,"databases",u.database])}(i).child("documents");return t===void 0?r:r.child(t)}function T0(i){const t=rt.fromString(i);return Ze(k0(t)),t}function Lc(i,t){return Tm(i.databaseId,t.path)}function S0(i){const t=T0(i);return t.length===4?rt.emptyPath():A0(t)}function I0(i){return new rt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function A0(i){return Ze(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function dp(i,t,r){return{name:Lc(i,t),fields:r.value.mapValue.fields}}function C0(i,t){let r;if(t instanceof Ko)r={update:dp(i,t.key,t.value)};else if(t instanceof wm)r={delete:Lc(i,t.key)};else if(t instanceof Ti)r={update:dp(i,t.key,t.data),updateMask:P0(t.fieldMask)};else{if(!(t instanceof p0))return Ie();r={verify:Lc(i,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(o=>function(h,p){const g=p.transform;if(g instanceof jo)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Uo)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof bo)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Pa)return{fieldPath:p.field.canonicalString(),increment:g.Pe};throw Ie()}(0,o))),t.precondition.isNone||(r.currentDocument=function(u,h){return h.updateTime!==void 0?{updateTime:w0(u,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:Ie()}(i,t.precondition)),r}function R0(i,t){return i&&i.length>0?(Ze(t!==void 0),i.map(r=>function(u,h){let p=u.updateTime?ys(u.updateTime):ys(h);return p.isEqual(We.min())&&(p=ys(h)),new h0(p,u.transformResults||[])}(r,t))):[]}function x0(i){let t=S0(i.parent);const r=i.structuredQuery,o=r.from?r.from.length:0;let u=null;if(o>0){Ze(o===1);const P=r.from[0];P.allDescendants?u=P.collectionId:t=t.child(P.collectionId)}let h=[];r.where&&(h=function(M){const j=Sm(M);return j instanceof Ur&&sm(j)?j.getFilters():[j]}(r.where));let p=[];r.orderBy&&(p=function(M){return M.map(j=>function(q){return new Ra(gs(q.field),function(X){switch(X){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(q.direction))}(j))}(r.orderBy));let g=null;r.limit&&(g=function(M){let j;return j=typeof M=="object"?M.value:M,Hc(j)?null:j}(r.limit));let v=null;r.startAt&&(v=function(M){const j=!!M.before,B=M.values||[];return new Ca(B,j)}(r.startAt));let T=null;return r.endAt&&(T=function(M){const j=!M.before,B=M.values||[];return new Ca(B,j)}(r.endAt)),Q_(t,u,p,h,g,"F",v,T)}function Sm(i){return i.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const o=gs(r.unaryFilter.field);return mt.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=gs(r.unaryFilter.field);return mt.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=gs(r.unaryFilter.field);return mt.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=gs(r.unaryFilter.field);return mt.create(p,"!=",{nullValue:"NULL_VALUE"});default:return Ie()}}(i):i.fieldFilter!==void 0?function(r){return mt.create(gs(r.fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ie()}}(r.fieldFilter.op),r.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(r){return Ur.create(r.compositeFilter.filters.map(o=>Sm(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return Ie()}}(r.compositeFilter.op))}(i):Ie()}function gs(i){return St.fromServerFormat(i.fieldPath)}function P0(i){const t=[];return i.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function k0(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(t){this.ct=t}}function O0(i){const t=x0({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Dc(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(){this.un=new V0}addToCollectionParentIndex(t,r){return this.un.add(r),K.resolve()}getCollectionParents(t,r){return K.resolve(this.un.getEntries(r))}addFieldIndex(t,r){return K.resolve()}deleteFieldIndex(t,r){return K.resolve()}deleteAllFieldIndexes(t){return K.resolve()}createTargetIndexes(t,r){return K.resolve()}getDocumentsMatchingTarget(t,r){return K.resolve(null)}getIndexType(t,r){return K.resolve(0)}getFieldIndexes(t,r){return K.resolve([])}getNextCollectionGroupToUpdate(t){return K.resolve(null)}getMinOffset(t,r){return K.resolve(jr.min())}getMinOffsetFromCollectionGroup(t,r){return K.resolve(jr.min())}updateCollectionGroup(t,r,o){return K.resolve()}updateIndexEntries(t,r){return K.resolve()}}class V0{constructor(){this.index={}}add(t){const r=t.lastSegment(),o=t.popLast(),u=this.index[r]||new Dt(rt.comparator),h=!u.has(o);return this.index[r]=u.add(o),h}has(t){const r=t.lastSegment(),o=t.popLast(),u=this.index[r];return u&&u.has(o)}getEntries(t){return(this.index[t]||new Dt(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ts(0)}static kn(){return new Ts(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(){this.changes=new As(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,Rn.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const o=this.changes.get(r);return o!==void 0?K.resolve(o):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(t,r,o,u){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=o,this.indexManager=u}getDocument(t,r){let o=null;return this.documentOverlayCache.getOverlay(t,r).next(u=>(o=u,this.remoteDocumentCache.getEntry(t,r))).next(u=>(o!==null&&ko(o.mutation,u,Pn.empty(),gt.now()),u))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(o=>this.getLocalViewOfDocuments(t,o,Nt()).next(()=>o))}getLocalViewOfDocuments(t,r,o=Nt()){const u=mi();return this.populateOverlays(t,u,r).next(()=>this.computeViews(t,r,u,o).next(h=>{let p=pa();return h.forEach((g,v)=>{p=p.insert(g,v.overlayedDocument)}),p}))}getOverlayedDocuments(t,r){const o=mi();return this.populateOverlays(t,o,r).next(()=>this.computeViews(t,r,o,Nt()))}populateOverlays(t,r,o){const u=[];return o.forEach(h=>{r.has(h)||u.push(h)}),this.documentOverlayCache.getOverlays(t,u).next(h=>{h.forEach((p,g)=>{r.set(p,g)})})}computeViews(t,r,o,u){let h=xa();const p=Po(),g=function(){return Po()}();return r.forEach((v,T)=>{const P=o.get(T.key);u.has(T.key)&&(P===void 0||P.mutation instanceof Ti)?h=h.insert(T.key,T):P!==void 0?(p.set(T.key,P.mutation.getFieldMask()),ko(P.mutation,T,P.mutation.getFieldMask(),gt.now())):p.set(T.key,Pn.empty())}),this.recalculateAndSaveOverlays(t,h).next(v=>(v.forEach((T,P)=>p.set(T,P)),r.forEach((T,P)=>{var M;return g.set(T,new L0(P,(M=p.get(T))!==null&&M!==void 0?M:null))}),g))}recalculateAndSaveOverlays(t,r){const o=Po();let u=new qt((p,g)=>p-g),h=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(p=>{for(const g of p)g.keys().forEach(v=>{const T=r.get(v);if(T===null)return;let P=o.get(v)||Pn.empty();P=g.applyToLocalView(T,P),o.set(v,P);const M=(u.get(g.batchId)||Nt()).add(v);u=u.insert(g.batchId,M)})}).next(()=>{const p=[],g=u.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),T=v.key,P=v.value,M=dm();P.forEach(j=>{if(!h.has(j)){const B=_m(r.get(j),o.get(j));B!==null&&M.set(j,B),h=h.add(j)}}),p.push(this.documentOverlayCache.saveOverlays(t,T,M))}return K.waitFor(p)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(o=>this.recalculateAndSaveOverlays(t,o))}getDocumentsMatchingQuery(t,r,o,u){return function(p){return _e.isDocumentKey(p.path)&&p.collectionGroup===null&&p.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):X_(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,o,u):this.getDocumentsMatchingCollectionQuery(t,r,o,u)}getNextDocuments(t,r,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,o,u).next(h=>{const p=u-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,o.largestBatchId,u-h.size):K.resolve(mi());let g=-1,v=h;return p.next(T=>K.forEach(T,(P,M)=>(g<M.largestBatchId&&(g=M.largestBatchId),h.get(P)?K.resolve():this.remoteDocumentCache.getEntry(t,P).next(j=>{v=v.insert(P,j)}))).next(()=>this.populateOverlays(t,T,h)).next(()=>this.computeViews(t,v,T,Nt())).next(P=>({batchId:g,changes:fm(P)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new _e(r)).next(o=>{let u=pa();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(t,r,o,u){const h=r.collectionGroup;let p=pa();return this.indexManager.getCollectionParents(t,h).next(g=>K.forEach(g,v=>{const T=function(M,j){return new Da(j,null,M.explicitOrderBy.slice(),M.filters.slice(),M.limit,M.limitType,M.startAt,M.endAt)}(r,v.child(h));return this.getDocumentsMatchingCollectionQuery(t,T,o,u).next(P=>{P.forEach((M,j)=>{p=p.insert(M,j)})})}).next(()=>p))}getDocumentsMatchingCollectionQuery(t,r,o,u){let h;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,o.largestBatchId).next(p=>(h=p,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,o,h,u))).next(p=>{h.forEach((v,T)=>{const P=T.getKey();p.get(P)===null&&(p=p.insert(P,Rn.newInvalidDocument(P)))});let g=pa();return p.forEach((v,T)=>{const P=h.get(v);P!==void 0&&ko(P.mutation,T,Pn.empty(),gt.now()),Qc(r,T)&&(g=g.insert(v,T))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,r){return K.resolve(this.hr.get(r))}saveBundleMetadata(t,r){return this.hr.set(r.id,function(u){return{id:u.id,version:u.version,createTime:ys(u.createTime)}}(r)),K.resolve()}getNamedQuery(t,r){return K.resolve(this.Pr.get(r))}saveNamedQuery(t,r){return this.Pr.set(r.name,function(u){return{name:u.name,query:O0(u.bundledQuery),readTime:ys(u.readTime)}}(r)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(){this.overlays=new qt(_e.comparator),this.Ir=new Map}getOverlay(t,r){return K.resolve(this.overlays.get(r))}getOverlays(t,r){const o=mi();return K.forEach(r,u=>this.getOverlay(t,u).next(h=>{h!==null&&o.set(u,h)})).next(()=>o)}saveOverlays(t,r,o){return o.forEach((u,h)=>{this.ht(t,r,h)}),K.resolve()}removeOverlaysForBatchId(t,r,o){const u=this.Ir.get(o);return u!==void 0&&(u.forEach(h=>this.overlays=this.overlays.remove(h)),this.Ir.delete(o)),K.resolve()}getOverlaysForCollection(t,r,o){const u=mi(),h=r.length+1,p=new _e(r.child("")),g=this.overlays.getIteratorFrom(p);for(;g.hasNext();){const v=g.getNext().value,T=v.getKey();if(!r.isPrefixOf(T.path))break;T.path.length===h&&v.largestBatchId>o&&u.set(v.getKey(),v)}return K.resolve(u)}getOverlaysForCollectionGroup(t,r,o,u){let h=new qt((T,P)=>T-P);const p=this.overlays.getIterator();for(;p.hasNext();){const T=p.getNext().value;if(T.getKey().getCollectionGroup()===r&&T.largestBatchId>o){let P=h.get(T.largestBatchId);P===null&&(P=mi(),h=h.insert(T.largestBatchId,P)),P.set(T.getKey(),T)}}const g=mi(),v=h.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((T,P)=>g.set(T,P)),!(g.size()>=u)););return K.resolve(g)}ht(t,r,o){const u=this.overlays.get(o.key);if(u!==null){const p=this.Ir.get(u.largestBatchId).delete(o.key);this.Ir.set(u.largestBatchId,p)}this.overlays=this.overlays.insert(o.key,new g0(r,o));let h=this.Ir.get(r);h===void 0&&(h=Nt(),this.Ir.set(r,h)),this.Ir.set(r,h.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(){this.sessionToken=Bn.EMPTY_BYTE_STRING}getSessionToken(t){return K.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(){this.Tr=new Dt(pt.Er),this.dr=new Dt(pt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,r){const o=new pt(t,r);this.Tr=this.Tr.add(o),this.dr=this.dr.add(o)}Rr(t,r){t.forEach(o=>this.addReference(o,r))}removeReference(t,r){this.Vr(new pt(t,r))}mr(t,r){t.forEach(o=>this.removeReference(o,r))}gr(t){const r=new _e(new rt([])),o=new pt(r,t),u=new pt(r,t+1),h=[];return this.dr.forEachInRange([o,u],p=>{this.Vr(p),h.push(p.key)}),h}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const r=new _e(new rt([])),o=new pt(r,t),u=new pt(r,t+1);let h=Nt();return this.dr.forEachInRange([o,u],p=>{h=h.add(p.key)}),h}containsKey(t){const r=new pt(t,0),o=this.Tr.firstAfterOrEqual(r);return o!==null&&t.isEqual(o.key)}}class pt{constructor(t,r){this.key=t,this.wr=r}static Er(t,r){return _e.comparator(t.key,r.key)||Fe(t.wr,r.wr)}static Ar(t,r){return Fe(t.wr,r.wr)||_e.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Dt(pt.Er)}checkEmpty(t){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,o,u){const h=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const p=new m0(h,r,o,u);this.mutationQueue.push(p);for(const g of u)this.br=this.br.add(new pt(g.key,h)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return K.resolve(p)}lookupMutationBatch(t,r){return K.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(t,r){const o=r+1,u=this.vr(o),h=u<0?0:u;return K.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const o=new pt(r,0),u=new pt(r,Number.POSITIVE_INFINITY),h=[];return this.br.forEachInRange([o,u],p=>{const g=this.Dr(p.wr);h.push(g)}),K.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(t,r){let o=new Dt(Fe);return r.forEach(u=>{const h=new pt(u,0),p=new pt(u,Number.POSITIVE_INFINITY);this.br.forEachInRange([h,p],g=>{o=o.add(g.wr)})}),K.resolve(this.Cr(o))}getAllMutationBatchesAffectingQuery(t,r){const o=r.path,u=o.length+1;let h=o;_e.isDocumentKey(h)||(h=h.child(""));const p=new pt(new _e(h),0);let g=new Dt(Fe);return this.br.forEachWhile(v=>{const T=v.key.path;return!!o.isPrefixOf(T)&&(T.length===u&&(g=g.add(v.wr)),!0)},p),K.resolve(this.Cr(g))}Cr(t){const r=[];return t.forEach(o=>{const u=this.Dr(o);u!==null&&r.push(u)}),r}removeMutationBatch(t,r){Ze(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let o=this.br;return K.forEach(r.mutations,u=>{const h=new pt(u.key,r.batchId);return o=o.delete(h),this.referenceDelegate.markPotentiallyOrphaned(t,u.key)}).next(()=>{this.br=o})}On(t){}containsKey(t,r){const o=new pt(r,0),u=this.br.firstAfterOrEqual(o);return K.resolve(r.isEqual(u&&u.key))}performConsistencyCheck(t){return this.mutationQueue.length,K.resolve()}Fr(t,r){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){const r=this.vr(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(t){this.Mr=t,this.docs=function(){return new qt(_e.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const o=r.key,u=this.docs.get(o),h=u?u.size:0,p=this.Mr(r);return this.docs=this.docs.insert(o,{document:r.mutableCopy(),size:p}),this.size+=p-h,this.indexManager.addToCollectionParentIndex(t,o.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const o=this.docs.get(r);return K.resolve(o?o.document.mutableCopy():Rn.newInvalidDocument(r))}getEntries(t,r){let o=xa();return r.forEach(u=>{const h=this.docs.get(u);o=o.insert(u,h?h.document.mutableCopy():Rn.newInvalidDocument(u))}),K.resolve(o)}getDocumentsMatchingQuery(t,r,o,u){let h=xa();const p=r.path,g=new _e(p.child("")),v=this.docs.getIteratorFrom(g);for(;v.hasNext();){const{key:T,value:{document:P}}=v.getNext();if(!p.isPrefixOf(T.path))break;T.path.length>p.length+1||P_(x_(P),o)<=0||(u.has(P.key)||Qc(r,P))&&(h=h.insert(P.key,P.mutableCopy()))}return K.resolve(h)}getAllFromCollectionGroup(t,r,o,u){Ie()}Or(t,r){return K.forEach(this.docs,o=>r(o))}newChangeBuffer(t){return new $0(this)}getSize(t){return K.resolve(this.size)}}class $0 extends M0{constructor(t){super(),this.cr=t}applyChanges(t){const r=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?r.push(this.cr.addEntry(t,u)):this.cr.removeEntry(o)}),K.waitFor(r)}getFromCache(t,r){return this.cr.getEntry(t,r)}getAllFromCache(t,r){return this.cr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(t){this.persistence=t,this.Nr=new As(r=>qc(r),Wc),this.lastRemoteSnapshotVersion=We.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Jc,this.targetCount=0,this.kr=Ts.Bn()}forEachTarget(t,r){return this.Nr.forEach((o,u)=>r(u)),K.resolve()}getLastRemoteSnapshotVersion(t){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return K.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(t,r,o){return o&&(this.lastRemoteSnapshotVersion=o),r>this.Lr&&(this.Lr=r),K.resolve()}Kn(t){this.Nr.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.kr=new Ts(r),this.highestTargetId=r),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,r){return this.Kn(r),this.targetCount+=1,K.resolve()}updateTargetData(t,r){return this.Kn(r),K.resolve()}removeTargetData(t,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,K.resolve()}removeTargets(t,r,o){let u=0;const h=[];return this.Nr.forEach((p,g)=>{g.sequenceNumber<=r&&o.get(g.targetId)===null&&(this.Nr.delete(p),h.push(this.removeMatchingKeysForTargetId(t,g.targetId)),u++)}),K.waitFor(h).next(()=>u)}getTargetCount(t){return K.resolve(this.targetCount)}getTargetData(t,r){const o=this.Nr.get(r)||null;return K.resolve(o)}addMatchingKeys(t,r,o){return this.Br.Rr(r,o),K.resolve()}removeMatchingKeys(t,r,o){this.Br.mr(r,o);const u=this.persistence.referenceDelegate,h=[];return u&&r.forEach(p=>{h.push(u.markPotentiallyOrphaned(t,p))}),K.waitFor(h)}removeMatchingKeysForTargetId(t,r){return this.Br.gr(r),K.resolve()}getMatchingKeysForTargetId(t,r){const o=this.Br.yr(r);return K.resolve(o)}containsKey(t,r){return K.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(t,r){this.qr={},this.overlays={},this.Qr=new Zp(0),this.Kr=!1,this.Kr=!0,this.$r=new b0,this.referenceDelegate=t(this),this.Ur=new H0(this),this.indexManager=new D0,this.remoteDocumentCache=function(u){return new z0(u)}(o=>this.referenceDelegate.Wr(o)),this.serializer=new N0(r),this.Gr=new j0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new U0,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let o=this.qr[t.toKey()];return o||(o=new B0(r,this.referenceDelegate),this.qr[t.toKey()]=o),o}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,r,o){ue("MemoryPersistence","Starting transaction:",t);const u=new K0(this.Qr.next());return this.referenceDelegate.zr(),o(u).next(h=>this.referenceDelegate.jr(u).next(()=>h)).toPromise().then(h=>(u.raiseOnCommittedEvent(),h))}Hr(t,r){return K.or(Object.values(this.qr).map(o=>()=>o.containsKey(t,r)))}}class K0 extends N_{constructor(t){super(),this.currentSequenceNumber=t}}class Zc{constructor(t){this.persistence=t,this.Jr=new Jc,this.Yr=null}static Zr(t){return new Zc(t)}get Xr(){if(this.Yr)return this.Yr;throw Ie()}addReference(t,r,o){return this.Jr.addReference(o,r),this.Xr.delete(o.toString()),K.resolve()}removeReference(t,r,o){return this.Jr.removeReference(o,r),this.Xr.add(o.toString()),K.resolve()}markPotentiallyOrphaned(t,r){return this.Xr.add(r.toString()),K.resolve()}removeTarget(t,r){this.Jr.gr(r.targetId).forEach(u=>this.Xr.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(t,r.targetId).next(u=>{u.forEach(h=>this.Xr.add(h.toString()))}).next(()=>o.removeTargetData(t,r))}zr(){this.Yr=new Set}jr(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.Xr,o=>{const u=_e.fromPath(o);return this.ei(t,u).next(h=>{h||r.removeEntry(u,We.min())})}).next(()=>(this.Yr=null,r.apply(t)))}updateLimboDocument(t,r){return this.ei(t,r).next(o=>{o?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(t){return 0}ei(t,r){return K.or([()=>K.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Hr(t,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(t,r,o,u){this.targetId=t,this.fromCache=r,this.$i=o,this.Ui=u}static Wi(t,r){let o=Nt(),u=Nt();for(const h of r.docChanges)switch(h.type){case 0:o=o.add(h.doc.key);break;case 1:u=u.add(h.doc.key)}return new eh(t,r.fromCache,o,u)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return av()?8:O_(ov())>0?6:4}()}initialize(t,r){this.Ji=t,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(t,r,o,u){const h={result:null};return this.Yi(t,r).next(p=>{h.result=p}).next(()=>{if(!h.result)return this.Zi(t,r,u,o).next(p=>{h.result=p})}).next(()=>{if(h.result)return;const p=new q0;return this.Xi(t,r,p).next(g=>{if(h.result=g,this.zi)return this.es(t,r,p,g.size)})}).next(()=>h.result)}es(t,r,o,u){return o.documentReadCount<this.ji?(To()<=Pe.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",So(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),K.resolve()):(To()<=Pe.DEBUG&&ue("QueryEngine","Query:",So(r),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.Hi*u?(To()<=Pe.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",So(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,yi(r))):K.resolve())}Yi(t,r){if(ap(r))return K.resolve(null);let o=yi(r);return this.indexManager.getIndexType(t,o).next(u=>u===0?null:(r.limit!==null&&u===1&&(r=Dc(r,null,"F"),o=yi(r)),this.indexManager.getDocumentsMatchingTarget(t,o).next(h=>{const p=Nt(...h);return this.Ji.getDocuments(t,p).next(g=>this.indexManager.getMinOffset(t,o).next(v=>{const T=this.ts(r,g);return this.ns(r,T,p,v.readTime)?this.Yi(t,Dc(r,null,"F")):this.rs(t,T,r,v)}))})))}Zi(t,r,o,u){return ap(r)||u.isEqual(We.min())?K.resolve(null):this.Ji.getDocuments(t,o).next(h=>{const p=this.ts(r,h);return this.ns(r,p,o,u)?K.resolve(null):(To()<=Pe.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),So(r)),this.rs(t,p,r,R_(u,-1)).next(g=>g))})}ts(t,r){let o=new Dt(Z_(t));return r.forEach((u,h)=>{Qc(t,h)&&(o=o.add(h))}),o}ns(t,r,o,u){if(t.limit===null)return!1;if(o.size!==r.size)return!0;const h=t.limitType==="F"?r.last():r.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(u)>0)}Xi(t,r,o){return To()<=Pe.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",So(r)),this.Ji.getDocumentsMatchingQuery(t,r,jr.min(),o)}rs(t,r,o,u){return this.Ji.getDocumentsMatchingQuery(t,o,u).next(h=>(r.forEach(p=>{h=h.insert(p.key,p)}),h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(t,r,o,u){this.persistence=t,this.ss=r,this.serializer=u,this.os=new qt(Fe),this._s=new As(h=>qc(h),Wc),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(o)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new F0(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.os))}}function Y0(i,t,r,o){return new Q0(i,t,r,o)}async function Im(i,t){const r=Be(i);return await r.persistence.runTransaction("Handle user change","readonly",o=>{let u;return r.mutationQueue.getAllMutationBatches(o).next(h=>(u=h,r.ls(t),r.mutationQueue.getAllMutationBatches(o))).next(h=>{const p=[],g=[];let v=Nt();for(const T of u){p.push(T.batchId);for(const P of T.mutations)v=v.add(P.key)}for(const T of h){g.push(T.batchId);for(const P of T.mutations)v=v.add(P.key)}return r.localDocuments.getDocuments(o,v).next(T=>({hs:T,removedBatchIds:p,addedBatchIds:g}))})})}function X0(i,t){const r=Be(i);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=t.batch.keys(),h=r.cs.newChangeBuffer({trackRemovals:!0});return function(g,v,T,P){const M=T.batch,j=M.keys();let B=K.resolve();return j.forEach(q=>{B=B.next(()=>P.getEntry(v,q)).next(J=>{const X=T.docVersions.get(q);Ze(X!==null),J.version.compareTo(X)<0&&(M.applyToRemoteDocument(J,T),J.isValidDocument()&&(J.setReadTime(T.commitVersion),P.addEntry(J)))})}),B.next(()=>g.mutationQueue.removeMutationBatch(v,M))}(r,o,t,h).next(()=>h.apply(o)).next(()=>r.mutationQueue.performConsistencyCheck(o)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(o,u,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(g){let v=Nt();for(let T=0;T<g.mutationResults.length;++T)g.mutationResults[T].transformResults.length>0&&(v=v.add(g.batch.mutations[T].key));return v}(t))).next(()=>r.localDocuments.getDocuments(o,u))})}function J0(i){const t=Be(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Ur.getLastRemoteSnapshotVersion(r))}function Z0(i,t){const r=Be(i);return r.persistence.runTransaction("Get next mutation batch","readonly",o=>(t===void 0&&(t=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(o,t)))}class pp{constructor(){this.activeTargetIds=s0()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class eE{constructor(){this.so=new pp,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,o){}addLocalQueryTarget(t,r=!0){return r&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,r,o){this.oo[t]=r}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new pp,Promise.resolve()}handleUserChange(t,r,o){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{_o(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ma=null;function wc(){return ma===null?ma=function(){return 268435456+Math.round(2147483648*Math.random())}():ma++,"0x"+ma.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kt="WebChannelConnection";class iE extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const o=r.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),h=encodeURIComponent(this.databaseId.database);this.Do=o+"://"+r.host,this.vo=`projects/${u}/databases/${h}`,this.Co=this.databaseId.database==="(default)"?`project_id=${u}`:`project_id=${u}&database_id=${h}`}get Fo(){return!1}Mo(r,o,u,h,p){const g=wc(),v=this.xo(r,o.toUriEncodedString());ue("RestConnection",`Sending RPC '${r}' ${g}:`,v,u);const T={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(T,h,p),this.No(r,v,T,u).then(P=>(ue("RestConnection",`Received RPC '${r}' ${g}: `,P),P),P=>{throw Pc("RestConnection",`RPC '${r}' ${g} failed with error: `,P,"url: ",v,"request:",u),P})}Lo(r,o,u,h,p,g){return this.Mo(r,o,u,h,p)}Oo(r,o,u){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Is}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((h,p)=>r[p]=h),u&&u.headers.forEach((h,p)=>r[p]=h)}xo(r,o){const u=nE[r];return`${this.Do}/v1/${o}:${u}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,r,o,u){const h=wc();return new Promise((p,g)=>{const v=new Kp;v.setWithCredentials(!0),v.listenOnce(qp.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case ya.NO_ERROR:const P=v.getResponseJson();ue(kt,`XHR for RPC '${t}' ${h} received:`,JSON.stringify(P)),p(P);break;case ya.TIMEOUT:ue(kt,`RPC '${t}' ${h} timed out`),g(new ge(Q.DEADLINE_EXCEEDED,"Request time out"));break;case ya.HTTP_ERROR:const M=v.getStatus();if(ue(kt,`RPC '${t}' ${h} failed with status:`,M,"response text:",v.getResponseText()),M>0){let j=v.getResponseJson();Array.isArray(j)&&(j=j[0]);const B=j?.error;if(B&&B.status&&B.message){const q=function(X){const Ee=X.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(Ee)>=0?Ee:Q.UNKNOWN}(B.status);g(new ge(q,B.message))}else g(new ge(Q.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new ge(Q.UNAVAILABLE,"Connection failed."));break;default:Ie()}}finally{ue(kt,`RPC '${t}' ${h} completed.`)}});const T=JSON.stringify(u);ue(kt,`RPC '${t}' ${h} sending request:`,u),v.send(r,"POST",T,o,15)})}Bo(t,r,o){const u=wc(),h=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],p=Yp(),g=Qp(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},T=this.longPollingOptions.timeoutSeconds;T!==void 0&&(v.longPollingTimeout=Math.round(1e3*T)),this.useFetchStreams&&(v.useFetchStreams=!0),this.Oo(v.initMessageHeaders,r,o),v.encodeInitMessageHeaders=!0;const P=h.join("");ue(kt,`Creating RPC '${t}' stream ${u}: ${P}`,v);const M=p.createWebChannel(P,v);let j=!1,B=!1;const q=new rE({Io:X=>{B?ue(kt,`Not sending because RPC '${t}' stream ${u} is closed:`,X):(j||(ue(kt,`Opening RPC '${t}' stream ${u} transport.`),M.open(),j=!0),ue(kt,`RPC '${t}' stream ${u} sending:`,X),M.send(X))},To:()=>M.close()}),J=(X,Ee,ye)=>{X.listen(Ee,se=>{try{ye(se)}catch(le){setTimeout(()=>{throw le},0)}})};return J(M,Io.EventType.OPEN,()=>{B||(ue(kt,`RPC '${t}' stream ${u} transport opened.`),q.yo())}),J(M,Io.EventType.CLOSE,()=>{B||(B=!0,ue(kt,`RPC '${t}' stream ${u} transport closed`),q.So())}),J(M,Io.EventType.ERROR,X=>{B||(B=!0,Pc(kt,`RPC '${t}' stream ${u} transport errored:`,X),q.So(new ge(Q.UNAVAILABLE,"The operation could not be completed")))}),J(M,Io.EventType.MESSAGE,X=>{var Ee;if(!B){const ye=X.data[0];Ze(!!ye);const se=ye,le=se.error||((Ee=se[0])===null||Ee===void 0?void 0:Ee.error);if(le){ue(kt,`RPC '${t}' stream ${u} received error:`,le);const me=le.status;let ce=function(S){const C=nt[S];if(C!==void 0)return v0(C)}(me),R=le.message;ce===void 0&&(ce=Q.INTERNAL,R="Unknown error status: "+me+" with message "+le.message),B=!0,q.So(new ge(ce,R)),M.close()}else ue(kt,`RPC '${t}' stream ${u} received:`,ye),q.bo(ye)}}),J(g,Wp.STAT_EVENT,X=>{X.stat===xc.PROXY?ue(kt,`RPC '${t}' stream ${u} detected buffering proxy`):X.stat===xc.NOPROXY&&ue(kt,`RPC '${t}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{q.wo()},0),q}}function Tc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(i){return new _0(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(t,r,o=1e3,u=1.5,h=6e4){this.ui=t,this.timerId=r,this.ko=o,this.qo=u,this.Qo=h,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const r=Math.floor(this.Ko+this.zo()),o=Math.max(0,Date.now()-this.Uo),u=Math.max(0,r-o);u>0&&ue("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${o} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,u,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(t,r,o,u,h,p,g,v){this.ui=t,this.Ho=o,this.Jo=u,this.connection=h,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Am(t,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():r&&r.code===Q.RESOURCE_EXHAUSTED?(Ei(r.toString()),Ei("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(r)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Yo===r&&this.P_(o,u)},o=>{t(()=>{const u=new ge(Q.UNKNOWN,"Fetching auth token failed: "+o.message);return this.I_(u)})})}P_(t,r){const o=this.h_(this.Yo);this.stream=this.T_(t,r),this.stream.Eo(()=>{o(()=>this.listener.Eo())}),this.stream.Ro(()=>{o(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(u=>{o(()=>this.I_(u))}),this.stream.onMessage(u=>{o(()=>++this.e_==1?this.E_(u):this.onNext(u))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(t){return ue("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return r=>{this.ui.enqueueAndForget(()=>this.Yo===t?r():(ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oE extends sE{constructor(t,r,o,u,h,p){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,o,u,p),this.serializer=h}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,r){return this.connection.Bo("Write",t,r)}E_(t){return Ze(!!t.streamToken),this.lastStreamToken=t.streamToken,Ze(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){Ze(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const r=R0(t.writeResults,t.commitTime),o=ys(t.commitTime);return this.listener.g_(o,r)}p_(){const t={};t.database=I0(this.serializer),this.a_(t)}m_(t){const r={streamToken:this.lastStreamToken,writes:t.map(o=>C0(this.serializer,o))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE extends class{}{constructor(t,r,o,u){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=o,this.serializer=u,this.y_=!1}w_(){if(this.y_)throw new ge(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,r,o,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,p])=>this.connection.Mo(t,Mc(r,o),u,h,p)).catch(h=>{throw h.name==="FirebaseError"?(h.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ge(Q.UNKNOWN,h.toString())})}Lo(t,r,o,u,h){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,g])=>this.connection.Lo(t,Mc(r,o),u,p,g,h)).catch(p=>{throw p.name==="FirebaseError"?(p.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new ge(Q.UNKNOWN,p.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class aE{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ei(r),this.D_=!1):ue("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(t,r,o,u,h){this.localStore=t,this.datastore=r,this.asyncQueue=o,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=h,this.k_._o(p=>{o.enqueueAndForget(async()=>{Wo(this)&&(ue("RemoteStore","Restarting streams for network reachability change."),await async function(v){const T=Be(v);T.L_.add(4),await qo(T),T.q_.set("Unknown"),T.L_.delete(4),await Fa(T)}(this))})}),this.q_=new aE(o,u)}}async function Fa(i){if(Wo(i))for(const t of i.B_)await t(!0)}async function qo(i){for(const t of i.B_)await t(!1)}function Wo(i){return Be(i).L_.size===0}async function Cm(i,t,r){if(!Oa(t))throw t;i.L_.add(1),await qo(i),i.q_.set("Offline"),r||(r=()=>J0(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{ue("RemoteStore","Retrying IndexedDB access"),await r(),i.L_.delete(1),await Fa(i)})}function Rm(i,t){return t().catch(r=>Cm(i,r,t))}async function ja(i){const t=Be(i),r=br(t);let o=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;cE(t);)try{const u=await Z0(t.localStore,o);if(u===null){t.O_.length===0&&r.o_();break}o=u.batchId,hE(t,u)}catch(u){await Cm(t,u)}xm(t)&&Pm(t)}function cE(i){return Wo(i)&&i.O_.length<10}function hE(i,t){i.O_.push(t);const r=br(i);r.r_()&&r.V_&&r.m_(t.mutations)}function xm(i){return Wo(i)&&!br(i).n_()&&i.O_.length>0}function Pm(i){br(i).start()}async function fE(i){br(i).p_()}async function dE(i){const t=br(i);for(const r of i.O_)t.m_(r.mutations)}async function pE(i,t,r){const o=i.O_.shift(),u=Xc.from(o,t,r);await Rm(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),await ja(i)}async function mE(i,t){t&&br(i).V_&&await async function(o,u){if(function(p){return y0(p)&&p!==Q.ABORTED}(u.code)){const h=o.O_.shift();br(o).s_(),await Rm(o,()=>o.remoteSyncer.rejectFailedWrite(h.batchId,u)),await ja(o)}}(i,t),xm(i)&&Pm(i)}async function gp(i,t){const r=Be(i);r.asyncQueue.verifyOperationInProgress(),ue("RemoteStore","RemoteStore received new credentials");const o=Wo(r);r.L_.add(3),await qo(r),o&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.L_.delete(3),await Fa(r)}async function gE(i,t){const r=Be(i);t?(r.L_.delete(2),await Fa(r)):t||(r.L_.add(2),await qo(r),r.q_.set("Unknown"))}function br(i){return i.U_||(i.U_=function(r,o,u){const h=Be(r);return h.w_(),new oE(o,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,u)}(i.datastore,i.asyncQueue,{Eo:()=>Promise.resolve(),Ro:fE.bind(null,i),mo:mE.bind(null,i),f_:dE.bind(null,i),g_:pE.bind(null,i)}),i.B_.push(async t=>{t?(i.U_.s_(),await ja(i)):(await i.U_.stop(),i.O_.length>0&&(ue("RemoteStore",`Stopping write stream with ${i.O_.length} pending writes`),i.O_=[]))})),i.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(t,r,o,u,h){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=o,this.op=u,this.removalCallback=h,this.deferred=new gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,o,u,h){const p=Date.now()+o,g=new th(t,r,p,u,h);return g.start(o),g}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(Q.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function km(i,t){if(Ei("AsyncQueue",`${t}: ${i}`),Oa(i))return new ge(Q.UNAVAILABLE,`${t}: ${i}`);throw i}class yE{constructor(){this.queries=yp(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,o){const u=Be(r),h=u.queries;u.queries=yp(),h.forEach((p,g)=>{for(const v of g.j_)v.onError(o)})})(this,new ge(Q.ABORTED,"Firestore shutting down"))}}function yp(){return new As(i=>cm(i),um)}function vE(i){i.Y_.forEach(t=>{t.next()})}var vp,_p;(_p=vp||(vp={})).ea="default",_p.Cache="cache";class _E{constructor(t,r,o,u,h,p){this.localStore=t,this.remoteStore=r,this.eventManager=o,this.sharedClientState=u,this.currentUser=h,this.maxConcurrentLimboResolutions=p,this.Ca={},this.Fa=new As(g=>cm(g),um),this.Ma=new Map,this.xa=new Set,this.Oa=new qt(_e.comparator),this.Na=new Map,this.La=new Jc,this.Ba={},this.ka=new Map,this.qa=Ts.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function EE(i,t,r){const o=IE(i);try{const u=await function(p,g){const v=Be(p),T=gt.now(),P=g.reduce((B,q)=>B.add(q.key),Nt());let M,j;return v.persistence.runTransaction("Locally write mutations","readwrite",B=>{let q=xa(),J=Nt();return v.cs.getEntries(B,P).next(X=>{q=X,q.forEach((Ee,ye)=>{ye.isValidDocument()||(J=J.add(Ee))})}).next(()=>v.localDocuments.getOverlayedDocuments(B,q)).next(X=>{M=X;const Ee=[];for(const ye of g){const se=d0(ye,M.get(ye.key).overlayedDocument);se!=null&&Ee.push(new Ti(ye.key,se,nm(se.value.mapValue),lr.exists(!0)))}return v.mutationQueue.addMutationBatch(B,T,Ee,g)}).next(X=>{j=X;const Ee=X.applyToLocalDocumentSet(M,J);return v.documentOverlayCache.saveOverlays(B,X.batchId,Ee)})}).then(()=>({batchId:j.batchId,changes:fm(M)}))}(o.localStore,t);o.sharedClientState.addPendingMutation(u.batchId),function(p,g,v){let T=p.Ba[p.currentUser.toKey()];T||(T=new qt(Fe)),T=T.insert(g,v),p.Ba[p.currentUser.toKey()]=T}(o,u.batchId,r),await Ua(o,u.changes),await ja(o.remoteStore)}catch(u){const h=km(u,"Failed to persist write");r.reject(h)}}function Ep(i,t,r){const o=Be(i);if(o.isPrimaryClient&&r===0||!o.isPrimaryClient&&r===1){const u=[];o.Fa.forEach((h,p)=>{const g=p.view.Z_(t);g.snapshot&&u.push(g.snapshot)}),function(p,g){const v=Be(p);v.onlineState=g;let T=!1;v.queries.forEach((P,M)=>{for(const j of M.j_)j.Z_(g)&&(T=!0)}),T&&vE(v)}(o.eventManager,t),u.length&&o.Ca.d_(u),o.onlineState=t,o.isPrimaryClient&&o.sharedClientState.setOnlineState(t)}}async function wE(i,t){const r=Be(i),o=t.batch.batchId;try{const u=await X0(r.localStore,t);Om(r,o,null),Nm(r,o),r.sharedClientState.updateMutationState(o,"acknowledged"),await Ua(r,u)}catch(u){await Jp(u)}}async function TE(i,t,r){const o=Be(i);try{const u=await function(p,g){const v=Be(p);return v.persistence.runTransaction("Reject batch","readwrite-primary",T=>{let P;return v.mutationQueue.lookupMutationBatch(T,g).next(M=>(Ze(M!==null),P=M.keys(),v.mutationQueue.removeMutationBatch(T,M))).next(()=>v.mutationQueue.performConsistencyCheck(T)).next(()=>v.documentOverlayCache.removeOverlaysForBatchId(T,P,g)).next(()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(T,P)).next(()=>v.localDocuments.getDocuments(T,P))})}(o.localStore,t);Om(o,t,r),Nm(o,t),o.sharedClientState.updateMutationState(t,"rejected",r),await Ua(o,u)}catch(u){await Jp(u)}}function Nm(i,t){(i.ka.get(t)||[]).forEach(r=>{r.resolve()}),i.ka.delete(t)}function Om(i,t,r){const o=Be(i);let u=o.Ba[o.currentUser.toKey()];if(u){const h=u.get(t);h&&(r?h.reject(r):h.resolve(),u=u.remove(t)),o.Ba[o.currentUser.toKey()]=u}}async function Ua(i,t,r){const o=Be(i),u=[],h=[],p=[];o.Fa.isEmpty()||(o.Fa.forEach((g,v)=>{p.push(o.Ka(v,t,r).then(T=>{var P;if((T||r)&&o.isPrimaryClient){const M=T?!T.fromCache:(P=void 0)===null||P===void 0?void 0:P.current;o.sharedClientState.updateQueryState(v.targetId,M?"current":"not-current")}if(T){u.push(T);const M=eh.Wi(v.targetId,T);h.push(M)}}))}),await Promise.all(p),o.Ca.d_(u),await async function(v,T){const P=Be(v);try{await P.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>K.forEach(T,j=>K.forEach(j.$i,B=>P.persistence.referenceDelegate.addReference(M,j.targetId,B)).next(()=>K.forEach(j.Ui,B=>P.persistence.referenceDelegate.removeReference(M,j.targetId,B)))))}catch(M){if(!Oa(M))throw M;ue("LocalStore","Failed to update sequence numbers: "+M)}for(const M of T){const j=M.targetId;if(!M.fromCache){const B=P.os.get(j),q=B.snapshotVersion,J=B.withLastLimboFreeSnapshotVersion(q);P.os=P.os.insert(j,J)}}}(o.localStore,h))}async function SE(i,t){const r=Be(i);if(!r.currentUser.isEqual(t)){ue("SyncEngine","User change. New user:",t.toKey());const o=await Im(r.localStore,t);r.currentUser=t,function(h,p){h.ka.forEach(g=>{g.forEach(v=>{v.reject(new ge(Q.CANCELLED,p))})}),h.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,o.removedBatchIds,o.addedBatchIds),await Ua(r,o.hs)}}function IE(i){const t=Be(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=wE.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=TE.bind(null,t),t}class ka{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=La(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,r){return null}Ha(t,r){return null}za(t){return Y0(this.persistence,new W0,t.initialUser,this.serializer)}Ga(t){return new G0(Zc.Zr,this.serializer)}Wa(t){return new eE}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ka.provider={build:()=>new ka};class Fc{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>Ep(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=SE.bind(null,this.syncEngine),await gE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new yE}()}createDatastore(t){const r=La(t.databaseInfo.databaseId),o=function(h){return new iE(h)}(t.databaseInfo);return function(h,p,g,v){return new lE(h,p,g,v)}(t.authCredentials,t.appCheckCredentials,o,r)}createRemoteStore(t){return function(o,u,h,p,g){return new uE(o,u,h,p,g)}(this.localStore,this.datastore,t.asyncQueue,r=>Ep(this.syncEngine,r,0),function(){return mp.D()?new mp:new tE}())}createSyncEngine(t,r){return function(u,h,p,g,v,T,P){const M=new _E(u,h,p,g,v,T);return P&&(M.Qa=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(u){const h=Be(u);ue("RemoteStore","RemoteStore shutting down."),h.L_.add(5),await qo(h),h.k_.shutdown(),h.q_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Fc.provider={build:()=>new Fc};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(t,r,o,u,h){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=o,this.databaseInfo=u,this.user=Kt.UNAUTHENTICATED,this.clientId=Xp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(o,async p=>{ue("FirestoreClient","Received user=",p.uid),await this.authCredentialListener(p),this.user=p}),this.appCheckCredentials.start(o,p=>(ue("FirestoreClient","Received new app check token=",p),this.appCheckCredentialListener(p,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=km(r,"Failed to shutdown persistence");t.reject(o)}}),t.promise}}async function Sc(i,t){i.asyncQueue.verifyOperationInProgress(),ue("FirestoreClient","Initializing OfflineComponentProvider");const r=i.configuration;await t.initialize(r);let o=r.initialUser;i.setCredentialChangeListener(async u=>{o.isEqual(u)||(await Im(t.localStore,u),o=u)}),t.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=t}async function wp(i,t){i.asyncQueue.verifyOperationInProgress();const r=await CE(i);ue("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(r,i.configuration),i.setCredentialChangeListener(o=>gp(t.remoteStore,o)),i.setAppCheckTokenChangeListener((o,u)=>gp(t.remoteStore,u)),i._onlineComponents=t}async function CE(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ue("FirestoreClient","Using user provided OfflineComponentProvider");try{await Sc(i,i._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(u){return u.name==="FirebaseError"?u.code===Q.FAILED_PRECONDITION||u.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||u.code===22||u.code===20||u.code===11}(r))throw r;Pc("Error using user provided cache. Falling back to memory cache: "+r),await Sc(i,new ka)}}else ue("FirestoreClient","Using default OfflineComponentProvider"),await Sc(i,new ka);return i._offlineComponents}async function RE(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ue("FirestoreClient","Using user provided OnlineComponentProvider"),await wp(i,i._uninitializedComponentsProvider._online)):(ue("FirestoreClient","Using default OnlineComponentProvider"),await wp(i,new Fc))),i._onlineComponents}function xE(i){return RE(i).then(t=>t.syncEngine)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(i,t,r){if(!r)throw new ge(Q.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function kE(i,t,r,o){if(t===!0&&o===!0)throw new ge(Q.INVALID_ARGUMENT,`${i} and ${r} cannot be used together.`)}function Sp(i){if(!_e.isDocumentKey(i))throw new ge(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function nh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=function(o){return o.constructor?o.constructor.name:null}(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":Ie()}function Ip(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new ge(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=nh(i);throw new ge(Q.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(t){var r,o;if(t.host===void 0){if(t.ssl!==void 0)throw new ge(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(r=t.ssl)===null||r===void 0||r;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new ge(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}kE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Dm((o=t.experimentalLongPollingOptions)!==null&&o!==void 0?o:{}),function(h){if(h.timeoutSeconds!==void 0){if(isNaN(h.timeoutSeconds))throw new ge(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (must not be NaN)`);if(h.timeoutSeconds<5)throw new ge(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (minimum allowed value is 5)`);if(h.timeoutSeconds>30)throw new ge(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(o,u){return o.timeoutSeconds===u.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Vm{constructor(t,r,o,u){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ap({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ge(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ap(t),t.credentials!==void 0&&(this._authCredentials=function(o){if(!o)return new __;switch(o.type){case"firstParty":return new T_(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new ge(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const o=Tp.get(r);o&&(ue("ComponentProvider","Removing Datastore"),Tp.delete(r),o.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(t,r,o){this.converter=r,this._query=o,this.type="query",this.firestore=t}withConverter(t){return new rh(this.firestore,t,this._query)}}class ar{constructor(t,r,o){this.converter=r,this._key=o,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bo(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ar(this.firestore,t,this._key)}}class Bo extends rh{constructor(t,r,o){super(t,r,Y_(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ar(this.firestore,null,new _e(t))}withConverter(t){return new Bo(this.firestore,t,this._path)}}function NE(i,t,...r){if(i=Ea(i),arguments.length===1&&(t=Xp.newId()),PE("doc","path",t),i instanceof Vm){const o=rt.fromString(t,...r);return Sp(o),new ar(i,null,new _e(o))}{if(!(i instanceof ar||i instanceof Bo))throw new ge(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(rt.fromString(t,...r));return Sp(o),new ar(i.firestore,i instanceof Bo?i.converter:null,new _e(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Am(this,"async_queue_retry"),this.Vu=()=>{const o=Tc();o&&ue("AsyncQueue","Visibility state changed to "+o.visibilityState),this.t_.jo()},this.mu=t;const r=Tc();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const r=Tc();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new gi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!Oa(t))throw t;ue("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(t){const r=this.mu.then(()=>(this.du=!0,t().catch(o=>{this.Eu=o,this.du=!1;const u=function(p){let g=p.message||"";return p.stack&&(g=p.stack.includes(p.message)?p.stack:p.message+`
`+p.stack),g}(o);throw Ei("INTERNAL UNHANDLED ERROR: ",u),o}).then(o=>(this.du=!1,o))));return this.mu=r,r}enqueueAfterDelay(t,r,o){this.fu(),this.Ru.indexOf(t)>-1&&(r=0);const u=th.createAndSchedule(this,t,r,o,h=>this.yu(h));return this.Tu.push(u),u}fu(){this.Eu&&Ie()}verifyOperationInProgress(){}async wu(){let t;do t=this.mu,await t;while(t!==this.mu)}Su(t){for(const r of this.Tu)if(r.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((r,o)=>r.targetTimeMs-o.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){const r=this.Tu.indexOf(t);this.Tu.splice(r,1)}}class Mm extends Vm{constructor(t,r,o,u){super(t,r,o,u),this.type="firestore",this._queue=new Cp,this._persistenceKey=u?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Cp(t),this._firestoreClient=void 0,await t}}}function OE(i){if(i._terminated)throw new ge(Q.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||DE(i),i._firestoreClient}function DE(i){var t,r,o;const u=i._freezeSettings(),h=function(g,v,T,P){return new L_(g,v,T,P.host,P.ssl,P.experimentalForceLongPolling,P.experimentalAutoDetectLongPolling,Dm(P.experimentalLongPollingOptions),P.useFetchStreams)}(i._databaseId,((t=i._app)===null||t===void 0?void 0:t.options.appId)||"",i._persistenceKey,u);i._componentsProvider||!((r=u.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((o=u.localCache)===null||o===void 0)&&o._onlineComponentProvider)&&(i._componentsProvider={_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider}),i._firestoreClient=new AE(i._authCredentials,i._appCheckCredentials,i._queue,h,i._componentsProvider&&function(g){const v=g?._online.build();return{_offline:g?._offline.build(v),_online:v}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(t){this._byteString=t}static fromBase64String(t){try{return new zo(Bn.fromBase64String(t))}catch(r){throw new ge(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new zo(Bn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new ge(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new ge(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new ge(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Fe(this._lat,t._lat)||Fe(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(o,u){if(o.length!==u.length)return!1;for(let h=0;h<o.length;++h)if(o[h]!==u[h])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE=/^__.*__$/;class ME{constructor(t,r,o){this.data=t,this.fieldMask=r,this.fieldTransforms=o}toMutation(t,r){return this.fieldMask!==null?new Ti(t,this.data,this.fieldMask,r,this.fieldTransforms):new Ko(t,this.data,r,this.fieldTransforms)}}function Um(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie()}}class sh{constructor(t,r,o,u,h,p){this.settings=t,this.databaseId=r,this.serializer=o,this.ignoreUndefinedProperties=u,h===void 0&&this.vu(),this.fieldTransforms=h||[],this.fieldMask=p||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new sh(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var r;const o=(r=this.path)===null||r===void 0?void 0:r.child(t),u=this.Fu({path:o,xu:!1});return u.Ou(t),u}Nu(t){var r;const o=(r=this.path)===null||r===void 0?void 0:r.child(t),u=this.Fu({path:o,xu:!1});return u.vu(),u}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return Na(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(t.length===0)throw this.Bu("Document fields must not be empty");if(Um(this.Cu)&&VE.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class LE{constructor(t,r,o){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=o||La(t)}Qu(t,r,o,u=!1){return new sh({Cu:t,methodName:r,qu:o,path:St.emptyPath(),xu:!1,ku:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function FE(i){const t=i._freezeSettings(),r=La(i._databaseId);return new LE(i._databaseId,!!t.ignoreUndefinedProperties,r)}function jE(i,t,r,o,u,h={}){const p=i.Qu(h.merge||h.mergeFields?2:0,t,r,u);$m("Data must be an object, but it was:",p,o);const g=Bm(o,p);let v,T;if(h.merge)v=new Pn(p.fieldMask),T=p.fieldTransforms;else if(h.mergeFields){const P=[];for(const M of h.mergeFields){const j=UE(t,M,r);if(!p.contains(j))throw new ge(Q.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);zE(P,j)||P.push(j)}v=new Pn(P),T=p.fieldTransforms.filter(M=>v.covers(M.field))}else v=null,T=p.fieldTransforms;return new ME(new xn(g),v,T)}class oh extends ih{_toFieldTransform(t){return new u0(t.path,new jo)}isEqual(t){return t instanceof oh}}function bm(i,t){if(zm(i=Ea(i)))return $m("Unsupported field value:",t,i),Bm(i,t);if(i instanceof ih)return function(o,u){if(!Um(u.Cu))throw u.Bu(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Bu(`${o._methodName}() is not currently supported inside arrays`);const h=o._toFieldTransform(u);h&&u.fieldTransforms.push(h)}(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.xu&&t.Cu!==4)throw t.Bu("Nested arrays are not supported");return function(o,u){const h=[];let p=0;for(const g of o){let v=bm(g,u.Lu(p));v==null&&(v={nullValue:"NULL_VALUE"}),h.push(v),p++}return{arrayValue:{values:h}}}(i,t)}return function(o,u){if((o=Ea(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return o0(u.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const h=gt.fromDate(o);return{timestampValue:Vc(u.serializer,h)}}if(o instanceof gt){const h=new gt(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Vc(u.serializer,h)}}if(o instanceof Fm)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof zo)return{bytesValue:E0(u.serializer,o._byteString)};if(o instanceof ar){const h=u.databaseId,p=o.firestore._databaseId;if(!p.isEqual(h))throw u.Bu(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Tm(o.firestore._databaseId||u.databaseId,o._key.path)}}if(o instanceof jm)return function(p,g){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:p.toArray().map(v=>{if(typeof v!="number")throw g.Bu("VectorValues must only contain numeric values.");return Yc(g.serializer,v)})}}}}}}(o,u);throw u.Bu(`Unsupported field value: ${nh(o)}`)}(i,t)}function Bm(i,t){const r={};return em(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Go(i,(o,u)=>{const h=bm(u,t.Mu(o));h!=null&&(r[o]=h)}),{mapValue:{fields:r}}}function zm(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof gt||i instanceof Fm||i instanceof zo||i instanceof ar||i instanceof ih||i instanceof jm)}function $m(i,t,r){if(!zm(r)||!function(u){return typeof u=="object"&&u!==null&&(Object.getPrototypeOf(u)===Object.prototype||Object.getPrototypeOf(u)===null)}(r)){const o=nh(r);throw o==="an object"?t.Bu(i+" a custom object"):t.Bu(i+" "+o)}}function UE(i,t,r){if((t=Ea(t))instanceof Lm)return t._internalPath;if(typeof t=="string")return BE(i,t);throw Na("Field path arguments must be of type string or ",i,!1,void 0,r)}const bE=new RegExp("[~\\*/\\[\\]]");function BE(i,t,r){if(t.search(bE)>=0)throw Na(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,r);try{return new Lm(...t.split("."))._internalPath}catch{throw Na(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,r)}}function Na(i,t,r,o,u){const h=o&&!o.isEmpty(),p=u!==void 0;let g=`Function ${t}() called with invalid data`;r&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(h||p)&&(v+=" (found",h&&(v+=` in field ${o}`),p&&(v+=` in document ${u}`),v+=")"),new ge(Q.INVALID_ARGUMENT,g+i+v)}function zE(i,t){return i.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(i,t,r){let o;return o=i?i.toFirestore(t):t,o}function HE(i,t,r){i=Ip(i,ar);const o=Ip(i.firestore,Mm),u=$E(i.converter,t);return GE(o,[jE(FE(o),"setDoc",i._key,u,i.converter!==null,r).toMutation(i._key,lr.none())])}function GE(i,t){return function(o,u){const h=new gi;return o.asyncQueue.enqueueAndForget(async()=>EE(await xE(o),u,h)),h.promise}(OE(i),t)}function Rp(){return new oh("serverTimestamp")}(function(t,r=!0){(function(u){Is=u})(a_),Ta(new wa("firestore",(o,{instanceIdentifier:u,options:h})=>{const p=o.getProvider("app").getImmediate(),g=new Mm(new E_(o.getProvider("auth-internal")),new I_(o.getProvider("app-check-internal")),function(T,P){if(!Object.prototype.hasOwnProperty.apply(T.options,["projectId"]))throw new ge(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Aa(T.options.projectId,P)}(p,u),p);return h=Object.assign({useFetchStreams:r},h),g._setSettings(h),g},"PUBLIC").setMultipleInstances(!0)),Co(ep,"4.7.3",t),Co(ep,"4.7.3","esm2017")})();const lh=null,KE=null,qE=Object.freeze(Object.defineProperty({__proto__:null,auth:KE,db:lh},Symbol.toStringTag,{value:"Module"})),jc="learningBuddy_";let Hm=!1;const WE=i=>{Hm=i},Gm=i=>Hm||i==="demo-user"?`${jc}demo_progress`:`${jc}user_progress_${i}`,No=(i,t)=>{try{const r=Gm(i);localStorage.setItem(r,JSON.stringify(t))}catch(r){console.error("Failed to save progress to local storage",r)}},$o=i=>{try{const t=Gm(i),r=localStorage.getItem(t);return r?JSON.parse(r):null}catch(t){return console.error("Failed to get progress from local storage",t),null}},QE=()=>{try{Object.keys(localStorage).forEach(i=>{i.startsWith(jc)&&localStorage.removeItem(i)}),console.log("Cleared all app-related local storage.")}catch(i){console.error("Failed to clear local storage",i)}},Ic=()=>localStorage.getItem("forceLocalStorageMode")==="true"?!1:lh!==null,YE=async(i,t)=>{console.log("createUserProfile called for user:",i,t);const r={profile:{createdAt:Ic()?Rp():new Date().toISOString(),lastActive:Ic()?Rp():new Date().toISOString(),email:t.email,grade:t.grade,targetExamYear:t.targetExamYear,onboardingComplete:t.onboardingComplete||!1,userName:t.profile.userName},onboardingComplete:t.onboardingComplete||!1};if(!Ic())return No(i,r),!0;try{const o=NE(lh,"users",i);return await HE(o,r),No(i,r),!0}catch(o){return console.error(" Error creating user profile in Firebase:",o),No(i,r),!1}},XE=async(i,t)=>{const r={...t,onboardingComplete:!0};return await YE(i,r)},JE=async i=>$o(i)?{totalStudyTime:0,subjectsEnrolled:0,averageProficiency:0,studyStreak:0}:null,ZE=async i=>[],ew=(i,t)=>{const r=$o(i);return r&&setTimeout(()=>t(r),0),()=>{}},tw=async i=>$o(i),nw=({userProgress:i,subjects:t,updateProgress:r,updateGamification:o,userId:u,onLogout:h})=>{const[p,g]=De.useState(null),[v,T]=De.useState(null),[P,M]=De.useState(!1),[j,B]=De.useState(null),[q,J]=De.useState([]),[X,Ee]=De.useState("overview");De.useEffect(()=>{ye(),se()},[u]);const ye=async()=>{try{const me=await JE(u);B(me)}catch(me){console.error("Error loading analytics:",me)}},se=async()=>{try{const me=await ZE(u);J(me)}catch(me){console.error("Error loading review topics:",me)}},le=()=>{if(!i?.subjects)return 0;let me=0,ce=0;return Object.values(i.subjects).forEach(R=>{R.topics&&Object.values(R.topics).forEach(E=>{me++,ce+=E.progress||0})}),me>0?Math.round(ce/me):0};return p?b.jsx(Qy,{userId:u,subjectCode:p.subject.id,initialTopic:p.topic.id,children:b.jsx(qy,{subject:p.subject,topic:p.topic,onExit:()=>g(null),userName:i.userName||i.profile?.userName,updateGamification:o,userId:u})}):b.jsxs("div",{className:"min-h-screen flex bg-slate-900",children:[b.jsxs("aside",{className:"w-64 bg-slate-800/50 p-6 border-r border-slate-700 flex-shrink-0 flex flex-col",children:[b.jsxs("div",{className:"flex flex-col items-center mb-8",children:[b.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center mb-4 ring-4 ring-indigo-500/30",children:b.jsx("span",{className:"text-2xl font-bold text-white",children:(i.userName||i.profile?.userName||"U").charAt(0).toUpperCase()})}),b.jsx("h2",{className:"text-lg font-semibold text-white",children:i.userName||i.profile?.userName||"Student"}),b.jsx("div",{className:"text-sm text-slate-400",children:i.profile?.grade||"O-Level Student"})]}),b.jsxs("div",{className:"mb-6",children:[b.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-4 mb-4",children:[b.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Overall Progress"}),b.jsxs("div",{className:"flex items-center",children:[b.jsxs("div",{className:"text-2xl font-bold text-white mr-2",children:[le(),"%"]}),b.jsx("div",{className:"flex-1 bg-slate-600 rounded-full h-2",children:b.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 h-2 rounded-full",style:{width:`${le()}%`}})})]})]}),b.jsx(rw,{progress:i.gamification})]}),b.jsx("div",{className:"mt-auto pt-6",children:b.jsx("button",{onClick:h,className:"w-full px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-300 hover:text-white rounded-lg transition-colors text-sm",children:"Sign Out"})})]}),b.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:b.jsxs("h1",{className:"text-3xl font-bold text-white mb-2",children:["Welcome back, ",i.userName||i.profile?.userName,"! "]})}),v&&b.jsx(Wy,{userId:u,subjectCode:v,onClose:()=>T(null)}),P&&b.jsx(Yy,{userId:u,onClose:()=>M(!1)})]})},rw=({progress:i})=>i?b.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-4",children:[b.jsx("div",{className:"text-sm text-slate-400 mb-3",children:"Progress"}),b.jsxs("div",{className:"space-y-3",children:[b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("span",{className:"text-yellow-400",children:" Points"}),b.jsx("span",{className:"font-bold text-white",children:i.points||0})]}),b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("span",{className:"text-orange-400",children:" Streak"}),b.jsxs("span",{className:"font-bold text-white",children:[i.streak||0," days"]})]}),b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("span",{className:"text-purple-400",children:" Badges"}),b.jsx("span",{className:"font-bold text-white",children:i.badges?.length||0})]})]})]}):null,iw=i=>{const t=setTimeout(()=>i(null),100);return()=>clearTimeout(t)},sw=async()=>(console.log("User logged out"),Promise.resolve()),ow=()=>{const[i,t]=De.useState(null),[r,o]=De.useState(null),[u,h]=De.useState(!1),[p,g]=De.useState(!1),[v,T]=De.useState(!1),[P,M]=De.useState(null),[j,B]=De.useState(!0),q=se=>{if(g(!0),se==="demo"){t({uid:"demo-user",email:"demo@example.com",displayName:"Demo User"}),h(!0),WE(!0);const me=$o("demo-user");me&&(M(me),T(!0)),B(!1)}else(se==="login"||se==="register")&&o(se)},J=async se=>{console.log("=== AUTH SUCCESS START ===");try{console.log("User authenticated:",se.uid,se.email,"Role:",se.role),t(se),h(!0);const le=$o(se.uid);console.log("Local progress check:",{found:!!le,hasOnboardingComplete:le?.onboardingComplete,hasProfileOnboardingComplete:le?.profile?.onboardingComplete});const me=le&&(le.onboardingComplete===!0||le.profile?.onboardingComplete===!0);le&&me?(console.log(" Found complete local progress, loading immediately"),M(le),T(!0)):le&&console.log(" Found local progress but onboarding not marked complete");try{console.log("Checking Firebase for user data...");const ce=await tw(se.uid);console.log("Firebase data check:",{found:!!ce,hasProfile:!!ce?.profile,profileOnboardingComplete:ce?.profile?.onboardingComplete,topLevelOnboardingComplete:ce?.onboardingComplete}),ce?ce.onboardingComplete===!0||ce.profile?.onboardingComplete===!0?(console.log(" Firebase shows onboarding complete, loading data"),M(ce),T(!0),No(se.uid,ce)):console.log(" Firebase data exists but onboarding not complete"):console.log(" No Firebase data found")}catch(ce){console.error(" Error checking Firebase user data:",ce)}}finally{B(!1),console.log("=== AUTH SUCCESS END ===")}},X=()=>{o(r==="login"?"register":"login")},Ee=()=>{o("choice")},ye=async(se,le,me,ce)=>{if(!i){console.error("No current user for evaluation completion");return}const R=await $y(ce,se.subjects,se.topics),E={profile:{...se,email:i.email,userName:se.userName,examDate:se.examDate,onboardingComplete:!0,createdAt:new Date().toISOString(),lastActive:new Date().toISOString()},subjects:{},evaluation:ce,studyPlan:R,gamification:{points:100,streak:1,badges:["Early Adopter"]}};No(i.uid,E),M(E),T(!0);try{await XE(i.uid,E)?console.log(" User profile created and evaluation completed in Firebase"):console.warn(" Firebase operation failed, but local save successful")}catch(S){console.error(" Error saving to Firebase:",S)}};return De.useEffect(()=>{const le=(async()=>{try{const{auth:me}=await ay(async()=>{const{auth:E}=await Promise.resolve().then(()=>qE);return{auth:E}},void 0);if(!me){B(!1),o("choice");return}const ce=setTimeout(()=>{B(!1),o("choice")},5e3),R=iw(async E=>{if(clearTimeout(ce),E&&p){const S={uid:E.uid,email:E.email,displayName:E.displayName};await J(S)}else t(null),h(!1),T(!1),M(null),o("choice"),B(!1)});return()=>{clearTimeout(ce),R()}}catch(me){console.error("Error setting up Firebase auth:",me),B(!1),o("choice")}})();return()=>{le&&typeof le.then=="function"&&le.then(me=>me&&me())}},[]),De.useEffect(()=>{if(i&&v){const se=ew(i.uid,le=>{le&&M(le)});return()=>se()}},[i,v]),j?b.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),b.jsx("div",{className:"text-white text-xl",children:"Loading your learning journey..."})]})}):u?b.jsx("div",{className:"min-h-screen bg-slate-900 font-sans text-slate-200",children:!v||!P?b.jsx(Ky,{onComplete:ye}):b.jsx(nw,{userProgress:P,subjects:Pp,userId:i.uid,onLogout:async()=>{await sw(),t(null),h(!1),o("choice"),QE()}})}):r==="choice"||!r?b.jsx(uy,{onChoice:q}):b.jsx(cy,{mode:r,onSuccess:J,onSwitchMode:X,onGoBack:Ee})};sy.createRoot(document.getElementById("root")).render(b.jsx(Jg.StrictMode,{children:b.jsx(ow,{})}));
